# ğŸ“º Tutorial: Menampilkan TV Shows & Menambahkan Spinner Loading

> **Catatan:** Dokumentasi ini adalah kelanjutan dari project Movie App menggunakan TMDB API

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Apa yang Akan Dibuat?](#apa-yang-akan-dibuat)
- [Langkah 1: Membuat Fungsi Show Spinner](#langkah-1-membuat-fungsi-show-spinner)
- [Langkah 2: Membuat Fungsi Hide Spinner](#langkah-2-membuat-fungsi-hide-spinner)
- [Langkah 3: Menambahkan Spinner ke Fetch API](#langkah-3-menambahkan-spinner-ke-fetch-api)
- [Langkah 4: Membuat Fungsi Display Popular Shows](#langkah-4-membuat-fungsi-display-popular-shows)
- [Langkah 5: Membersihkan HTML Dummy Data](#langkah-5-membersihkan-html-dummy-data)
- [Langkah 6: Memanggil Fungsi di Init](#langkah-6-memanggil-fungsi-di-init)
- [Kode Lengkap](#kode-lengkap)
- [Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Pada video sebelumnya, kita sudah berhasil menampilkan **popular movies** di homepage dengan:
- âœ… Title (judul film)
- âœ… Release Date (tanggal rilis)
- âœ… Image (gambar poster)

Sekarang kita akan melanjutkan dengan:
1. **Menambahkan Spinner/Loading** saat data sedang di-fetch
2. **Menampilkan TV Shows** yang populer

---

<a name="apa-yang-akan-dibuat"></a>
## ğŸ¬ Apa yang Akan Dibuat?

Kita akan membuat 2 fitur utama:

### 1. ğŸ”„ Spinner Loading
Spinner adalah animasi loading yang muncul saat data sedang di-fetch dari API. Ini penting karena:
- Memberitahu user bahwa aplikasi sedang memproses sesuatu
- Meningkatkan user experience
- Sangat berguna untuk user dengan koneksi internet lambat

### 2. ğŸ“º Display Popular TV Shows
Mirip dengan popular movies, tapi untuk TV Shows dengan:
- Endpoint berbeda: `tv/popular` (bukan `movie/popular`)
- Property berbeda: `name` (bukan `title`)
- Date property berbeda: `first_air_date` (bukan `release_date`)

---

<a name="langkah-1-membuat-fungsi-show-spinner"></a>
## ğŸ”„ Langkah 1: Membuat Fungsi Show Spinner

### ğŸ“ Penjelasan

Fungsi `showSpinner()` akan menampilkan spinner dengan menambahkan class `show` ke elemen spinner.

Di HTML sudah ada `<div class="spinner">` yang sudah di-styling. Kita hanya perlu toggle class `show` untuk menampilkan/menyembunyikannya.

### ğŸ’» Kode

```javascript
// âœ¨ FUNGSI BARU: Menampilkan spinner
function showSpinner() {
  document.querySelector('.spinner').classList.add('show');
}
```

### ğŸ” Penjelasan Detail:
- `document.querySelector('.spinner')` â†’ Mencari elemen dengan class `spinner`
- `.classList.add('show')` â†’ Menambahkan class `show` untuk menampilkan spinner
- **âš ï¸ Jangan lupa titik (.) untuk class selector!**

---

<a name="langkah-2-membuat-fungsi-hide-spinner"></a>
## ğŸ”„ Langkah 2: Membuat Fungsi Hide Spinner

### ğŸ“ Penjelasan

Fungsi `hideSpinner()` akan menyembunyikan spinner dengan menghapus class `show`.

### ğŸ’» Kode

```javascript
// âœ¨ FUNGSI BARU: Menyembunyikan spinner
function hideSpinner() {
  document.querySelector('.spinner').classList.remove('show');
}
```

### ğŸ” Penjelasan Detail:
- `document.querySelector('.spinner')` â†’ Mencari elemen yang sama
- `.classList.remove('show')` â†’ Menghapus class `show` untuk menyembunyikan spinner

---

<a name="langkah-3-menambahkan-spinner-ke-fetch-api"></a>
## ğŸ”„ Langkah 3: Menambahkan Spinner ke Fetch API

### ğŸ“ Penjelasan

Sekarang kita akan memanggil kedua fungsi spinner di dalam `fetchAPIData()`:
- **Sebelum fetch** â†’ tampilkan spinner
- **Setelah fetch selesai** â†’ sembunyikan spinner

### ğŸ’» Kode

**Kode Sebelumnya:**
```javascript
async function fetchAPIData(endpoint) {
  const API_KEY = '';
  const API_URL = 'https://api.themoviedb.org/3/';

  const response = await fetch(
    `${API_URL}${endpoint}?api_key=${API_KEY}&language=en-US`
  );

  const data = await response.json();

  return data;
}
```

**Kode Setelah Diubah:**
```javascript
async function fetchAPIData(endpoint) {
  const API_KEY = '';
  const API_URL = 'https://api.themoviedb.org/3/';

  showSpinner(); // âœ¨ TAMBAHKAN: Tampilkan spinner sebelum fetch

  const response = await fetch(
    `${API_URL}${endpoint}?api_key=${API_KEY}&language=en-US`
  );

  const data = await response.json();

  hideSpinner(); // âœ¨ TAMBAHKAN: Sembunyikan spinner setelah fetch

  return data;
}
```

### ğŸ” Alur Kerja:
1. User membuka halaman
2. `showSpinner()` dipanggil â†’ Spinner muncul â³
3. `fetch()` mengambil data dari API
4. `hideSpinner()` dipanggil â†’ Spinner hilang âœ…
5. Data ditampilkan

---

<a name="langkah-4-membuat-fungsi-display-popular-shows"></a>
## ğŸ“º Langkah 4: Membuat Fungsi Display Popular Shows

### ğŸ“ Penjelasan

Fungsi ini hampir sama dengan `displayPopularMovies()`, tapi ada beberapa perbedaan penting:

| Aspek | Movies | TV Shows |
|-------|--------|----------|
| **Endpoint** | `movie/popular` | `tv/popular` |
| **Judul** | `movie.title` | `show.name` |
| **Tanggal** | `movie.release_date` | `show.first_air_date` |
| **Link** | `movie-details.html` | `tv-details.html` |

### ğŸ’» Kode

```javascript
// âœ¨ FUNGSI BARU: Display 20 most popular TV shows
async function displayPopularShows() {
  const { results } = await fetchAPIData('tv/popular'); // ğŸ”„ Endpoint berubah

  results.forEach((show) => { // ğŸ”„ Parameter berubah dari movie ke show
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="tv-details.html?id=${show.id}"> 
            ${
              show.poster_path // ğŸ”„ show.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${show.poster_path}"
              class="card-img-top"
              alt="${show.name}" 
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${show.name}" 
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${show.name}</h5> 
            <p class="card-text">
              <small class="text-muted">Air Date: ${show.first_air_date}</small> 
            </p>
          </div>
        `;

    document.querySelector('#popular-shows').appendChild(div); // ğŸ”„ ID berubah
  });
}
```

### ğŸ” Penjelasan Perubahan:

#### 1. **Endpoint API**
```javascript
await fetchAPIData('tv/popular') // Bukan 'movie/popular'
```

#### 2. **Parameter forEach**
```javascript
results.forEach((show) => { // Bukan (movie)
```
Ini hanya penamaan variabel untuk mempermudah membaca kode.

#### 3. **Link Detail**
```javascript
<a href="tv-details.html?id=${show.id}"> // Bukan movie-details.html
```

#### 4. **Property Name vs Title**
```javascript
alt="${show.name}"  // TV Shows pakai .name
// Movies pakai .title
```

**Kenapa berbeda?** Karena API TMDB memberikan response berbeda:
- **Movies** â†’ memiliki property `title`
- **TV Shows** â†’ memiliki property `name`

#### 5. **Property Date**
```javascript
Air Date: ${show.first_air_date} // TV Shows pakai first_air_date
// Movies pakai release_date
```

#### 6. **Target Element**
```javascript
document.querySelector('#popular-shows') // Bukan '#popular-movies'
```

---

<a name="langkah-5-membersihkan-html-dummy-data"></a>
## ğŸ§¹ Langkah 5: Membersihkan HTML Dummy Data

### ğŸ“ Penjelasan

Di file `shows.html`, ada dummy data (data palsu) untuk testing. Kita harus menghapusnya agar tidak double dengan data dari API.

### ğŸ’» Yang Harus Dilakukan:

**File: shows.html**

Cari bagian ini:
```html
<div id="popular-shows">
  <!-- HAPUS semua div dengan class="card" di sini -->
  <!-- Biarkan div #popular-shows tetap ada, hapus isinya saja -->
</div>
```

**Sebelum:**
```html
<div id="popular-shows">
  <div class="card">...</div>
  <div class="card">...</div>
  <div class="card">...</div>
  <!-- Banyak dummy cards -->
</div>
```

**Sesudah:**
```html
<div id="popular-shows">
  <!-- Kosong, akan diisi oleh JavaScript -->
</div>
```

### âš ï¸ Penting:
- **JANGAN** hapus `<div id="popular-shows">`
- **HAPUS** semua `<div class="card">` di dalamnya
- JavaScript kita akan mengisi element ini dengan data dari API

---

<a name="langkah-6-memanggil-fungsi-di-init"></a>
## ğŸš€ Langkah 6: Memanggil Fungsi di Init

### ğŸ“ Penjelasan

Fungsi `init()` adalah fungsi yang dijalankan saat halaman pertama kali dimuat. Kita perlu memanggil `displayPopularShows()` ketika user membuka halaman `shows.html`.

### ğŸ’» Kode

**Sebelum:**
```javascript
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displayPopularMovies();
      break;
    case '/shows.html':
      console.log('Shows'); // âŒ Hanya console.log
      break;
    // ...
  }
  highlightActiveLink();
}
```

**Sesudah:**
```javascript
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displayPopularMovies();
      break;
    case '/shows.html':
      displayPopularShows(); // âœ¨ UBAH: Panggil fungsi yang sudah dibuat
      break;
    // ...
  }
  highlightActiveLink();
}
```

### ğŸ” Cara Kerja:
1. User membuka `shows.html`
2. `global.currentPage` berisi `/shows.html`
3. Switch case cocok dengan case `'/shows.html'`
4. `displayPopularShows()` dipanggil
5. Data TV Shows ditampilkan

---

<a name="kode-lengkap"></a>
## ğŸ“„ Kode Lengkap

### **File: script.js**

```javascript
const global = {
  currentPage: window.location.pathname,
};

// Display 20 most popular movies
async function displayPopularMovies() {
  const { results } = await fetchAPIData('movie/popular');

  results.forEach((movie) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="movie-details.html?id=${movie.id}">
            ${
              movie.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
              class="card-img-top"
              alt="${movie.title}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${movie.title}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${movie.title}</h5>
            <p class="card-text">
              <small class="text-muted">Release: ${movie.release_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-movies').appendChild(div);
  });
}

// âœ¨ BARU: Display 20 most popular tv shows
async function displayPopularShows() {
  const { results } = await fetchAPIData('tv/popular');

  results.forEach((show) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="tv-details.html?id=${show.id}">
            ${
              show.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${show.poster_path}"
              class="card-img-top"
              alt="${show.name}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${show.name}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${show.name}</h5>
            <p class="card-text">
              <small class="text-muted">Air Date: ${show.first_air_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-shows').appendChild(div);
  });
}

// Fetch data from TMDB API
async function fetchAPIData(endpoint) {
  // Register your key at https://www.themoviedb.org/settings/api and enter here
  // Only use this for development or very small projects. You should store your key and make requests from a server
  const API_KEY = '';
  const API_URL = 'https://api.themoviedb.org/3/';

  showSpinner(); // âœ¨ TAMBAH: Tampilkan spinner

  const response = await fetch(
    `${API_URL}${endpoint}?api_key=${API_KEY}&language=en-US`
  );

  const data = await response.json();

  hideSpinner(); // âœ¨ TAMBAH: Sembunyikan spinner

  return data;
}

// âœ¨ BARU: Fungsi untuk menampilkan spinner
function showSpinner() {
  document.querySelector('.spinner').classList.add('show');
}

// âœ¨ BARU: Fungsi untuk menyembunyikan spinner
function hideSpinner() {
  document.querySelector('.spinner').classList.remove('show');
}

// Highlight active link
function highlightActiveLink() {
  const links = document.querySelectorAll('.nav-link');
  links.forEach((link) => {
    if (link.getAttribute('href') === global.currentPage) {
      link.classList.add('active');
    }
  });
}

// Init App
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displayPopularMovies();
      break;
    case '/shows.html':
      displayPopularShows(); // âœ¨ UBAH: Dari console.log ke fungsi
      break;
    case '/movie-details.html':
      console.log('Movie Details');
      break;
    case '/tv-details.html':
      console.log('TV Details');
      break;
    case '/search.html':
      console.log('Search');
      break;
  }

  highlightActiveLink();
}

document.addEventListener('DOMContentLoaded', init);
```

---

<a name="kesimpulan"></a>
## ğŸ‰ Kesimpulan

### âœ… Yang Sudah Kita Buat:

1. **Spinner Loading** ğŸ”„
   - Fungsi `showSpinner()` untuk menampilkan loading
   - Fungsi `hideSpinner()` untuk menyembunyikan loading
   - Terintegrasi dengan `fetchAPIData()`

2. **Display Popular TV Shows** ğŸ“º
   - Mengambil data dari endpoint `tv/popular`
   - Menampilkan 20 TV shows populer
   - Menggunakan property yang sesuai (`name`, `first_air_date`)

### ğŸ“Š Perbedaan Movies vs TV Shows:

| Item | Movies | TV Shows |
|------|--------|----------|
| **Endpoint** | `movie/popular` | `tv/popular` |
| **Nama/Judul** | `title` | `name` |
| **Tanggal** | `release_date` | `first_air_date` |
| **Halaman Detail** | `movie-details.html` | `tv-details.html` |
| **Element ID** | `#popular-movies` | `#popular-shows` |

### ğŸ¯ Next Step:

Video selanjutnya akan membahas:
- Menampilkan **Movie Details** (detail film ketika diklik)
- Menampilkan backdrop image
- Menampilkan poster path
- Menampilkan semua informasi lengkap untuk 1 film

### ğŸ’¡ Tips untuk Pemula:

1. **Jangan lupa titik (.) untuk class selector**
   ```javascript
   // âŒ Salah
   document.querySelector('spinner')
   
   // âœ… Benar
   document.querySelector('.spinner')
   ```

2. **Perhatikan perbedaan property dari API**
   - Selalu cek dokumentasi API atau response JSON
   - Movies dan TV Shows punya property berbeda

3. **Spinner meningkatkan UX**
   - User tahu aplikasi sedang loading
   - Sangat penting untuk koneksi lambat

---

**ğŸ“Œ Catatan Penting:**
- API Key harus didaftarkan di https://www.themoviedb.org/settings/api
- Hanya untuk development/project kecil
- Untuk production, simpan API key di server

**Happy Coding! ğŸš€**
