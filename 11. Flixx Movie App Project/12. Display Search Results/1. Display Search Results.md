# ğŸ¬ Dokumentasi Fitur Search Movies & TV Shows

> **Dokumentasi Pribadi untuk Pemula** - Belajar membuat fitur pencarian film dan TV show dengan JavaScript

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Persiapan Awal](#persiapan-awal)
- [Struktur Global State](#struktur-global-state)
- [Membuat Fungsi Search](#membuat-fungsi-search)
- [Destructuring Data dari API](#destructuring-data-api)
- [Validasi Hasil Pencarian](#validasi-hasil-pencarian)
- [Memperbaiki Alert System](#memperbaiki-alert-system)
- [Membuat Display Search Results](#membuat-display-search-results)
- [Menangani Movie vs TV Show](#menangani-movie-vs-tv)
- [Memperbaiki Bug Image Path](#memperbaiki-bug-image)
- [Testing Hasil Search](#testing-hasil-search)
- [Kode Lengkap](#kode-lengkap)
- [Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Pada tutorial ini, kita akan melanjutkan dari video sebelumnya untuk menampilkan hasil pencarian film dan TV show ke dalam DOM (halaman web). Kita sudah berhasil membuat fungsi search dan mendapatkan data dari API, sekarang saatnya menampilkannya!

**Yang akan kita pelajari:**
- âœ… Destructuring data dari API response
- âœ… Validasi hasil pencarian (jika kosong)
- âœ… Menampilkan hasil search ke DOM
- âœ… Menangani perbedaan struktur data movie vs TV show
- âœ… Debugging dan memperbaiki bug

---

<a name="persiapan-awal"></a>
## ğŸ› ï¸ Persiapan Awal

### Status Kode Sebelumnya

Berikut adalah kondisi fungsi `search()` kita dari video sebelumnya:

```javascript
// Search Movies/Shows
async function search() {
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);

  global.search.type = urlParams.get('type');
  global.search.term = urlParams.get('search-term');

  if (global.search.term !== '' && global.search.term !== null) {
    const results = await searchAPIData();
    console.log(results); // ğŸ‘ˆ Kita baru sampai di sini
  } else {
    showAlert('Please enter a search term');
  }
}
```

**Penjelasan:**
- âœ¨ Kita sudah bisa mengambil data dari URL
- âœ¨ Kita sudah bisa request ke API
- âœ¨ Tapi datanya masih di-console log saja
- ğŸ¯ **Tujuan:** Menampilkan hasil ke halaman web!

---

<a name="struktur-global-state"></a>
## ğŸ—‚ï¸ Struktur Global State

Mari kita lihat kembali struktur `global` state kita:

```javascript
const global = {
  currentPage: window.location.pathname,
  search: {
    term: '',        // ğŸ“ Kata kunci pencarian
    type: '',        // ğŸ¬ 'movie' atau 'tv'
    page: 1,         // ğŸ“„ Halaman saat ini (untuk pagination)
    totalPages: 1,   // ğŸ“Š Total halaman hasil
  },
  api: {
    apiKey: '',
    apiUrl: 'https://api.themoviedb.org/3/',
  },
};
```

**Kenapa penting?**
- `search.type` akan kita gunakan untuk menentukan link detail (movie-details.html atau tv-details.html)
- `search.term` berisi kata kunci yang dicari user
- `page` dan `totalPages` akan kita gunakan nanti untuk pagination

---

<a name="destructuring-data-api"></a>
## ğŸ“¦ Destructuring Data dari API

### Apa yang Dikembalikan API?

Ketika kita memanggil `searchAPIData()`, API mengembalikan object seperti ini:

```javascript
{
  results: [...],      // ğŸ¬ Array berisi film/TV show
  total_pages: 10,     // ğŸ“Š Total halaman
  page: 1,             // ğŸ“„ Halaman saat ini
  total_results: 200   // ğŸ”¢ Total hasil
}
```

### Mengambil Data yang Dibutuhkan

Daripada menggunakan `results.results`, kita bisa gunakan **destructuring**:

```javascript
// âŒ Cara lama (panjang)
const results = await searchAPIData();
const movieArray = results.results;
const totalPages = results.total_pages;
const page = results.page;

// âœ… Cara baru (destructuring) - LEBIH RINGKAS!
const { results, total_pages, page } = await searchAPIData();
```

**Update fungsi search():**

```javascript
async function search() {
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);

  global.search.type = urlParams.get('type');
  global.search.term = urlParams.get('search-term');

  if (global.search.term !== '' && global.search.term !== null) {
    // âœ¨ PERUBAHAN: Destructuring data yang kita butuhkan
    const { results, total_pages, page } = await searchAPIData();
    // ğŸ“ results = array film/TV show
    // ğŸ“ total_pages = total halaman (untuk pagination nanti)
    // ğŸ“ page = nomor halaman saat ini
  } else {
    showAlert('Please enter a search term');
  }
}
```

---

<a name="validasi-hasil-pencarian"></a>
## âœ… Validasi Hasil Pencarian

### Mengecek Apakah Ada Hasil

Sebelum menampilkan hasil, kita harus cek dulu: **apakah `results` ada isinya?**

```javascript
if (global.search.term !== '' && global.search.term !== null) {
  const { results, total_pages, page } = await searchAPIData();

  // âœ¨ CEK: Apakah results kosong?
  if (results.length === 0) {
    showAlert('No results found'); // ğŸš¨ Tampilkan pesan error
    return; // â›” Stop eksekusi fungsi
  }

  // âœ… Jika ada hasil, tampilkan ke DOM
  displaySearchResults(results);

  // ğŸ§¹ Bersihkan input search
  document.querySelector('#search-term').value = '';
} else {
  showAlert('Please enter a search term');
}
```

**Penjelasan:**
- `results.length === 0` â†’ Tidak ada hasil pencarian
- `return` â†’ Menghentikan fungsi agar tidak lanjut ke bawah
- Jika ada hasil, panggil `displaySearchResults(results)`

---

<a name="memperbaiki-alert-system"></a>
## ğŸ¨ Memperbaiki Alert System

### Masalah dengan Alert

Saat ini, fungsi `showAlert()` kita selalu menampilkan background merah. Tapi kita ingin:
- ğŸ”´ **Merah** untuk error
- ğŸŸ¢ **Hijau** untuk success

### Melihat CSS yang Ada

```css
.alert {
  padding: 10px 20px;
  margin-bottom: 20px;
  border-radius: 5px;
  /* âŒ background: red; - Dihapus! */
}

.alert-error {
  background: red; /* ğŸ”´ Untuk error */
}

.alert-success {
  background: green; /* ğŸŸ¢ Untuk success */
}
```

### Update Fungsi showAlert()

```javascript
// âŒ SEBELUM
function showAlert(message, className) {
  const alertEl = document.createElement('div');
  alertEl.classList.add('alert', className); // âš ï¸ className bisa undefined
  alertEl.appendChild(document.createTextNode(message));
  document.querySelector('#alert').appendChild(alertEl);

  setTimeout(() => alertEl.remove(), 3000);
}

// âœ… SESUDAH - Dengan default parameter
function showAlert(message, className = 'error') { // ğŸ¯ Default = 'error'
  const alertEl = document.createElement('div');
  alertEl.classList.add('alert', className);
  alertEl.appendChild(document.createTextNode(message));
  document.querySelector('#alert').appendChild(alertEl);

  setTimeout(() => alertEl.remove(), 3000);
}
```

**Penjelasan:**
- `className = 'error'` â†’ Default value jika parameter tidak diisi
- Sekarang kita tidak perlu tulis `showAlert('message', 'error')` setiap kali
- Jika ingin success, bisa panggil: `showAlert('Success!', 'success')`

### Penyesuaian di CSS

Kita perlu ubah class name dari `alert-error` menjadi `error`:

```css
/* âœ¨ UBAH dari alert-error menjadi error */
.alert.error {
  background: red;
}

.alert.success {
  background: green;
}
```

---

<a name="membuat-display-search-results"></a>
## ğŸ–¼ï¸ Membuat Display Search Results

### Konsep: Copy dari Display Popular Movies

Kita sudah punya fungsi `displayPopularMovies()` yang menampilkan kartu film. Kita bisa **copy strukturnya** dan sesuaikan untuk search results!

```javascript
function displaySearchResults(results) {
  // ğŸ”„ Loop setiap hasil pencarian
  results.forEach((result) => {
    const div = document.createElement('div');
    div.classList.add('card');
    
    // ğŸ¨ Isi kartu dengan HTML
    div.innerHTML = `
      <a href="${global.search.type}-details.html?id=${result.id}">
        ${
          result.poster_path
            ? `<img
              src="https://image.tmdb.org/t/p/w500/${result.poster_path}"
              class="card-img-top"
              alt="${global.search.type === 'movie' ? result.title : result.name}"
            />`
            : `<img
              src="../images/no-image.jpg"
              class="card-img-top"
              alt="${global.search.type === 'movie' ? result.title : result.name}"
            />`
        }
      </a>
      <div class="card-body">
        <h5 class="card-title">
          ${global.search.type === 'movie' ? result.title : result.name}
        </h5>
        <p class="card-text">
          <small class="text-muted">Release: ${
            global.search.type === 'movie'
              ? result.release_date
              : result.first_air_date
          }</small>
        </p>
      </div>
    `;

    // â• Tambahkan ke DOM
    document.querySelector('#search-results').appendChild(div);
  });
}
```

### Memanggil displaySearchResults()

```javascript
async function search() {
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);

  global.search.type = urlParams.get('type');
  global.search.term = urlParams.get('search-term');

  if (global.search.term !== '' && global.search.term !== null) {
    const { results, total_pages, page } = await searchAPIData();

    if (results.length === 0) {
      showAlert('No results found');
      return;
    }

    // âœ¨ PANGGIL fungsi display
    displaySearchResults(results);

    // ğŸ§¹ Clear input
    document.querySelector('#search-term').value = '';
  } else {
    showAlert('Please enter a search term');
  }
}
```

---

<a name="menangani-movie-vs-tv"></a>
## ğŸ­ Menangani Movie vs TV Show

### Perbedaan Struktur Data

API mengembalikan struktur yang **berbeda** untuk movie dan TV show:

| Field | Movie | TV Show |
|-------|-------|---------|
| **Judul** | `title` | `name` |
| **Release** | `release_date` | `first_air_date` |
| **Detail URL** | `movie-details.html` | `tv-details.html` |

### Solusi: Gunakan Ternary Operator

```javascript
// ğŸ¯ DYNAMIC LINK berdasarkan type
`<a href="${global.search.type}-details.html?id=${result.id}">`

// Jika type = 'movie' â†’ movie-details.html
// Jika type = 'tv' â†’ tv-details.html
```

### Title: Movie vs TV Show

```javascript
// âœ¨ TERNARY untuk menentukan title atau name
${global.search.type === 'movie' ? result.title : result.name}

// ğŸ“ Penjelasan:
// Jika global.search.type === 'movie' 
//   â†’ Gunakan result.title
// Jika BUKAN 'movie' (berarti 'tv')
//   â†’ Gunakan result.name
```

### Release Date: Movie vs TV Show

```javascript
// âœ¨ TERNARY untuk release_date vs first_air_date
${
  global.search.type === 'movie'
    ? result.release_date
    : result.first_air_date
}
```

### Kode Lengkap dengan Penjelasan

```javascript
function displaySearchResults(results) {
  results.forEach((result) => { // ğŸ”„ Loop setiap hasil
    const div = document.createElement('div');
    div.classList.add('card');
    
    div.innerHTML = `
      <!-- ğŸ¯ LINK DINAMIS: movie-details atau tv-details -->
      <a href="${global.search.type}-details.html?id=${result.id}">
        ${
          result.poster_path
            ? `<img
              src="https://image.tmdb.org/t/p/w500/${result.poster_path}"
              class="card-img-top"
              alt="${
                // ğŸ­ ALT TEXT: title untuk movie, name untuk TV
                global.search.type === 'movie' ? result.title : result.name
              }"
            />`
            : `<img
              src="../images/no-image.jpg"
              class="card-img-top"
              alt="${
                global.search.type === 'movie' ? result.title : result.name
              }"
            />`
        }
      </a>
      <div class="card-body">
        <!-- ğŸ“ JUDUL: title atau name -->
        <h5 class="card-title">
          ${global.search.type === 'movie' ? result.title : result.name}
        </h5>
        <p class="card-text">
          <small class="text-muted">Release: ${
            // ğŸ“… RELEASE DATE: release_date atau first_air_date
            global.search.type === 'movie'
              ? result.release_date
              : result.first_air_date
          }</small>
        </p>
      </div>
    `;

    // â• Tambahkan ke #search-results
    document.querySelector('#search-results').appendChild(div);
  });
}
```

---

<a name="memperbaiki-bug-image"></a>
## ğŸ› Memperbaiki Bug Image Path

### Masalah yang Ditemukan

Saat testing, gambar tidak muncul! Browser console menunjukkan error:

```
Failed to load: https://image.tmdb.org/t/p/w500undefined
```

### Penyebab Bug

```javascript
// âŒ SALAH - Masih pakai 'movie' dari code lama
src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
```

Kita lupa mengubah `movie` menjadi `result`!

### Solusi: Ubah movie â†’ result

```javascript
// âœ… BENAR
src="https://image.tmdb.org/t/p/w500/${result.poster_path}"
//                              ^^^^^^
//                              Ubah dari 'movie' ke 'result'
```

### Bug Kedua: Missing Slash

Ada bug lain! Kita lupa menambahkan **slash** sebelum path:

```javascript
// âŒ SALAH
src="https://image.tmdb.org/t/p/w500${result.poster_path}"
// Menghasilkan: w500/abc123.jpg (SALAH!)

// âœ… BENAR - Tambahkan slash (/)
src="https://image.tmdb.org/t/p/w500/${result.poster_path}"
//                                  ^ Slash di sini!
// Menghasilkan: w500/abc123.jpg (BENAR!)
```

### Kode yang Sudah Diperbaiki

```javascript
div.innerHTML = `
  <a href="${global.search.type}-details.html?id=${result.id}">
    ${
      result.poster_path
        ? `<img
          src="https://image.tmdb.org/t/p/w500/${result.poster_path}"
          <!--                                â˜ï¸ FIXED: result + slash -->
          class="card-img-top"
          alt="${global.search.type === 'movie' ? result.title : result.name}"
        />`
        : `<img
          src="../images/no-image.jpg"
          class="card-img-top"
          alt="${global.search.type === 'movie' ? result.title : result.name}"
        />`
    }
  </a>
  ...
`;
```

---

<a name="testing-hasil-search"></a>
## ğŸ§ª Testing Hasil Search

### Test Case 1: Search Movie "Goodfellas"

**Input:**
- Type: Movie
- Search term: "goodfellas"

**Expected Result:**
- âœ… Menampilkan 2 hasil (Goodfellas film)
- âœ… Gambar poster muncul
- âœ… Judul: "Goodfellas"
- âœ… Release date muncul
- âœ… Link mengarah ke `movie-details.html?id=...`

**Hasil:**
```
âœ… PASS - Semua data tampil dengan benar!
```

---

### Test Case 2: Search Movie "Orphan"

**Input:**
- Type: Movie
- Search term: "orphan"

**Expected Result:**
- âœ… Menampilkan banyak hasil (20 per halaman)
- âœ… Semua gambar muncul
- âœ… Title dan release date benar

**Hasil:**
```
âœ… PASS - Menampilkan 20 hasil dengan pagination indicator
```

---

### Test Case 3: Search TV Show "The Sopranos"

**Input:**
- Type: TV Show
- Search term: "the sopranos"

**Expected Result:**
- âœ… Menampilkan 1 hasil
- âœ… Link mengarah ke `tv-details.html?id=...`
- âœ… Menggunakan `name` (bukan `title`)
- âœ… Menggunakan `first_air_date` (bukan `release_date`)

**Hasil:**
```
âœ… PASS - TV Show data tampil dengan struktur yang benar
```

---

### Test Case 4: Search Tidak Ditemukan

**Input:**
- Type: Movie
- Search term: "SWS" (film yang tidak ada)

**Expected Result:**
- âœ… Menampilkan alert: "No results found"
- âœ… Alert berwarna merah (error)
- âœ… Tidak ada kartu yang ditampilkan

**Hasil:**
```
âœ… PASS - Error handling berjalan dengan baik
```

---

### Test Case 5: Klik Detail dari Search Result

**Input:**
- Klik salah satu hasil pencarian

**Expected Result:**
- âœ… Redirect ke halaman detail
- âœ… URL benar (movie-details.html atau tv-details.html)
- âœ… Detail muncul dengan sempurna

**Hasil:**
```
âœ… PASS - Navigation ke detail page berfungsi
```

---

<a name="kesimpulan"></a>
## ğŸ‰ Kesimpulan

### Apa yang Sudah Kita Pelajari

| No | Topik | Status |
|----|-------|--------|
| 1 | Destructuring API Response | âœ… |
| 2 | Validasi Results (Empty Check) | âœ… |
| 3 | Dynamic Alert System | âœ… |
| 4 | Display Search Results | âœ… |
| 5 | Handle Movie vs TV Show | âœ… |
| 6 | Ternary Operator untuk Conditional | âœ… |
| 7 | Debugging Image Path | âœ… |
| 8 | Clear Input After Search | âœ… |

---

### Kode Final Lengkap

```javascript
// ============================================
// ğŸ” SEARCH FUNCTION - FINAL VERSION
// ============================================
async function search() {
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);

  global.search.type = urlParams.get('type');
  global.search.term = urlParams.get('search-term');

  if (global.search.term !== '' && global.search.term !== null) {
    // ğŸ“¦ Destructuring data dari API
    const { results, total_pages, page } = await searchAPIData();

    // âœ… Validasi: Cek apakah ada hasil
    if (results.length === 0) {
      showAlert('No results found');
      return;
    }

    // ğŸ–¼ï¸ Tampilkan hasil ke DOM
    displaySearchResults(results);

    // ğŸ§¹ Clear input search
    document.querySelector('#search-term').value = '';
  } else {
    showAlert('Please enter a search term');
  }
}

// ============================================
// ğŸ–¼ï¸ DISPLAY SEARCH RESULTS FUNCTION
// ============================================
function displaySearchResults(results) {
  results.forEach((result) => {
    const div = document.createElement('div');
    div.classList.add('card');
    
    div.innerHTML = `
      <a href="${global.search.type}-details.html?id=${result.id}">
        ${
          result.poster_path
            ? `<img
              src="https://image.tmdb.org/t/p/w500/${result.poster_path}"
              class="card-img-top"
              alt="${
                global.search.type === 'movie' ? result.title : result.name
              }"
            />`
            : `<img
              src="../images/no-image.jpg"
              class="card-img-top"
              alt="${
                global.search.type === 'movie' ? result.title : result.name
              }"
            />`
        }
      </a>
      <div class="card-body">
        <h5 class="card-title">
          ${global.search.type === 'movie' ? result.title : result.name}
        </h5>
        <p class="card-text">
          <small class="text-muted">Release: ${
            global.search.type === 'movie'
              ? result.release_date
              : result.first_air_date
          }</small>
        </p>
      </div>
    `;

    document.querySelector('#search-results').appendChild(div);
  });
}

// ============================================
// ğŸš¨ ALERT FUNCTION - WITH DEFAULT PARAMETER
// ============================================
function showAlert(message, className = 'error') {
  const alertEl = document.createElement('div');
  alertEl.classList.add('alert', className);
  alertEl.appendChild(document.createTextNode(message));
  document.querySelector('#alert').appendChild(alertEl);

  setTimeout(() => alertEl.remove(), 3000);
}
```

---

<a name="kode-lengkap"></a>
## ğŸ“ Kode Lengkap

### File: script.js (Versi Final)

```javascript
const global = {
  currentPage: window.location.pathname,
  search: {
    term: '',
    type: '',
    page: 1,
    totalPages: 1,
  },
  api: {
    apiKey: '',
    apiUrl: 'https://api.themoviedb.org/3/',
  },
};

// Display 20 most popular movies
async function displayPopularMovies() {
  const { results } = await fetchAPIData('movie/popular');

  results.forEach((movie) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="movie-details.html?id=${movie.id}">
            ${
              movie.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
              class="card-img-top"
              alt="${movie.title}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${movie.title}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${movie.title}</h5>
            <p class="card-text">
              <small class="text-muted">Release: ${movie.release_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-movies').appendChild(div);
  });
}

// Display 20 most popular tv shows
async function displayPopularShows() {
  const { results } = await fetchAPIData('tv/popular');

  results.forEach((show) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="tv-details.html?id=${show.id}">
            ${
              show.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${show.poster_path}"
              class="card-img-top"
              alt="${show.name}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${show.name}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${show.name}</h5>
            <p class="card-text">
              <small class="text-muted">Air Date: ${show.first_air_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-shows').appendChild(div);
  });
}

// Display Movie Details
async function displayMovieDetails() {
  const movieId = window.location.search.split('=')[1];

  const movie = await fetchAPIData(`movie/${movieId}`);

  // Overlay for background image
  displayBackgroundImage('movie', movie.backdrop_path);

  const div = document.createElement('div');

  div.innerHTML = `
  <div class="details-top">
  <div>
  ${
    movie.poster_path
      ? `<img
    src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
    class="card-img-top"
    alt="${movie.title}"
  />`
      : `<img
  src="../images/no-image.jpg"
  class="card-img-top"
  alt="${movie.title}"
/>`
  }
  </div>
  <div>
    <h2>${movie.title}</h2>
    <p>
      <i class="fas fa-star text-primary"></i>
      ${movie.vote_average.toFixed(1)} / 10
    </p>
    <p class="text-muted">Release Date: ${movie.release_date}</p>
    <p>
      ${movie.overview}
    </p>
    <h5>Genres</h5>
    <ul class="list-group">
      ${movie.genres.map((genre) => `<li>${genre.name}</li>`).join('')}
    </ul>
    <a href="${
      movie.homepage
    }" target="_blank" class="btn">Visit Movie Homepage</a>
  </div>
</div>
<div class="details-bottom">
  <h2>Movie Info</h2>
  <ul>
    <li><span class="text-secondary">Budget:</span> $${addCommasToNumber(
      movie.budget
    )}</li>
    <li><span class="text-secondary">Revenue:</span> $${addCommasToNumber(
      movie.revenue
    )}</li>
    <li><span class="text-secondary">Runtime:</span> ${
      movie.runtime
    } minutes</li>
    <li><span class="text-secondary">Status:</span> ${movie.status}</li>
  </ul>
  <h4>Production Companies</h4>
  <div class="list-group">
    ${movie.production_companies
      .map((company) => `<span>${company.name}</span>`)
      .join(', ')}
  </div>
</div>
  `;

  document.querySelector('#movie-details').appendChild(div);
}

// Display Show Details
async function displayShowDetails() {
  const showId = window.location.search.split('=')[1];

  const show = await fetchAPIData(`tv/${showId}`);

  // Overlay for background image
  displayBackgroundImage('tv', show.backdrop_path);

  const div = document.createElement('div');

  div.innerHTML = `
  <div class="details-top">
  <div>
  ${
    show.poster_path
      ? `<img
    src="https://image.tmdb.org/t/p/w500${show.poster_path}"
    class="card-img-top"
    alt="${show.name}"
  />`
      : `<img
  src="../images/no-image.jpg"
  class="card-img-top"
  alt="${show.name}"
/>`
  }
  </div>
  <div>
    <h2>${show.name}</h2>
    <p>
      <i class="fas fa-star text-primary"></i>
      ${show.vote_average.toFixed(1)} / 10
    </p>
    <p class="text-muted">Last Air Date: ${show.last_air_date}</p>
    <p>
      ${show.overview}
    </p>
    <h5>Genres</h5>
    <ul class="list-group">
      ${show.genres.map((genre) => `<li>${genre.name}</li>`).join('')}
    </ul>
    <a href="${
      show.homepage
    }" target="_blank" class="btn">Visit show Homepage</a>
  </div>
</div>
<div class="details-bottom">
  <h2>Show Info</h2>
  <ul>
    <li><span class="text-secondary">Number of Episodes:</span> ${
      show.number_of_episodes
    }</li>
    <li><span class="text-secondary">Last Episode To Air:</span> ${
      show.last_episode_to_air.name
    }</li>
    <li><span class="text-secondary">Status:</span> ${show.status}</li>
  </ul>
  <h4>Production Companies</h4>
  <div class="list-group">
    ${show.production_companies
      .map((company) => `<span>${company.name}</span>`)
      .join(', ')}
  </div>
</div>
  `;

  document.querySelector('#show-details').appendChild(div);
}

// Display Backdrop On Details Pages
function displayBackgroundImage(type, backgroundPath) {
  const overlayDiv = document.createElement('div');
  overlayDiv.style.backgroundImage = `url(https://image.tmdb.org/t/p/original/${backgroundPath})`;
  overlayDiv.style.backgroundSize = 'cover';
  overlayDiv.style.backgroundPosition = 'center';
  overlayDiv.style.backgroundRepeat = 'no-repeat';
  overlayDiv.style.height = '100vh';
  overlayDiv.style.width = '100vw';
  overlayDiv.style.position = 'absolute';
  overlayDiv.style.top = '0';
  overlayDiv.style.left = '0';
  overlayDiv.style.zIndex = '-1';
  overlayDiv.style.opacity = '0.1';

  if (type === 'movie') {
    document.querySelector('#movie-details').appendChild(overlayDiv);
  } else {
    document.querySelector('#show-details').appendChild(overlayDiv);
  }
}

// ============================================
// ğŸ” SEARCH MOVIES/SHOWS - UPDATED
// ============================================
async function search() {
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);

  global.search.type = urlParams.get('type');
  global.search.term = urlParams.get('search-term');

  if (global.search.term !== '' && global.search.term !== null) {
    // âœ¨ DITAMBAH: Destructuring results, total_pages, page
    const { results, total_pages, page } = await searchAPIData();

    // âœ¨ DITAMBAH: Validasi jika results kosong
    if (results.length === 0) {
      showAlert('No results found');
      return;
    }

    // âœ¨ DITAMBAH: Panggil fungsi displaySearchResults
    displaySearchResults(results);

    // âœ¨ DITAMBAH: Clear input setelah search
    document.querySelector('#search-term').value = '';
  } else {
    showAlert('Please enter a search term');
  }
}

// ============================================
// âœ¨ FUNGSI BARU: Display Search Results
// ============================================
function displaySearchResults(results) {
  results.forEach((result) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="${global.search.type}-details.html?id=${result.id}">
            ${
              result.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500/${result.poster_path}"
              class="card-img-top"
              alt="${
                global.search.type === 'movie' ? result.title : result.name
              }"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
             alt="${
               global.search.type === 'movie' ? result.title : result.name
             }"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${
              global.search.type === 'movie' ? result.title : result.name
            }</h5>
            <p class="card-text">
              <small class="text-muted">Release: ${
                global.search.type === 'movie'
                  ? result.release_date
                  : result.first_air_date
              }</small>
            </p>
          </div>
        `;

    document.querySelector('#search-results').appendChild(div);
  });
}

// Display Slider Movies
async function displaySlider() {
  const { results } = await fetchAPIData('movie/now_playing');

  results.forEach((movie) => {
    const div = document.createElement('div');
    div.classList.add('swiper-slide');

    div.innerHTML = `
      <a href="movie-details.html?id=${movie.id}">
        <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}" />
      </a>
      <h4 class="swiper-rating">
        <i class="fas fa-star text-secondary"></i> ${movie.vote_average} / 10
      </h4>
    `;

    document.querySelector('.swiper-wrapper').appendChild(div);

    initSwiper();
  });
}

function initSwiper() {
  const swiper = new Swiper('.swiper', {
    slidesPerView: 1,
    spaceBetween: 30,
    freeMode: true,
    loop: true,
    autoplay: {
      delay: 4000,
      disableOnInteraction: false,
    },
    breakpoints: {
      500: {
        slidesPerView: 2,
      },
      700: {
        slidesPerView: 3,
      },
      1200: {
        slidesPerView: 4,
      },
    },
  });
}

// Fetch data from TMDB API
async function fetchAPIData(endpoint) {
  const API_KEY = global.api.apiKey;
  const API_URL = global.api.apiUrl;

  showSpinner();

  const response = await fetch(
    `${API_URL}${endpoint}?api_key=${API_KEY}&language=en-US`
  );

  const data = await response.json();

  hideSpinner();

  return data;
}

// Make Request To Search
async function searchAPIData() {
  const API_KEY = global.api.apiKey;
  const API_URL = global.api.apiUrl;

  showSpinner();

  const response = await fetch(
    `${API_URL}search/${global.search.type}?api_key=${API_KEY}&language=en-US&query=${global.search.term}`
  );

  const data = await response.json();

  hideSpinner();

  return data;
}

// ============================================
// ğŸ”„ DIUBAH: Show Alert - Tambah default parameter
// ============================================
function showAlert(message, className = 'error') { // âœ¨ DITAMBAH: default parameter 'error'
  const alertEl = document.createElement('div');
  alertEl.classList.add('alert', className);
  alertEl.appendChild(document.createTextNode(message));
  document.querySelector('#alert').appendChild(alertEl);

  setTimeout(() => alertEl.remove(), 3000);
}

function showSpinner() {
  document.querySelector('.spinner').classList.add('show');
}

function hideSpinner() {
  document.querySelector('.spinner').classList.remove('show');
}

// Highlight active link
function highlightActiveLink() {
  const links = document.querySelectorAll('.nav-link');
  links.forEach((link) => {
    if (link.getAttribute('href') === global.currentPage) {
      link.classList.add('active');
    }
  });
}

function addCommasToNumber(number) {
  return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

// Init App
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displaySlider();
      displayPopularMovies();
      break;
    case '/shows.html':
      displayPopularShows();
      break;
    case '/movie-details.html':
      displayMovieDetails();
      break;
    case '/tv-details.html':
      displayShowDetails();
      break;
    case '/search.html':
      search();
      break;
  }

  highlightActiveLink();
}

document.addEventListener('DOMContentLoaded', init);
```

---

### Yang Masih Perlu Ditambahkan

ğŸ”œ **Next Steps:**
- [ ] Pagination (untuk navigasi halaman)
- [ ] Loading spinner saat search
- [ ] Sort/filter hasil pencarian
- [ ] Advanced search options

---

### Tips Debugging

ğŸ’¡ **Jika gambar tidak muncul:**
1. Cek console browser (F12)
2. Pastikan URL image benar
3. Cek apakah `result.poster_path` ada (bukan undefined)
4. Pastikan ada **slash** sebelum path: `w500/${path}`

ğŸ’¡ **Jika data tidak muncul:**
1. `console.log(results)` untuk lihat struktur data
2. Cek apakah `results.length > 0`
3. Pastikan selector `#search-results` ada di HTML

ğŸ’¡ **Jika link tidak bekerja:**
1. Cek `global.search.type` sudah terisi
2. Pastikan URL format benar: `${type}-details.html?id=${id}`

---

### ğŸ“š Resource Tambahan

- [TMDB API Documentation](https://developers.themoviedb.org/3)
- [MDN: Destructuring Assignment](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)
- [MDN: Ternary Operator](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Conditional_Operator)
- [MDN: Template Literals](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals)

---

**ğŸ“ Selamat! Kamu sudah berhasil membuat fitur search yang dynamic dan bisa handle movie + TV show!** ğŸš€

*Dokumentasi ini dibuat untuk pembelajaran pribadi. Happy coding! ğŸ’»âœ¨*
