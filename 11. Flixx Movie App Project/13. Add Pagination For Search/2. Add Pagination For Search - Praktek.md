# ğŸ¬ Tutorial Pagination untuk Movie Search App

> **Dokumentasi Pribadi** - Panduan langkah demi langkah untuk pemula dalam membuat fitur pagination pada aplikasi pencarian film

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Persiapan Awal](#persiapan-awal)
- [Langkah 1: Menambahkan Property di Global State](#langkah-1)
- [Langkah 2: Menyimpan Data dari API](#langkah-2)
- [Langkah 3: Menampilkan Heading Hasil Pencarian](#langkah-3)
- [Langkah 4: Membuat Fungsi Display Pagination](#langkah-4)
- [Langkah 5: Memanggil Fungsi Pagination](#langkah-5)
- [Langkah 6: Disable Button Prev & Next](#langkah-6)
- [Langkah 7: Event Listener untuk Next Button](#langkah-7)
- [Langkah 8: Menambahkan Page ke API Request](#langkah-8)
- [Langkah 9: Clear Previous Results](#langkah-9)
- [Langkah 10: Event Listener untuk Prev Button](#langkah-10)
- [Kode Lengkap](#kode-lengkap)
- [Testing dan Penyelesaian](#testing)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Dalam tutorial ini, kita akan belajar membuat **pagination** (halaman) untuk hasil pencarian film dan TV show. Pagination berguna ketika kita memiliki banyak hasil pencarian, misalnya 162 hasil, kita tidak ingin menampilkan semuanya sekaligus, melainkan 20 hasil per halaman.

**Apa yang akan kita pelajari:**
- âœ… Menampilkan informasi "20 of 162 results for orphan"
- âœ… Membuat tombol Previous dan Next
- âœ… Menonaktifkan tombol ketika di halaman pertama/terakhir
- âœ… Mengambil data dari halaman yang berbeda

---

<a name="persiapan-awal"></a>
## ğŸ› ï¸ Persiapan Awal

Pastikan kamu sudah memiliki:
- âœ… File `search.html` dengan elemen `#search-results-heading` dan `#pagination`
- âœ… File `script.js` dengan fungsi `search()` dan `searchAPIData()`
- âœ… API key dari The Movie Database (TMDB)

---

<a name="langkah-1"></a>
## ğŸ“ Langkah 1: Menambahkan Property di Global State

Kita perlu menambahkan property `totalResults` di global state untuk menyimpan total hasil pencarian.

**ğŸ“‚ File: `script.js`**

Cari bagian **global state** di awal file:

```javascript
const global = {
  currentPage: window.location.pathname,
  search: {
    term: '',
    type: '',
    page: 1,
    totalPages: 1,
    totalResults: 0, // âœ¨ TAMBAHKAN BARIS INI
  },
  api: {
    apiKey: '',
    apiUrl: 'https://api.themoviedb.org/3/',
  },
};
```

**ğŸ¯ Penjelasan:**
- `totalResults: 0` â†’ Menyimpan total hasil dari API (misalnya 162 hasil)
- Kita set default ke 0

---

<a name="langkah-2"></a>
## ğŸ’¾ Langkah 2: Menyimpan Data dari API

Setelah kita mendapatkan hasil dari API, kita perlu menyimpan informasi page, totalPages, dan totalResults ke global state.

**ğŸ“‚ File: `script.js`**

Cari fungsi **`search()`** dan modifikasi seperti ini:

```javascript
// Search Movies/Shows
async function search() {
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);

  global.search.type = urlParams.get('type');
  global.search.term = urlParams.get('search-term');

  if (global.search.term !== '' && global.search.term !== null) {
    // âœ¨ UBAH BARIS INI - Tambahkan total_pages, page, total_results
    const { results, total_pages, page, total_results } = await searchAPIData();

    // âœ¨ TAMBAHKAN 3 BARIS INI
    global.search.page = page;
    global.search.totalPages = total_pages;
    global.search.totalResults = total_results;

    if (results.length === 0) {
      showAlert('No results found');
      return;
    }

    displaySearchResults(results);

    document.querySelector('#search-term').value = '';
  } else {
    showAlert('Please enter a search term');
  }
}
```

**ğŸ¯ Penjelasan:**
- `total_pages` â†’ Total halaman yang tersedia
- `page` â†’ Halaman saat ini
- `total_results` â†’ Total hasil pencarian
- Kita destructure dari hasil API dan simpan ke `global.search`

---

<a name="langkah-3"></a>
## ğŸ¨ Langkah 3: Menampilkan Heading Hasil Pencarian

Sekarang kita akan menampilkan heading seperti "20 of 162 results for orphan".

**ğŸ“‚ File: `script.js`**

Cari fungsi **`displaySearchResults()`** dan tambahkan kode di awal fungsi (sebelum forEach):

```javascript
function displaySearchResults(results) {
  // âœ¨ TAMBAHKAN BAGIAN INI - Clear previous results
  document.querySelector('#search-results').innerHTML = '';
  document.querySelector('#search-results-heading').innerHTML = '';
  document.querySelector('#pagination').innerHTML = '';

  // âœ¨ TAMBAHKAN BAGIAN INI - Tampilkan heading
  document.querySelector('#search-results-heading').innerHTML = `
    <h2>${results.length} of ${global.search.totalResults} Results for ${global.search.term}</h2>
  `;

  // Kode forEach yang sudah ada sebelumnya...
  results.forEach((result) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="${global.search.type}-details.html?id=${result.id}">
            ${
              result.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${result.poster_path}"
              class="card-img-top"
              alt="${
                global.search.type === 'movie' ? result.title : result.name
              }"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
             alt="${
               global.search.type === 'movie' ? result.title : result.name
             }"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${
              global.search.type === 'movie' ? result.title : result.name
            }</h5>
            <p class="card-text">
              <small class="text-muted">Release: ${
                global.search.type === 'movie'
                  ? result.release_date
                  : result.first_air_date
              }</small>
            </p>
          </div>
        `;

    document.querySelector('#search-results').appendChild(div);
  });

  // âœ¨ TAMBAHKAN DI AKHIR FUNGSI - Panggil displayPagination
  displayPagination();
}
```

**ğŸ¯ Penjelasan:**
- `results.length` â†’ Jumlah hasil di halaman saat ini (selalu 20)
- `global.search.totalResults` â†’ Total semua hasil
- `global.search.term` â†’ Kata kunci pencarian

---

<a name="langkah-4"></a>
## ğŸ”§ Langkah 4: Membuat Fungsi Display Pagination

Sekarang kita buat fungsi baru untuk menampilkan tombol pagination.

**ğŸ“‚ File: `script.js`**

Tambahkan fungsi baru **setelah** fungsi `displaySearchResults()`:

```javascript
// âœ¨ TAMBAHKAN FUNGSI BARU INI
// Create & Display Pagination For Search
function displayPagination() {
  const div = document.createElement('div');
  div.classList.add('pagination');
  div.innerHTML = `
    <button class="btn btn-primary" id="prev">Prev</button>
    <button class="btn btn-primary" id="next">Next</button>
    <div class="page-counter">Page ${global.search.page} of ${global.search.totalPages}</div>
  `;

  document.querySelector('#pagination').appendChild(div);
}
```

**ğŸ¯ Penjelasan:**
- Membuat element `div` dengan class `pagination`
- Menambahkan 2 tombol: **Prev** dan **Next**
- Menampilkan informasi halaman: "Page 1 of 9"

---

<a name="langkah-5"></a>
## ğŸ“ Langkah 5: Memanggil Fungsi Pagination

Kita sudah membuat fungsi `displayPagination()`, sekarang kita harus memanggilnya.

**ğŸ“‚ File: `script.js`**

Fungsi ini sudah dipanggil di akhir `displaySearchResults()` pada **Langkah 3**:

```javascript
function displaySearchResults(results) {
  // ... kode lainnya ...
  
  displayPagination(); // âœ… Sudah ditambahkan di langkah 3
}
```

**ğŸ¯ Test Pertama:**
Coba refresh halaman search, kamu seharusnya sudah melihat:
- âœ… Heading "20 of 162 results for orphan"
- âœ… Tombol Prev dan Next
- âœ… Text "Page 1 of 9"

---

<a name="langkah-6"></a>
## ğŸš« Langkah 6: Disable Button Prev & Next

Kita perlu disable tombol Prev ketika di halaman pertama, dan disable tombol Next ketika di halaman terakhir.

**ğŸ“‚ File: `script.js`**

Modifikasi fungsi **`displayPagination()`**:

```javascript
// Create & Display Pagination For Search
function displayPagination() {
  const div = document.createElement('div');
  div.classList.add('pagination');
  div.innerHTML = `
    <button class="btn btn-primary" id="prev">Prev</button>
    <button class="btn btn-primary" id="next">Next</button>
    <div class="page-counter">Page ${global.search.page} of ${global.search.totalPages}</div>
  `;

  document.querySelector('#pagination').appendChild(div);

  // âœ¨ TAMBAHKAN BAGIAN INI - Disable prev button if on first page
  if (global.search.page === 1) {
    document.querySelector('#prev').disabled = true;
  }

  // âœ¨ TAMBAHKAN BAGIAN INI - Disable next button if on last page
  if (global.search.page === global.search.totalPages) {
    document.querySelector('#next').disabled = true;
  }
}
```

**ğŸ¯ Penjelasan:**
- Jika `page === 1` â†’ Disable tombol Prev (abu-abu)
- Jika `page === totalPages` â†’ Disable tombol Next (abu-abu)

---

<a name="langkah-7"></a>
## â–¶ï¸ Langkah 7: Event Listener untuk Next Button

Sekarang kita buat tombol Next berfungsi untuk pindah ke halaman berikutnya.

**ğŸ“‚ File: `script.js`**

Tambahkan di akhir fungsi **`displayPagination()`**:

```javascript
// Create & Display Pagination For Search
function displayPagination() {
  const div = document.createElement('div');
  div.classList.add('pagination');
  div.innerHTML = `
    <button class="btn btn-primary" id="prev">Prev</button>
    <button class="btn btn-primary" id="next">Next</button>
    <div class="page-counter">Page ${global.search.page} of ${global.search.totalPages}</div>
  `;

  document.querySelector('#pagination').appendChild(div);

  // Disable prev button if on first page
  if (global.search.page === 1) {
    document.querySelector('#prev').disabled = true;
  }

  // Disable next button if on last page
  if (global.search.page === global.search.totalPages) {
    document.querySelector('#next').disabled = true;
  }

  // âœ¨ TAMBAHKAN BAGIAN INI - Next page
  document.querySelector('#next').addEventListener('click', async () => {
    global.search.page++; // Increment halaman
    const { results, total_pages } = await searchAPIData(); // Request API lagi
    displaySearchResults(results); // Tampilkan hasil baru
  });
}
```

**ğŸ¯ Penjelasan:**
- `global.search.page++` â†’ Tambah 1 ke nomor halaman
- `await searchAPIData()` â†’ Ambil data dari API dengan halaman baru
- `displaySearchResults(results)` â†’ Tampilkan hasil di halaman baru

---

<a name="langkah-8"></a>
## ğŸŒ Langkah 8: Menambahkan Page ke API Request

Agar API tahu kita minta halaman berapa, kita perlu menambahkan parameter `page` ke URL API.

**ğŸ“‚ File: `script.js`**

Cari fungsi **`searchAPIData()`** dan modifikasi:

```javascript
// Make Request To Search
async function searchAPIData() {
  const API_KEY = global.api.apiKey;
  const API_URL = global.api.apiUrl;

  showSpinner();

  // âœ¨ UBAH BARIS INI - Tambahkan &page=${global.search.page}
  const response = await fetch(
    `${API_URL}search/${global.search.type}?api_key=${API_KEY}&language=en-US&query=${global.search.term}&page=${global.search.page}`
  );

  const data = await response.json();

  hideSpinner();

  return data;
}
```

**ğŸ¯ Penjelasan:**
- `&page=${global.search.page}` â†’ Memberitahu API halaman berapa yang kita minta
- Tanpa ini, API akan selalu return halaman 1

---

<a name="langkah-9"></a>
## ğŸ§¹ Langkah 9: Clear Previous Results

Ini sudah kita lakukan di **Langkah 3**. Pastikan di awal fungsi `displaySearchResults()` ada:

```javascript
function displaySearchResults(results) {
  // âœ… Clear previous results (sudah ditambahkan di langkah 3)
  document.querySelector('#search-results').innerHTML = '';
  document.querySelector('#search-results-heading').innerHTML = '';
  document.querySelector('#pagination').innerHTML = '';

  // ... kode lainnya ...
}
```

**ğŸ¯ Penjelasan:**
- Menghapus hasil sebelumnya agar tidak menumpuk
- Menghapus heading lama
- Menghapus pagination lama

**ğŸ¯ Test Kedua:**
Coba klik tombol Next, seharusnya:
- âœ… Hasil berubah ke halaman 2
- âœ… Heading berubah "Page 2 of 9"
- âœ… Tidak ada hasil yang menumpuk

---

<a name="langkah-10"></a>
## â—€ï¸ Langkah 10: Event Listener untuk Prev Button

Sekarang kita buat tombol Prev berfungsi untuk kembali ke halaman sebelumnya.

**ğŸ“‚ File: `script.js`**

Tambahkan di akhir fungsi **`displayPagination()`** (setelah event listener Next):

```javascript
// Create & Display Pagination For Search
function displayPagination() {
  const div = document.createElement('div');
  div.classList.add('pagination');
  div.innerHTML = `
    <button class="btn btn-primary" id="prev">Prev</button>
    <button class="btn btn-primary" id="next">Next</button>
    <div class="page-counter">Page ${global.search.page} of ${global.search.totalPages}</div>
  `;

  document.querySelector('#pagination').appendChild(div);

  // Disable prev button if on first page
  if (global.search.page === 1) {
    document.querySelector('#prev').disabled = true;
  }

  // Disable next button if on last page
  if (global.search.page === global.search.totalPages) {
    document.querySelector('#next').disabled = true;
  }

  // Next page
  document.querySelector('#next').addEventListener('click', async () => {
    global.search.page++;
    const { results, total_pages } = await searchAPIData();
    displaySearchResults(results);
  });

  // âœ¨ TAMBAHKAN BAGIAN INI - Prev page
  document.querySelector('#prev').addEventListener('click', async () => {
    global.search.page--; // Kurangi 1 dari halaman
    const { results, total_pages } = await searchAPIData(); // Request API lagi
    displaySearchResults(results); // Tampilkan hasil baru
  });
}
```

**ğŸ¯ Penjelasan:**
- `global.search.page--` â†’ Kurangi 1 dari nomor halaman
- Sisanya sama seperti tombol Next

---
<a name="kode-lengkap"></a>
## ğŸ“¦ Kode Lengkap

### File: script.js (Versi Final)

```javascript
const global = {
  currentPage: window.location.pathname,
  search: {
    term: '',
    type: '',
    page: 1,
    totalPages: 1,
    totalResults: 0, // ğŸ†• TAMBAHAN BARU untuk pagination
  },
  api: {
    // Register your key at https://www.themoviedb.org/settings/api and enter here
    // Only use this for development or very small projects. You should store your key and make requests from a server
    apiKey: '3fd2be6f0c70a2a598f084ddfb75487c',
    apiUrl: 'https://api.themoviedb.org/3/',
  },
};

// Display 20 most popular movies
async function displayPopularMovies() {
  const { results } = await fetchAPIData('movie/popular');

  results.forEach((movie) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="movie-details.html?id=${movie.id}">
            ${
              movie.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
              class="card-img-top"
              alt="${movie.title}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${movie.title}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${movie.title}</h5>
            <p class="card-text">
              <small class="text-muted">Release: ${movie.release_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-movies').appendChild(div);
  });
}

// Display 20 most popular tv shows
async function displayPopularShows() {
  const { results } = await fetchAPIData('tv/popular');

  results.forEach((show) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="tv-details.html?id=${show.id}">
            ${
              show.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${show.poster_path}"
              class="card-img-top"
              alt="${show.name}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${show.name}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${show.name}</h5>
            <p class="card-text">
              <small class="text-muted">Air Date: ${show.first_air_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-shows').appendChild(div);
  });
}

// Display Movie Details
async function displayMovieDetails() {
  const movieId = window.location.search.split('=')[1];

  const movie = await fetchAPIData(`movie/${movieId}`);

  // Overlay for background image
  displayBackgroundImage('movie', movie.backdrop_path);

  const div = document.createElement('div');

  div.innerHTML = `
  <div class="details-top">
  <div>
  ${
    movie.poster_path
      ? `<img
    src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
    class="card-img-top"
    alt="${movie.title}"
  />`
      : `<img
  src="../images/no-image.jpg"
  class="card-img-top"
  alt="${movie.title}"
/>`
  }
  </div>
  <div>
    <h2>${movie.title}</h2>
    <p>
      <i class="fas fa-star text-primary"></i>
      ${movie.vote_average.toFixed(1)} / 10
    </p>
    <p class="text-muted">Release Date: ${movie.release_date}</p>
    <p>
      ${movie.overview}
    </p>
    <h5>Genres</h5>
    <ul class="list-group">
      ${movie.genres.map((genre) => `<li>${genre.name}</li>`).join('')}
    </ul>
    <a href="${
      movie.homepage
    }" target="_blank" class="btn">Visit Movie Homepage</a>
  </div>
</div>
<div class="details-bottom">
  <h2>Movie Info</h2>
  <ul>
    <li><span class="text-secondary">Budget:</span> $${addCommasToNumber(
      movie.budget
    )}</li>
    <li><span class="text-secondary">Revenue:</span> $${addCommasToNumber(
      movie.revenue
    )}</li>
    <li><span class="text-secondary">Runtime:</span> ${
      movie.runtime
    } minutes</li>
    <li><span class="text-secondary">Status:</span> ${movie.status}</li>
  </ul>
  <h4>Production Companies</h4>
  <div class="list-group">
    ${movie.production_companies
      .map((company) => `<span>${company.name}</span>`)
      .join(', ')}
  </div>
</div>
  `;

  document.querySelector('#movie-details').appendChild(div);
}

// Display Show Details
async function displayShowDetails() {
  const showId = window.location.search.split('=')[1];

  const show = await fetchAPIData(`tv/${showId}`);

  // Overlay for background image
  displayBackgroundImage('tv', show.backdrop_path);

  const div = document.createElement('div');

  div.innerHTML = `
  <div class="details-top">
  <div>
  ${
    show.poster_path
      ? `<img
    src="https://image.tmdb.org/t/p/w500${show.poster_path}"
    class="card-img-top"
    alt="${show.name}"
  />`
      : `<img
  src="../images/no-image.jpg"
  class="card-img-top"
  alt="${show.name}"
/>`
  }
  </div>
  <div>
    <h2>${show.name}</h2>
    <p>
      <i class="fas fa-star text-primary"></i>
      ${show.vote_average.toFixed(1)} / 10
    </p>
    <p class="text-muted">Last Air Date: ${show.last_air_date}</p>
    <p>
      ${show.overview}
    </p>
    <h5>Genres</h5>
    <ul class="list-group">
      ${show.genres.map((genre) => `<li>${genre.name}</li>`).join('')}
    </ul>
    <a href="${
      show.homepage
    }" target="_blank" class="btn">Visit show Homepage</a>
  </div>
</div>
<div class="details-bottom">
  <h2>Show Info</h2>
  <ul>
    <li><span class="text-secondary">Number of Episodes:</span> ${
      show.number_of_episodes
    }</li>
    <li><span class="text-secondary">Last Episode To Air:</span> ${
      show.last_episode_to_air.name
    }</li>
    <li><span class="text-secondary">Status:</span> ${show.status}</li>
  </ul>
  <h4>Production Companies</h4>
  <div class="list-group">
    ${show.production_companies
      .map((company) => `<span>${company.name}</span>`)
      .join(', ')}
  </div>
</div>
  `;

  document.querySelector('#show-details').appendChild(div);
}

// Display Backdrop On Details Pages
function displayBackgroundImage(type, backgroundPath) {
  const overlayDiv = document.createElement('div');
  overlayDiv.style.backgroundImage = `url(https://image.tmdb.org/t/p/original/${backgroundPath})`;
  overlayDiv.style.backgroundSize = 'cover';
  overlayDiv.style.backgroundPosition = 'center';
  overlayDiv.style.backgroundRepeat = 'no-repeat';
  overlayDiv.style.height = '100vh';
  overlayDiv.style.width = '100vw';
  overlayDiv.style.position = 'absolute';
  overlayDiv.style.top = '0';
  overlayDiv.style.left = '0';
  overlayDiv.style.zIndex = '-1';
  overlayDiv.style.opacity = '0.1';

  if (type === 'movie') {
    document.querySelector('#movie-details').appendChild(overlayDiv);
  } else {
    document.querySelector('#show-details').appendChild(overlayDiv);
  }
}

// Search Movies/Shows
async function search() {
  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);

  global.search.type = urlParams.get('type');
  global.search.term = urlParams.get('search-term');

  if (global.search.term !== '' && global.search.term !== null) {
    // ğŸ”„ UPDATE: Tambahkan total_results untuk pagination
    const { results, total_pages, page, total_results } = await searchAPIData();

    // ğŸ†• SIMPAN DATA PAGINATION ke global state
    global.search.page = page;
    global.search.totalPages = total_pages;
    global.search.totalResults = total_results;

    if (results.length === 0) {
      showAlert('No results found');
      return;
    }

    displaySearchResults(results);

    document.querySelector('#search-term').value = '';
  } else {
    showAlert('Please enter a search term');
  }
}

function displaySearchResults(results) {
  // ğŸ§¹ CLEAR PREVIOUS RESULTS - Tambahan baru untuk mencegah duplikasi
  document.querySelector('#search-results').innerHTML = '';
  document.querySelector('#search-results-heading').innerHTML = '';
  document.querySelector('#pagination').innerHTML = '';

  results.forEach((result) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="${global.search.type}-details.html?id=${result.id}">
            ${
              result.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${result.poster_path}"
              class="card-img-top"
              alt="${
                global.search.type === 'movie' ? result.title : result.name
              }"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
             alt="${
               global.search.type === 'movie' ? result.title : result.name
             }"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${
              global.search.type === 'movie' ? result.title : result.name
            }</h5>
            <p class="card-text">
              <small class="text-muted">Release: ${
                global.search.type === 'movie'
                  ? result.release_date
                  : result.first_air_date
              }</small>
            </p>
          </div>
        `;

    // ğŸ†• HEADING HASIL PENCARIAN - Menampilkan "20 of 162 Results for orphan"
    document.querySelector('#search-results-heading').innerHTML = `
      <h2>${results.length} of ${global.search.totalResults} Results for ${global.search.term}</h2>
    `;

    document.querySelector('#search-results').appendChild(div);
  });

  // ğŸ†• PANGGIL FUNGSI PAGINATION
  displayPagination();
}

// ğŸ†• CREATE & DISPLAY PAGINATION FOR SEARCH - Fungsi baru!
function displayPagination() {
  const div = document.createElement('div');
  div.classList.add('pagination');
  div.innerHTML = `
    <button class="btn btn-primary" id="prev">Prev</button>
    <button class="btn btn-primary" id="next">Next</button>
    <div class="page-counter">Page ${global.search.page} of ${global.search.totalPages}</div>
  `;

  document.querySelector('#pagination').appendChild(div);

  // ğŸš« Disable prev button if on first page
  if (global.search.page === 1) {
    document.querySelector('#prev').disabled = true;
  }

  // ğŸš« Disable next button if on last page
  if (global.search.page === global.search.totalPages) {
    document.querySelector('#next').disabled = true;
  }

  // â­ï¸ Next page - Event listener untuk tombol Next
  document.querySelector('#next').addEventListener('click', async () => {
    global.search.page++; // Increment halaman
    const { results, total_pages } = await searchAPIData();
    displaySearchResults(results);
  });

  // â®ï¸ Prev page - Event listener untuk tombol Previous
  document.querySelector('#prev').addEventListener('click', async () => {
    global.search.page--; // Decrement halaman
    const { results, total_pages } = await searchAPIData();
    displaySearchResults(results);
  });
}

// Display Slider Movies
async function displaySlider() {
  const { results } = await fetchAPIData('movie/now_playing');

  results.forEach((movie) => {
    const div = document.createElement('div');
    div.classList.add('swiper-slide');

    div.innerHTML = `
      <a href="movie-details.html?id=${movie.id}">
        <img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" alt="${movie.title}" />
      </a>
      <h4 class="swiper-rating">
        <i class="fas fa-star text-secondary"></i> ${movie.vote_average} / 10
      </h4>
    `;

    document.querySelector('.swiper-wrapper').appendChild(div);

    initSwiper();
  });
}

function initSwiper() {
  const swiper = new Swiper('.swiper', {
    slidesPerView: 1,
    spaceBetween: 30,
    freeMode: true,
    loop: true,
    autoplay: {
      delay: 4000,
      disableOnInteraction: false,
    },
    breakpoints: {
      500: {
        slidesPerView: 2,
      },
      700: {
        slidesPerView: 3,
      },
      1200: {
        slidesPerView: 4,
      },
    },
  });
}

// Fetch data from TMDB API
async function fetchAPIData(endpoint) {
  const API_KEY = global.api.apiKey;
  const API_URL = global.api.apiUrl;

  showSpinner();

  const response = await fetch(
    `${API_URL}${endpoint}?api_key=${API_KEY}&language=en-US`
  );

  const data = await response.json();

  hideSpinner();

  return data;
}

// Make Request To Search
async function searchAPIData() {
  const API_KEY = global.api.apiKey;
  const API_URL = global.api.apiUrl;

  showSpinner();

  // ğŸ”„ UPDATE: Tambahkan &page=${global.search.page} untuk pagination
  const response = await fetch(
    `${API_URL}search/${global.search.type}?api_key=${API_KEY}&language=en-US&query=${global.search.term}&page=${global.search.page}`
  );

  const data = await response.json();

  hideSpinner();

  return data;
}

function showSpinner() {
  document.querySelector('.spinner').classList.add('show');
}

function hideSpinner() {
  document.querySelector('.spinner').classList.remove('show');
}

// Highlight active link
function highlightActiveLink() {
  const links = document.querySelectorAll('.nav-link');
  links.forEach((link) => {
    if (link.getAttribute('href') === global.currentPage) {
      link.classList.add('active');
    }
  });
}

// Show Alert
function showAlert(message, className = 'error') {
  const alertEl = document.createElement('div');
  alertEl.classList.add('alert', className);
  alertEl.appendChild(document.createTextNode(message));
  document.querySelector('#alert').appendChild(alertEl);

  setTimeout(() => alertEl.remove(), 3000);
}

function addCommasToNumber(number) {
  return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

// Init App
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displaySlider();
      displayPopularMovies();
      break;
    case '/shows.html':
      displayPopularShows();
      break;
    case '/movie-details.html':
      displayMovieDetails();
      break;
    case '/tv-details.html':
      displayShowDetails();
      break;
    case '/search.html':
      search();
      break;
  }

  highlightActiveLink();
}

document.addEventListener('DOMContentLoaded', init);
```
---

<a name="testing"></a>
## ğŸ§ª Testing dan Penyelesaian

### âœ… Checklist Testing:

1. **Test Halaman Pertama:**
   - [ ] Tombol Prev disabled (abu-abu)
   - [ ] Heading menampilkan "20 of X results for ..."
   - [ ] Tampil "Page 1 of X"

2. **Test Tombol Next:**
   - [ ] Klik Next â†’ pindah ke halaman 2
   - [ ] Hasil berubah (tidak menumpuk)
   - [ ] Heading berubah ke "Page 2 of X"
   - [ ] Tombol Prev sudah bisa diklik

3. **Test Tombol Prev:**
   - [ ] Dari halaman 2, klik Prev â†’ kembali ke halaman 1
   - [ ] Tombol Prev disabled lagi

4. **Test Halaman Terakhir:**
   - [ ] Klik Next sampai halaman terakhir
   - [ ] Tombol Next disabled (abu-abu)

---

## ğŸ‰ Selesai!

Selamat! Kamu sudah berhasil membuat fitur pagination lengkap. Fitur ini sangat penting untuk aplikasi yang menampilkan banyak data.

### ğŸ“š Apa yang sudah kita pelajari:

- âœ… Destructuring data dari API
- âœ… Menyimpan state di global object
- âœ… Membuat dynamic DOM elements
- âœ… Event listener dengan async/await
- âœ… Conditional rendering (disable button)
- âœ… Query parameters di URL API

### ğŸš€ Ide Pengembangan Selanjutnya:

1. **Tambahkan fitur "Go to Page"** â†’ User bisa langsung ke halaman tertentu
2. **Tampilkan cast & crew** â†’ Seperti IMDb
3. **Filter berdasarkan genre** â†’ Tambahkan dropdown filter
4. **Sort by rating/date** â†’ Urutkan hasil
5. **Infinite scroll** â†’ Auto load saat scroll ke bawah

---

## ğŸ“ Catatan Penting:

> âš ï¸ **Jangan lupa ganti API Key!**  
> Ganti `apiKey: ''` dengan API key kamu dari [The Movie Database](https://www.themoviedb.org/settings/api)

> ğŸ’¡ **Tips:**  
> Jika ada error, cek Console (F12) untuk melihat pesan error

> ğŸ¯ **Best Practice:**  
> Selalu clear/reset state sebelum menampilkan data baru untuk menghindari bug

---

**Happy Coding! ğŸš€**
