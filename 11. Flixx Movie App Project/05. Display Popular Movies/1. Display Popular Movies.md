# ğŸ¬ Dokumentasi Display Popular Movies - TMDB API

> **Dokumentasi Pribadi untuk Pemula** - Belajar menampilkan daftar film populer menggunakan API TMDB

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Persiapan Awal](#persiapan-awal)
- [Membuat Fungsi Fetch API](#membuat-fungsi-fetch-api)
  - [Setup API Key dan URL](#setup-api-key-dan-url)
  - [Fungsi fetchAPIData](#fungsi-fetchapidata)
- [Membuat Fungsi Display Popular Movies](#membuat-fungsi-display-popular-movies)
  - [Mengambil Data dari API](#mengambil-data-dari-api)
  - [Loop Data Movies](#loop-data-movies)
  - [Membuat Card Element](#membuat-card-element)
  - [Menambahkan Inner HTML](#menambahkan-inner-html)
  - [Menangani Image dengan Ternary Operator](#menangani-image-dengan-ternary-operator)
  - [Menambahkan ke DOM](#menambahkan-ke-dom)
- [Memanggil Fungsi di Router](#memanggil-fungsi-di-router)
- [Kode Lengkap](#kode-lengkap)
- [Hasil Akhir](#hasil-akhir)
- [Tips Penting](#tips-penting)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Pada dokumentasi ini, kita akan belajar cara **menampilkan 20 film paling populer** dari The Movie Database (TMDB) API ke halaman website kita. 

**Apa yang akan kita pelajari?**
- âœ… Membuat fungsi untuk fetch data dari API
- âœ… Menampilkan data film secara dinamis
- âœ… Menangani kondisi jika gambar tidak tersedia
- âœ… Membuat card untuk setiap film

---

<a name="persiapan-awal"></a>
## ğŸ› ï¸ Persiapan Awal

### Kode Awal `script.js`

Ini adalah kode awal kita sebelum ditambahkan fitur display popular movies:

```javascript
const global = {
  currentPage: window.location.pathname,
};

// Highlight active link
function highlightActiveLink() {
  const links = document.querySelectorAll('.nav-link');
  links.forEach((link) => {
    if (link.getAttribute('href') === global.currentPage) {
      link.classList.add('active');
    }
  });
}

// Init App
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      console.log('Home');
      break;
    case '/shows.html':
      console.log('Shows');
      break;
    case '/movie-details.html':
      console.log('Movie Details');
      break;
    case '/tv-details.html':
      console.log('TV Details');
      break;
    case '/search.html':
      console.log('Search');
      break;
  }

  highlightActiveLink();
}

document.addEventListener('DOMContentLoaded', init);
```

---

<a name="membuat-fungsi-fetch-api"></a>
## ğŸ”Œ Membuat Fungsi Fetch API

<a name="setup-api-key-dan-url"></a>
### ğŸ“¦ Setup API Key dan URL

Pertama, kita perlu membuat fungsi yang bisa digunakan untuk mengambil data dari TMDB API.

> **âš ï¸ PENTING - Tentang API Key:**
> - Untuk production app, **jangan simpan API key di frontend**
> - Seharusnya API key disimpan di **backend server** atau file `.env`
> - Untuk pembelajaran, kita simpan langsung di kode (hanya untuk belajar)
> - API key akan terlihat di repository jika dipublish
> - Tapi tidak masalah karena TMDB API gratis dan orang bisa daftar sendiri

<a name="fungsi-fetchapidata"></a>
### ğŸª Fungsi fetchAPIData

**Tambahkan kode ini** di `script.js`:

```javascript
// âœ¨ KODE BARU - Fetch data from TMDB API
async function fetchAPIData(endpoint) {
  // ğŸ”‘ API Key dari TMDB (daftar gratis di themoviedb.org)
  const API_KEY = ''; // â¬…ï¸ Isi dengan API key kamu
  
  // ğŸŒ Base URL untuk TMDB API versi 3
  const API_URL = 'https://api.themoviedb.org/3/';

  // ğŸ“¡ Fetch request dengan await
  const response = await fetch(
    `${API_URL}${endpoint}?api_key=${API_KEY}&language=en-US`
  );

  // ğŸ“¦ Convert response menjadi JSON
  const data = await response.json();

  // ğŸ Return data untuk digunakan
  return data;
}
```

**Penjelasan Detail:**

1. **`async function fetchAPIData(endpoint)`**
   - Fungsi `async` karena kita pakai `await` untuk fetch data
   - Parameter `endpoint` untuk menentukan data apa yang mau diambil
   - Contoh: `'movie/popular'`, `'tv/popular'`, dll

2. **`const API_KEY = ''`**
   - Tempat menyimpan API key kamu
   - Daftar gratis di: https://www.themoviedb.org/settings/api
   - âš ï¸ Jangan lupa isi dengan API key kamu sendiri!

3. **`const API_URL = 'https://api.themoviedb.org/3/'`**
   - Base URL untuk semua request ke TMDB
   - `/3/` adalah versi API yang digunakan
   - Mengapa pakai versi? Agar tidak break aplikasi orang lain saat API update

4. **Template String untuk URL Lengkap:**
   ```javascript
   `${API_URL}${endpoint}?api_key=${API_KEY}&language=en-US`
   ```
   - `${API_URL}` â†’ `https://api.themoviedb.org/3/`
   - `${endpoint}` â†’ `movie/popular`
   - `?api_key=${API_KEY}` â†’ Query string untuk API key
   - `&language=en-US` â†’ Bahasa yang diinginkan (English-US)
   - **Hasil:** `https://api.themoviedb.org/3/movie/popular?api_key=YOUR_KEY&language=en-US`

5. **`await response.json()`**
   - Convert response dari fetch menjadi format JSON
   - Harus pakai `await` karena ini operasi async

---

<a name="membuat-fungsi-display-popular-movies"></a>
## ğŸ¬ Membuat Fungsi Display Popular Movies

<a name="mengambil-data-dari-api"></a>
### ğŸ“¥ Mengambil Data dari API

**Tambahkan fungsi ini** di atas fungsi `fetchAPIData`:

```javascript
// âœ¨ KODE BARU - Display 20 most popular movies
async function displayPopularMovies() {
  // ğŸ¯ Fetch data dan destructure langsung array results
  const { results } = await fetchAPIData('movie/popular');

  // Kode selanjutnya...
}
```

**Penjelasan:**

1. **`async function displayPopularMovies()`**
   - Fungsi async karena kita fetch data dari API
   - Fungsi ini khusus untuk menampilkan film populer di homepage

2. **`const { results } = await fetchAPIData('movie/popular')`**
   - Kita panggil fungsi `fetchAPIData` dengan endpoint `'movie/popular'`
   - **Destructuring:** Langsung ambil property `results` dari object yang dikembalikan
   - Tanpa destructuring: `const data = await fetchAPIData()` lalu `data.results`
   - Dengan destructuring: Langsung `const { results }` â†’ lebih simpel!

**Struktur data yang dikembalikan:**
```javascript
{
  page: 1,
  results: [ // â¬…ï¸ Array berisi 20 film
    { id: 1, title: "Film 1", poster_path: "/...", ... },
    { id: 2, title: "Film 2", poster_path: "/...", ... },
    // ... 18 film lainnya
  ],
  total_pages: 500,
  total_results: 10000
}
```

<a name="loop-data-movies"></a>
### ğŸ”„ Loop Data Movies

Sekarang kita loop setiap film di array `results`:

```javascript
async function displayPopularMovies() {
  const { results } = await fetchAPIData('movie/popular');

  // ğŸ” Loop setiap movie dalam array results
  results.forEach((movie) => {
    // Kode untuk setiap movie...
  });
}
```

**Penjelasan:**
- `forEach` akan menjalankan kode untuk setiap item di array
- Parameter `movie` adalah 1 object film yang sedang di-loop
- Kita akan buat 1 card untuk setiap `movie`

<a name="membuat-card-element"></a>
### ğŸ´ Membuat Card Element

Di dalam `forEach`, tambahkan kode ini:

```javascript
results.forEach((movie) => {
  // âœ¨ Buat element div baru
  const div = document.createElement('div');
  
  // âœ¨ Tambahkan class 'card' ke div
  div.classList.add('card');
  
  // Kode selanjutnya...
});
```

**Penjelasan:**

1. **`document.createElement('div')`**
   - Membuat element HTML `<div>` baru di memory
   - Belum ditambahkan ke halaman (masih di memory)

2. **`div.classList.add('card')`**
   - Menambahkan class CSS `card` ke div
   - Class ini untuk styling (sudah ada di CSS kita)

<a name="menambahkan-inner-html"></a>
### ğŸ“ Menambahkan Inner HTML

Sekarang kita isi div dengan HTML untuk card movie:

```javascript
results.forEach((movie) => {
  const div = document.createElement('div');
  div.classList.add('card');
  
  // âœ¨ Set inner HTML untuk card
  div.innerHTML = `
    <a href="movie-details.html?id=${movie.id}">
      <!-- Image akan kita isi di step berikutnya -->
    </a>
    <div class="card-body">
      <h5 class="card-title">${movie.title}</h5>
      <p class="card-text">
        <small class="text-muted">Release: ${movie.release_date}</small>
      </p>
    </div>
  `;
});
```

**Penjelasan:**

1. **`div.innerHTML = `...``**
   - Mengisi konten HTML di dalam div
   - Menggunakan template literal (backticks)

2. **`<a href="movie-details.html?id=${movie.id}">`**
   - Link ke halaman detail film
   - `${movie.id}` â†’ ID film dari API (contoh: `id=123`)
   - Nanti kita bisa ambil ID ini dari URL di halaman detail

3. **`${movie.title}`**
   - Judul film dari API
   - Contoh: "Avengers: Endgame"

4. **`${movie.release_date}`**
   - Tanggal rilis film dari API
   - Format: "2019-04-24"

<a name="menangani-image-dengan-ternary-operator"></a>
### ğŸ–¼ï¸ Menangani Image dengan Ternary Operator

Ini bagian penting! Tidak semua film punya poster image, jadi kita harus cek dulu.

**Tambahkan kode ini di dalam `<a>` tag:**

```javascript
div.innerHTML = `
  <a href="movie-details.html?id=${movie.id}">
    ${
      movie.poster_path
        ? `<img
            src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
            class="card-img-top"
            alt="${movie.title}"
          />`
        : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${movie.title}"
          />`
    }
  </a>
  <!-- Card body... -->
`;
```

**Penjelasan Detail:**

1. **Ternary Operator:** `condition ? true_value : false_value`
   ```javascript
   movie.poster_path ? /* jika ada */ : /* jika tidak ada */
   ```

2. **Jika `movie.poster_path` ada (true):**
   ```javascript
   `<img src="https://image.tmdb.org/t/p/w500${movie.poster_path}" />`
   ```
   - **URL Image TMDB:** `https://image.tmdb.org/t/p/`
   - **Size:** `w500` â†’ width 500px (bisa juga w200, w300, original)
   - **Path:** `${movie.poster_path}` â†’ contoh: `/abc123.jpg`
   - **Hasil:** `https://image.tmdb.org/t/p/w500/abc123.jpg`

3. **Jika `movie.poster_path` tidak ada (null/false):**
   ```javascript
   `<img src="../images/no-image.jpg" />`
   ```
   - Gunakan gambar placeholder "no-image.jpg"
   - Gambar ini harus ada di folder `images/`

4. **`alt="${movie.title}"`**
   - Alt text untuk accessibility
   - Berguna untuk screen reader dan jika gambar gagal load

<a name="menambahkan-ke-dom"></a>
### ğŸŒ³ Menambahkan ke DOM

Terakhir, kita tambahkan div yang sudah kita buat ke halaman HTML:

```javascript
results.forEach((movie) => {
  const div = document.createElement('div');
  div.classList.add('card');
  div.innerHTML = `...`;

  // âœ¨ Tambahkan div ke dalam container #popular-movies
  document.querySelector('#popular-movies').appendChild(div);
});
```

**Penjelasan:**

1. **`document.querySelector('#popular-movies')`**
   - Cari element dengan ID `popular-movies` di HTML
   - Element ini adalah container untuk semua card film

2. **`.appendChild(div)`**
   - Tambahkan `div` yang sudah kita buat sebagai child
   - Setiap loop akan menambah 1 card baru
   - Total: 20 card (karena API return 20 film)

---

<a name="memanggil-fungsi-di-router"></a>
## ğŸš¦ Memanggil Fungsi di Router

Sekarang kita panggil fungsi `displayPopularMovies()` di router untuk homepage:

```javascript
// Init App
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displayPopularMovies(); // â¬…ï¸ âœ¨ UBAH dari console.log('Home')
      break;
    case '/shows.html':
      console.log('Shows');
      break;
    case '/movie-details.html':
      console.log('Movie Details');
      break;
    case '/tv-details.html':
      console.log('TV Details');
      break;
    case '/search.html':
      console.log('Search');
      break;
  }

  highlightActiveLink();
}
```

**Penjelasan:**
- Saat user membuka homepage (`/` atau `/index.html`)
- Fungsi `displayPopularMovies()` akan dijalankan
- Film populer akan muncul di halaman

---

<a name="kode-lengkap"></a>
## ğŸ“„ Kode Lengkap

Berikut adalah kode lengkap `script.js` setelah semua perubahan:

```javascript
const global = {
  currentPage: window.location.pathname,
};

// âœ¨ KODE BARU - Display 20 most popular movies
async function displayPopularMovies() {
  const { results } = await fetchAPIData('movie/popular');

  results.forEach((movie) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="movie-details.html?id=${movie.id}">
            ${
              movie.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
              class="card-img-top"
              alt="${movie.title}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${movie.title}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${movie.title}</h5>
            <p class="card-text">
              <small class="text-muted">Release: ${movie.release_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-movies').appendChild(div);
  });
}

// âœ¨ KODE BARU - Fetch data from TMDB API
async function fetchAPIData(endpoint) {
  // Register your key at https://www.themoviedb.org/settings/api and enter here
  // Only use this for development or very small projects. You should store your key and make requests from a server
  const API_KEY = ''; // â¬…ï¸ âœ¨ ISI DENGAN API KEY KAMU
  const API_URL = 'https://api.themoviedb.org/3/';

  const response = await fetch(
    `${API_URL}${endpoint}?api_key=${API_KEY}&language=en-US`
  );

  const data = await response.json();

  return data;
}

// Highlight active link
function highlightActiveLink() {
  const links = document.querySelectorAll('.nav-link');
  links.forEach((link) => {
    if (link.getAttribute('href') === global.currentPage) {
      link.classList.add('active');
    }
  });
}

// Init App
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displayPopularMovies(); // â¬…ï¸ âœ¨ PANGGIL FUNGSI BARU
      break;
    case '/shows.html':
      console.log('Shows');
      break;
    case '/movie-details.html':
      console.log('Movie Details');
      break;
    case '/tv-details.html':
      console.log('TV Details');
      break;
    case '/search.html':
      console.log('Search');
      break;
  }

  highlightActiveLink();
}

document.addEventListener('DOMContentLoaded', init);
```

---

<a name="hasil-akhir"></a>
## âœ¨ Hasil Akhir

Setelah semua kode diterapkan, hasilnya:

âœ… **20 film populer** akan muncul di homepage
âœ… Setiap film ditampilkan dalam **card** yang rapi
âœ… Menampilkan **poster image** (atau placeholder jika tidak ada)
âœ… Menampilkan **judul film** dan **tanggal rilis**
âœ… Setiap card bisa **diklik** untuk ke halaman detail

**Contoh output:**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [Poster]   â”‚  â”‚  [Poster]   â”‚  â”‚  [Poster]   â”‚  â”‚  [Poster]   â”‚
â”‚             â”‚  â”‚             â”‚  â”‚             â”‚  â”‚             â”‚
â”‚ Movie Title â”‚  â”‚ Movie Title â”‚  â”‚ Movie Title â”‚  â”‚ Movie Title â”‚
â”‚ Release:    â”‚  â”‚ Release:    â”‚  â”‚ Release:    â”‚  â”‚ Release:    â”‚
â”‚ 2024-01-15  â”‚  â”‚ 2024-01-10  â”‚  â”‚ 2024-01-05  â”‚  â”‚ 2024-01-01  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
... (total 20 cards)
```

---

<a name="tips-penting"></a>
## ğŸ’¡ Tips Penting

### ğŸ” Tentang API Key
- âš ï¸ **Jangan simpan API key di frontend untuk production**
- âœ… **Untuk belajar**: Boleh simpan langsung di kode
- âœ… **Untuk production**: Gunakan backend server atau environment variable

### ğŸ¨ Tentang Pagination
- Saat ini kita tampilkan **20 film pertama** (default dari API)
- Kamu bisa tambahkan pagination jika mau (akan dijelaskan di tutorial search nanti)
- Untuk homepage, 20 film sudah cukup

### ğŸ–¼ï¸ Tentang Image Size
- TMDB menyediakan berbagai ukuran: `w200`, `w300`, `w500`, `original`
- Kita pakai `w500` untuk card (balance antara kualitas & ukuran file)
- Untuk thumbnail kecil, bisa pakai `w200` agar lebih cepat load

### ğŸ“± Responsive Design
- CSS class `card` sudah handle responsive design
- Card akan otomatis adjust di mobile, tablet, dan desktop
- Tidak perlu coding tambahan untuk responsive

### ğŸ”„ Async/Await
- Selalu gunakan `async` untuk function yang pakai `await`
- `await` membuat kode kita "menunggu" sampai fetch selesai
- Lebih mudah dibaca daripada `.then().catch()`

---

## ğŸ‰ Selamat!

Kamu sudah berhasil membuat fitur **Display Popular Movies**! 

**Yang sudah kita pelajari:**
- âœ… Fetch data dari external API
- âœ… Handle async operation dengan async/await
- âœ… Loop array dan create elements dinamis
- âœ… Conditional rendering dengan ternary operator
- âœ… Manipulasi DOM untuk menampilkan data

**Next Step:**
Di tutorial selanjutnya, kita akan belajar hal yang sama untuk **TV Shows**! ğŸ“º

---

> **ğŸ“ Catatan:** Dokumentasi ini dibuat untuk pembelajaran pribadi. Jangan ragu untuk modifikasi dan bereksperimen dengan kode! ğŸš€
