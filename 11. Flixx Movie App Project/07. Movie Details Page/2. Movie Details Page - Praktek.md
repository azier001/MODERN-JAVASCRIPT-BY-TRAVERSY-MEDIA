# ğŸ¬ Tutorial: Membuat Halaman Detail Film dengan JavaScript

> **Catatan:** Dokumentasi pribadi untuk pembelajaran JavaScript - Tingkat Pemula

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#-pengenalan)
- [Apa yang Akan Kita Buat?](#-apa-yang-akan-kita-buat)
- [Konsep Dasar yang Perlu Dipahami](#-konsep-dasar-yang-perlu-dipahami)
- [Langkah 1: Membuat Fungsi Display Movie Details](#-langkah-1-membuat-fungsi-display-movie-details)
- [Langkah 2: Mengambil ID dari URL](#-langkah-2-mengambil-id-dari-url)
- [Langkah 3: Fetch Data Film dari API](#-langkah-3-fetch-data-film-dari-api)
- [Langkah 4: Membuat Element HTML](#-langkah-4-membuat-element-html)
- [Langkah 5: Menampilkan Judul dan Gambar](#-langkah-5-menampilkan-judul-dan-gambar)
- [Langkah 6: Menampilkan Rating dan Tanggal Rilis](#-langkah-6-menampilkan-rating-dan-tanggal-rilis)
- [Langkah 7: Menampilkan Overview dan Genre](#-langkah-7-menampilkan-overview-dan-genre)
- [Langkah 8: Menambahkan Link Homepage](#-langkah-8-menambahkan-link-homepage)
- [Langkah 9: Membuat Fungsi Format Angka](#-langkah-9-membuat-fungsi-format-angka)
- [Langkah 10: Menampilkan Budget dan Revenue](#-langkah-10-menampilkan-budget-dan-revenue)
- [Langkah 11: Menampilkan Runtime dan Status](#-langkah-11-menampilkan-runtime-dan-status)
- [Langkah 12: Menampilkan Production Companies](#-langkah-12-menampilkan-production-companies)
- [Kode Lengkap Final](#-kode-lengkap-final)
- [Tips dan Catatan Penting](#-tips-dan-catatan-penting)

---

## ğŸ¯ Pengenalan

Selamat datang di tutorial membuat halaman detail film! Di sini kita akan belajar:
- ğŸ” Cara mengambil parameter dari URL
- ğŸŒ Cara menggunakan API untuk mengambil data
- ğŸ¨ Cara menampilkan data secara dinamis di halaman web
- ğŸ”¢ Cara memformat angka dengan koma

---

## ğŸ¬ Apa yang Akan Kita Buat?

Kita akan membuat halaman yang menampilkan informasi lengkap tentang sebuah film, termasuk:
- âœ… Judul film
- âœ… Poster film
- âœ… Rating
- âœ… Tanggal rilis
- âœ… Deskripsi (overview)
- âœ… Genre
- âœ… Budget dan Revenue
- âœ… Durasi film
- âœ… Status rilis
- âœ… Production companies

---

## ğŸ“š Konsep Dasar yang Perlu Dipahami

### ğŸ”¸ Apa itu `window.location.search`?

`window.location.search` adalah properti JavaScript yang memberikan kita akses ke query string dalam URL.

**Contoh:**
```
URL: movie-details.html?id=12345
window.location.search akan menghasilkan: "?id=12345"
```

### ğŸ”¸ Apa itu `async` dan `await`?

- **`async`**: Membuat fungsi menjadi asynchronous (tidak menunggu selesai untuk menjalankan kode berikutnya)
- **`await`**: Menunggu hasil dari operasi async sebelum melanjutkan

### ğŸ”¸ Apa itu `map()` dan `join()`?

- **`map()`**: Mengubah setiap item dalam array menjadi bentuk baru
- **`join()`**: Menggabungkan array menjadi string

---

## ğŸš€ Langkah 1: Membuat Fungsi Display Movie Details

Pertama, kita perlu membuat fungsi utama untuk menampilkan detail film.

**ğŸ“ Tulis kode ini di atas fungsi `fetchAPIData`:**

```javascript
// Display Movie Details
// â­ TAMBAHKAN FUNGSI BARU INI
async function displayMovieDetails() {
  // Kode akan kita tambahkan di sini
}
```

**ğŸ” Penjelasan:**
- Kita buat fungsi bernama `displayMovieDetails`
- Fungsi ini `async` karena akan mengambil data dari API
- Fungsi ini akan dipanggil saat halaman movie-details.html dibuka

---

## ğŸ”— Langkah 2: Mengambil ID dari URL

Sekarang kita akan mengambil ID film dari URL.

**ğŸ“ Tambahkan kode ini di dalam fungsi `displayMovieDetails`:**

```javascript
async function displayMovieDetails() {
  // â­ AMBIL ID DARI URL
  const movieId = window.location.search.split('=')[1];
  
  console.log(movieId); // Untuk testing
}
```

**ğŸ” Penjelasan:**
- `window.location.search` â†’ mengambil `?id=12345`
- `.split('=')` â†’ memecah string menjadi array: `['?id', '12345']`
- `[1]` â†’ mengambil item kedua (index 1): `'12345'`

**ğŸ’¡ Contoh:**
```
URL: movie-details.html?id=12345
Hasil: movieId = "12345"
```

**âœï¸ Update bagian `init()` untuk memanggil fungsi ini:**

```javascript
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displayPopularMovies();
      break;
    case '/shows.html':
      displayPopularShows();
      break;
    case '/movie-details.html':
      displayMovieDetails(); // â­ UBAH DARI console.log
      break;
    case '/tv-details.html':
      console.log('TV Details');
      break;
    case '/search.html':
      console.log('Search');
      break;
  }

  highlightActiveLink();
}
```

---

## ğŸŒ Langkah 3: Fetch Data Film dari API

Sekarang kita akan mengambil data film dari API menggunakan ID yang sudah kita dapatkan.

**ğŸ“ Tambahkan kode ini setelah `movieId`:**

```javascript
async function displayMovieDetails() {
  const movieId = window.location.search.split('=')[1];
  
  // â­ FETCH DATA DARI API
  const movie = await fetchAPIData(`movie/${movieId}`);
  
  console.log(movie); // Untuk melihat data yang didapat
}
```

**ğŸ” Penjelasan:**
- Kita gunakan fungsi `fetchAPIData` yang sudah ada
- Endpoint: `movie/12345` (sesuai ID film)
- Hasilnya disimpan di variabel `movie`

---

## ğŸ¨ Langkah 4: Membuat Element HTML

Kita akan membuat element `div` untuk menampung semua informasi film.

**ğŸ“ Tambahkan kode ini:**

```javascript
async function displayMovieDetails() {
  const movieId = window.location.search.split('=')[1];
  const movie = await fetchAPIData(`movie/${movieId}`);

  // â­ BUAT ELEMENT DIV
  const div = document.createElement('div');
  
  // â­ ISI HTML DARI DIV (akan kita isi bertahap)
  div.innerHTML = `
    <!-- Konten akan kita tambahkan -->
  `;

  // â­ TAMBAHKAN DIV KE HALAMAN
  document.querySelector('#movie-details').appendChild(div);
}
```

---

## ğŸ–¼ï¸ Langkah 5: Menampilkan Judul dan Gambar

Mari kita mulai mengisi konten HTML dengan judul dan poster film.

**ğŸ“ Isi `div.innerHTML` dengan kode ini:**

```javascript
div.innerHTML = `
  <div class="details-top">
    <div>
      ${
        movie.poster_path
          ? `<img
            src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
            class="card-img-top"
            alt="${movie.title}"
          />`
          : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${movie.title}"
          />`
      }
    </div>
    <div>
      <h2>${movie.title}</h2> <!-- â­ TAMPILKAN JUDUL -->
      
      <!-- Konten lainnya akan ditambahkan di sini -->
    </div>
  </div>
`;
```

**ğŸ” Penjelasan:**
- **Ternary operator** `? :` â†’ Jika ada poster, tampilkan dari API, jika tidak tampilkan gambar default
- `${movie.title}` â†’ Menampilkan judul film dari data API
- `${movie.poster_path}` â†’ Path gambar poster dari API

---

## â­ Langkah 6: Menampilkan Rating dan Tanggal Rilis

Sekarang kita tambahkan informasi rating dan tanggal rilis.

**ğŸ“ Tambahkan kode ini setelah `<h2>${movie.title}</h2>`:**

```javascript
<h2>${movie.title}</h2>

<!-- â­ TAMPILKAN RATING -->
<p>
  <i class="fas fa-star text-primary"></i>
  ${movie.vote_average.toFixed(1)} / 10
</p>

<!-- â­ TAMPILKAN TANGGAL RILIS -->
<p class="text-muted">Release Date: ${movie.release_date}</p>
```

**ğŸ” Penjelasan:**
- `movie.vote_average` â†’ Rating film (contoh: 7.302)
- `.toFixed(1)` â†’ Membulatkan ke 1 desimal (menjadi 7.3)
- `movie.release_date` â†’ Tanggal rilis film

---

## ğŸ“ Langkah 7: Menampilkan Overview dan Genre

Kita akan menampilkan deskripsi film dan daftar genre.

**ğŸ“ Lanjutkan kode setelah tanggal rilis:**

```javascript
<p class="text-muted">Release Date: ${movie.release_date}</p>

<!-- â­ TAMPILKAN OVERVIEW -->
<p>
  ${movie.overview}
</p>

<!-- â­ TAMPILKAN GENRE -->
<h5>Genres</h5>
<ul class="list-group">
  ${movie.genres.map((genre) => `<li>${genre.name}</li>`).join('')}
</ul>
```

**ğŸ” Penjelasan Genre:**
- `movie.genres` â†’ Array berisi daftar genre
- `.map((genre) => ...)` â†’ Ubah setiap genre jadi `<li>`
- `genre.name` â†’ Nama genre (Action, Fantasy, dll)
- `.join('')` â†’ Gabungkan semua `<li>` jadi satu string

**ğŸ’¡ Contoh:**
```javascript
genres: [
  { id: 1, name: "Action" },
  { id: 2, name: "Fantasy" }
]

Hasil:
<li>Action</li>
<li>Fantasy</li>
```

---

## ğŸ”— Langkah 8: Menambahkan Link Homepage

Tambahkan tombol untuk mengunjungi website resmi film.

**ğŸ“ Tambahkan kode ini setelah genre:**

```javascript
<ul class="list-group">
  ${movie.genres.map((genre) => `<li>${genre.name}</li>`).join('')}
</ul>

<!-- â­ LINK KE HOMEPAGE FILM -->
<a href="${movie.homepage}" target="_blank" class="btn">
  Visit Movie Homepage
</a>
```

**ğŸ” Penjelasan:**
- `${movie.homepage}` â†’ URL website film
- `target="_blank"` â†’ Buka di tab baru

---

## ğŸ’° Langkah 9: Membuat Fungsi Format Angka

Sebelum menampilkan budget dan revenue, kita perlu fungsi untuk menambahkan koma pada angka besar.

**ğŸ“ Tambahkan fungsi ini di bagian bawah file (sebelum `init()`):**

```javascript
// â­ FUNGSI UNTUK MENAMBAHKAN KOMA PADA ANGKA
function addCommasToNumber(number) {
  return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}
```

**ğŸ” Penjelasan:**
- `.toString()` â†’ Ubah angka jadi string
- `.replace(...)` â†’ Gunakan regex untuk tambah koma setiap 3 digit
- Regex `/\B(?=(\d{3})+(?!\d))/g` â†’ Pola untuk mendeteksi setiap 3 digit

**ğŸ’¡ Contoh:**
```javascript
addCommasToNumber(1000000)
// Hasil: "1,000,000"

addCommasToNumber(368770661)
// Hasil: "368,770,661"
```

---

## ğŸ’µ Langkah 10: Menampilkan Budget dan Revenue

Sekarang kita tampilkan informasi budget dan revenue dengan format yang rapi.

**ğŸ“ Tambahkan kode ini setelah `</div>` (penutup details-top):**

```javascript
</div> <!-- Penutup details-top -->

<!-- â­ BAGIAN DETAILS BOTTOM -->
<div class="details-bottom">
  <h2>Movie Info</h2>
  <ul>
    <!-- â­ TAMPILKAN BUDGET -->
    <li>
      <span class="text-secondary">Budget:</span> 
      $${addCommasToNumber(movie.budget)}
    </li>
    
    <!-- â­ TAMPILKAN REVENUE -->
    <li>
      <span class="text-secondary">Revenue:</span> 
      $${addCommasToNumber(movie.revenue)}
    </li>
```

**ğŸ” Penjelasan:**
- `$` pertama â†’ Tanda dollar literal
- `${}` kedua â†’ Template literal untuk JavaScript
- `addCommasToNumber()` â†’ Fungsi yang kita buat tadi
- Hasilnya: `$195,000,000` atau `$368,770,661`

---

## â±ï¸ Langkah 11: Menampilkan Runtime dan Status

Tambahkan informasi durasi film dan status rilis.

**ğŸ“ Lanjutkan kode setelah revenue:**

```javascript
    <li>
      <span class="text-secondary">Revenue:</span> 
      $${addCommasToNumber(movie.revenue)}
    </li>
    
    <!-- â­ TAMPILKAN RUNTIME -->
    <li>
      <span class="text-secondary">Runtime:</span> 
      ${movie.runtime} minutes
    </li>
    
    <!-- â­ TAMPILKAN STATUS -->
    <li>
      <span class="text-secondary">Status:</span> 
      ${movie.status}
    </li>
  </ul>
```

**ğŸ” Penjelasan:**
- `movie.runtime` â†’ Durasi dalam menit (contoh: 125)
- `movie.status` â†’ Status rilis (Released, In Production, dll)

---

## ğŸ¢ Langkah 12: Menampilkan Production Companies

Terakhir, kita tampilkan daftar production companies.

**ğŸ“ Tambahkan kode ini untuk menutup details-bottom:**

```javascript
  </ul>
  
  <!-- â­ TAMPILKAN PRODUCTION COMPANIES -->
  <h4>Production Companies</h4>
  <div class="list-group">
    ${movie.production_companies
      .map((company) => `<span>${company.name}</span>`)
      .join(', ')}
  </div>
</div> <!-- Penutup details-bottom -->
```

**ğŸ” Penjelasan:**
- `movie.production_companies` â†’ Array companies
- `.map()` â†’ Ubah jadi `<span>`
- `.join(', ')` â†’ Gabungkan dengan koma dan spasi

**ğŸ’¡ Contoh Hasil:**
```
Warner Bros. Pictures, DC Films, New Line Cinema
```

---

## âœ… Kode Lengkap Final

Berikut adalah kode lengkap `script.js` setelah semua perubahan:

```javascript
const global = {
  currentPage: window.location.pathname,
};

// Display 20 most popular movies
async function displayPopularMovies() {
  const { results } = await fetchAPIData('movie/popular');

  results.forEach((movie) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="movie-details.html?id=${movie.id}">
            ${
              movie.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
              class="card-img-top"
              alt="${movie.title}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${movie.title}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${movie.title}</h5>
            <p class="card-text">
              <small class="text-muted">Release: ${movie.release_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-movies').appendChild(div);
  });
}

// Display 20 most popular tv shows
async function displayPopularShows() {
  const { results } = await fetchAPIData('tv/popular');

  results.forEach((show) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="tv-details.html?id=${show.id}">
            ${
              show.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${show.poster_path}"
              class="card-img-top"
              alt="${show.name}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${show.name}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${show.name}</h5>
            <p class="card-text">
              <small class="text-muted">Air Date: ${show.first_air_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-shows').appendChild(div);
  });
}

// â­ FUNGSI BARU: Display Movie Details
async function displayMovieDetails() {
  const movieId = window.location.search.split('=')[1];

  const movie = await fetchAPIData(`movie/${movieId}`);

  const div = document.createElement('div');

  div.innerHTML = `
  <div class="details-top">
  <div>
  ${
    movie.poster_path
      ? `<img
    src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
    class="card-img-top"
    alt="${movie.title}"
  />`
      : `<img
  src="../images/no-image.jpg"
  class="card-img-top"
  alt="${movie.title}"
/>`
  }
  </div>
  <div>
    <h2>${movie.title}</h2>
    <p>
      <i class="fas fa-star text-primary"></i>
      ${movie.vote_average.toFixed(1)} / 10
    </p>
    <p class="text-muted">Release Date: ${movie.release_date}</p>
    <p>
      ${movie.overview}
    </p>
    <h5>Genres</h5>
    <ul class="list-group">
      ${movie.genres.map((genre) => `<li>${genre.name}</li>`).join('')}
    </ul>
    <a href="${
      movie.homepage
    }" target="_blank" class="btn">Visit Movie Homepage</a>
  </div>
</div>
<div class="details-bottom">
  <h2>Movie Info</h2>
  <ul>
    <li><span class="text-secondary">Budget:</span> $${addCommasToNumber(
      movie.budget
    )}</li>
    <li><span class="text-secondary">Revenue:</span> $${addCommasToNumber(
      movie.revenue
    )}</li>
    <li><span class="text-secondary">Runtime:</span> ${
      movie.runtime
    } minutes</li>
    <li><span class="text-secondary">Status:</span> ${movie.status}</li>
  </ul>
  <h4>Production Companies</h4>
  <div class="list-group">
    ${movie.production_companies
      .map((company) => `<span>${company.name}</span>`)
      .join(', ')}
  </div>
</div>
  `;

  document.querySelector('#movie-details').appendChild(div);
}

// Fetch data from TMDB API
async function fetchAPIData(endpoint) {
  const API_KEY = ''; // âš ï¸ Masukkan API key Anda di sini
  const API_URL = 'https://api.themoviedb.org/3/';

  showSpinner();

  const response = await fetch(
    `${API_URL}${endpoint}?api_key=${API_KEY}&language=en-US`
  );

  const data = await response.json();

  hideSpinner();

  return data;
}

function showSpinner() {
  document.querySelector('.spinner').classList.add('show');
}

function hideSpinner() {
  document.querySelector('.spinner').classList.remove('show');
}

// Highlight active link
function highlightActiveLink() {
  const links = document.querySelectorAll('.nav-link');
  links.forEach((link) => {
    if (link.getAttribute('href') === global.currentPage) {
      link.classList.add('active');
    }
  });
}

// â­ FUNGSI BARU: Format angka dengan koma
function addCommasToNumber(number) {
  return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

// Init App
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displayPopularMovies();
      break;
    case '/shows.html':
      displayPopularShows();
      break;
    case '/movie-details.html':
      displayMovieDetails(); // â­ DIUBAH
      break;
    case '/tv-details.html':
      console.log('TV Details');
      break;
    case '/search.html':
      console.log('Search');
      break;
  }

  highlightActiveLink();
}

document.addEventListener('DOMContentLoaded', init);
```

---

## ğŸ’¡ Tips dan Catatan Penting

### ğŸ¯ Hal yang Perlu Diingat:

1. **API Key**: Jangan lupa masukkan API key di variabel `API_KEY`
2. **Testing**: Gunakan `console.log()` untuk debug
3. **Template Literals**: Gunakan backtick (\`) untuk string multi-baris
4. **Ternary Operator**: Sintaks: `kondisi ? nilaiJikaTrue : nilaiJikaFalse`

### ğŸš« Kesalahan Umum:

âŒ **Lupa `await`** â†’ Data tidak terambil dengan benar
```javascript
// SALAH
const movie = fetchAPIData(`movie/${movieId}`);

// BENAR
const movie = await fetchAPIData(`movie/${movieId}`);
```

âŒ **Lupa `.join('')`** pada `map()` â†’ Muncul koma aneh
```javascript
// SALAH
${movie.genres.map((genre) => `<li>${genre.name}</li>`)}

// BENAR
${movie.genres.map((genre) => `<li>${genre.name}</li>`).join('')}
```

âŒ **Lupa dollar sign kedua** â†’ Tidak muncul tanda $
```javascript
// SALAH
${addCommasToNumber(movie.budget)}

// BENAR
$${addCommasToNumber(movie.budget)}
```

### ğŸ“ Latihan Mandiri:

1. Coba tambahkan informasi lain seperti `tagline` atau `spoken_languages`
2. Format tanggal rilis dengan lebih rapi
3. Tambahkan tombol "Back" untuk kembali ke halaman utama
4. Coba styling CSS untuk membuat tampilan lebih menarik

---

## ğŸ‰ Selamat!

Anda telah berhasil membuat halaman detail film yang dinamis! ğŸŠ

**Yang sudah kita pelajari:**
- âœ… Mengambil parameter dari URL
- âœ… Fetch data dari API
- âœ… Manipulasi DOM dengan JavaScript
- âœ… Template literals
- âœ… Array methods: `map()` dan `join()`
- âœ… Format angka dengan regex
- âœ… Async/await untuk operasi asynchronous

---

**ğŸ“Œ Catatan Akhir:**
Dokumentasi ini dibuat untuk pembelajaran pribadi. Terus berlatih dan jangan takut untuk bereksperimen dengan kode! ğŸš€

**Happy Coding! ğŸ’»âœ¨**
