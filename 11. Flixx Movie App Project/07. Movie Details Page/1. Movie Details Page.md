# ğŸ¬ Dokumentasi Movie Details Page

## ğŸ“‘ Daftar Isi
- [Pengenalan](#pengenalan)
- [Persiapan Awal](#persiapan-awal)
- [Mengambil ID dari URL](#mengambil-id-dari-url)
- [Membuat Fungsi displayMovieDetails](#membuat-fungsi-displaymoviedetails)
- [Mengambil Data Movie dari API](#mengambil-data-movie-dari-api)
- [Membuat Element DIV](#membuat-element-div)
- [Menampilkan Informasi Movie](#menampilkan-informasi-movie)
  - [Menampilkan Judul](#menampilkan-judul)
  - [Menampilkan Gambar Poster](#menampilkan-gambar-poster)
  - [Menampilkan Rating](#menampilkan-rating)
  - [Menampilkan Release Date](#menampilkan-release-date)
  - [Menampilkan Overview](#menampilkan-overview)
  - [Menampilkan Genres](#menampilkan-genres)
  - [Menampilkan Homepage Link](#menampilkan-homepage-link)
- [Menampilkan Detail Bottom](#menampilkan-detail-bottom)
  - [Menampilkan Budget](#menampilkan-budget)
  - [Menampilkan Revenue](#menampilkan-revenue)
  - [Menampilkan Runtime](#menampilkan-runtime)
  - [Menampilkan Status](#menampilkan-status)
  - [Menampilkan Production Companies](#menampilkan-production-companies)
- [Membuat Fungsi addCommasToNumber](#membuat-fungsi-addcommastonnumber)
- [Menambahkan ke DOM](#menambahkan-ke-dom)
- [Memanggil Fungsi di Router](#memanggil-fungsi-di-router)
- [Kode Lengkap Akhir](#kode-lengkap-akhir)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Dokumentasi ini menjelaskan cara membuat halaman detail movie yang menampilkan informasi lengkap tentang sebuah film. Kita akan belajar cara:
- âœ… Mengambil ID dari URL
- âœ… Fetch data dari API berdasarkan ID
- âœ… Menampilkan detail movie secara dinamis
- âœ… Format angka dengan koma menggunakan regex

---

<a name="persiapan-awal"></a>
## ğŸ› ï¸ Persiapan Awal

Sebelum memulai, pastikan kamu sudah memiliki:
- File `movie-details.html`
- File `script.js` dengan fungsi `fetchAPIData()` yang sudah ada
- Koneksi ke TMDB API

---

<a name="mengambil-id-dari-url"></a>
## ğŸ”— Mengambil ID dari URL

### ğŸ“ Penjelasan

Ketika user klik pada sebuah movie card, mereka akan diarahkan ke URL seperti ini:
```
movie-details.html?id=12345
```

Kita perlu mengambil ID (`12345`) dari URL tersebut.

### ğŸ’¡ Cara Kerja

JavaScript menyediakan `window.location.search` yang akan memberikan kita string `?id=12345`. Kita bisa menggunakan method `.split('=')` untuk memisahkan string tersebut.

### ğŸ“Œ Contoh

```javascript
const movieId = window.location.search.split('=')[1];
console.log(movieId); // Output: "12345"
```

**Penjelasan:**
- `window.location.search` â†’ menghasilkan `"?id=12345"`
- `.split('=')` â†’ memecah string menjadi array: `["?id", "12345"]`
- `[1]` â†’ mengambil elemen kedua (index 1): `"12345"`

---

<a name="membuat-fungsi-displaymoviedetails"></a>
## ğŸ¨ Membuat Fungsi displayMovieDetails

### ğŸ“ Langkah 1: Buat Fungsi Async

Kita akan membuat fungsi baru di atas fungsi `fetchAPIData()`:

```javascript
// âœ¨ Tambahkan fungsi baru ini
async function displayMovieDetails() {
  // Kode akan ditambahkan di sini
}
```

**Kenapa `async`?**
- Karena kita akan melakukan `fetch` data dari API
- `async` memungkinkan kita menggunakan `await`

---

<a name="mengambil-data-movie-dari-api"></a>
## ğŸ“¡ Mengambil Data Movie dari API

### ğŸ“ Langkah 2: Ambil ID dan Fetch Data

```javascript
async function displayMovieDetails() {
  // ğŸ”‘ Ambil movie ID dari URL
  const movieId = window.location.search.split('=')[1];

  // ğŸ“¦ Fetch data movie dari API
  const movie = await fetchAPIData(`movie/${movieId}`);
}
```

**Penjelasan:**
- `movie/${movieId}` â†’ endpoint API untuk mendapatkan detail movie tertentu
- `await` â†’ menunggu hingga data selesai di-fetch
- `movie` â†’ object yang berisi semua informasi tentang film

---

<a name="membuat-element-div"></a>
## ğŸ—ï¸ Membuat Element DIV

### ğŸ“ Langkah 3: Buat Element DIV Kosong

```javascript
async function displayMovieDetails() {
  const movieId = window.location.search.split('=')[1];
  const movie = await fetchAPIData(`movie/${movieId}`);

  // ğŸ“¦ Buat element div baru
  const div = document.createElement('div');
}
```

**Penjelasan:**
- `document.createElement('div')` â†’ membuat element `<div>` baru
- Element ini masih kosong dan belum ada di halaman

---

<a name="menampilkan-informasi-movie"></a>
## ğŸ¬ Menampilkan Informasi Movie

Sekarang kita akan mengisi `div` dengan HTML template yang menampilkan data movie.

<a name="menampilkan-judul"></a>
### ğŸ“Œ Menampilkan Judul

```javascript
div.innerHTML = `
  <div class="details-top">
    <div>
      <!-- Gambar akan ditambahkan di sini -->
    </div>
    <div>
      <h2>${movie.title}</h2> <!-- âœ¨ Judul movie -->
    </div>
  </div>
`;
```

**Penjelasan:**
- `${movie.title}` â†’ mengambil judul film dari data API
- Contoh: "Black Adam"

---

<a name="menampilkan-gambar-poster"></a>
### ğŸ–¼ï¸ Menampilkan Gambar Poster

```javascript
div.innerHTML = `
  <div class="details-top">
    <div>
      ${
        movie.poster_path  // âœ¨ Cek apakah ada poster
          ? `<img
        src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
        class="card-img-top"
        alt="${movie.title}"
      />`
          : `<img
      src="../images/no-image.jpg"
      class="card-img-top"
      alt="${movie.title}"
    />`
      }
    </div>
    <div>
      <h2>${movie.title}</h2>
    </div>
  </div>
`;
```

**Penjelasan:**
- **Ternary operator** (`? :`) untuk cek apakah `poster_path` ada
- Jika **ada** â†’ tampilkan gambar dari TMDB
- Jika **tidak ada** â†’ tampilkan gambar placeholder `no-image.jpg`

---

<a name="menampilkan-rating"></a>
### â­ Menampilkan Rating

```javascript
<h2>${movie.title}</h2>
<p>
  <i class="fas fa-star text-primary"></i>
  ${movie.vote_average.toFixed(1)} / 10  <!-- âœ¨ Rating dengan 1 desimal -->
</p>
```

**Penjelasan:**
- `movie.vote_average` â†’ rating dari API (contoh: 7.302)
- `.toFixed(1)` â†’ format jadi 1 angka desimal (contoh: 7.3)
- Icon bintang untuk visual yang lebih menarik

---

<a name="menampilkan-release-date"></a>
### ğŸ“… Menampilkan Release Date

```javascript
<p class="text-muted">Release Date: ${movie.release_date}</p>  <!-- âœ¨ Tanggal rilis -->
```

**Penjelasan:**
- `movie.release_date` â†’ tanggal rilis film
- Format biasanya: `YYYY-MM-DD` (contoh: "2022-10-19")

---

<a name="menampilkan-overview"></a>
### ğŸ“– Menampilkan Overview

```javascript
<p>
  ${movie.overview}  <!-- âœ¨ Sinopsis film -->
</p>
```

**Penjelasan:**
- `movie.overview` â†’ deskripsi atau sinopsis lengkap film

---

<a name="menampilkan-genres"></a>
### ğŸ­ Menampilkan Genres

```javascript
<h5>Genres</h5>
<ul class="list-group">
  ${movie.genres.map((genre) => `<li>${genre.name}</li>`).join('')}  <!-- âœ¨ Loop genres -->
</ul>
```

**Penjelasan Step-by-Step:**

1. **`movie.genres`** â†’ array yang berisi list genre
   ```javascript
   // Contoh data:
   [
     { id: 28, name: "Action" },
     { id: 14, name: "Fantasy" },
     { id: 878, name: "Science Fiction" }
   ]
   ```

2. **`.map((genre) => ...)`** â†’ loop setiap genre dan buat `<li>`
   ```javascript
   // Hasil map:
   [
     "<li>Action</li>",
     "<li>Fantasy</li>",
     "<li>Science Fiction</li>"
   ]
   ```

3. **`.join('')`** â†’ gabungkan array jadi satu string
   ```javascript
   // Hasil akhir:
   "<li>Action</li><li>Fantasy</li><li>Science Fiction</li>"
   ```

---

<a name="menampilkan-homepage-link"></a>
### ğŸ”— Menampilkan Homepage Link

```javascript
<a href="${movie.homepage}" target="_blank" class="btn">
  Visit Movie Homepage  <!-- âœ¨ Link ke website film -->
</a>
```

**Penjelasan:**
- `movie.homepage` â†’ URL website resmi film
- `target="_blank"` â†’ membuka link di tab baru

---

<a name="menampilkan-detail-bottom"></a>
## ğŸ’° Menampilkan Detail Bottom

<a name="menampilkan-budget"></a>
### ğŸ’µ Menampilkan Budget

```javascript
<div class="details-bottom">
  <h2>Movie Info</h2>
  <ul>
    <li>
      <span class="text-secondary">Budget:</span> 
      $${addCommasToNumber(movie.budget)}  <!-- âœ¨ Budget dengan format koma -->
    </li>
  </ul>
</div>
```

**Penjelasan:**
- `movie.budget` â†’ anggaran film dalam angka
- `addCommasToNumber()` â†’ fungsi untuk menambahkan koma (akan dibuat nanti)
- `$$` â†’ dollar sign pertama adalah literal, kedua adalah bagian dari template string

---

<a name="menampilkan-revenue"></a>
### ğŸ’° Menampilkan Revenue

```javascript
<li>
  <span class="text-secondary">Revenue:</span> 
  $${addCommasToNumber(movie.revenue)}  <!-- âœ¨ Pendapatan dengan format koma -->
</li>
```

**Penjelasan:**
- `movie.revenue` â†’ pendapatan film
- Sama seperti budget, menggunakan fungsi `addCommasToNumber()`

---

<a name="menampilkan-runtime"></a>
### â±ï¸ Menampilkan Runtime

```javascript
<li>
  <span class="text-secondary">Runtime:</span> 
  ${movie.runtime} minutes  <!-- âœ¨ Durasi film -->
</li>
```

**Penjelasan:**
- `movie.runtime` â†’ durasi film dalam menit
- Tambahkan kata "minutes" untuk kejelasan

---

<a name="menampilkan-status"></a>
### ğŸ“Š Menampilkan Status

```javascript
<li>
  <span class="text-secondary">Status:</span> 
  ${movie.status}  <!-- âœ¨ Status film (Released, etc) -->
</li>
```

**Penjelasan:**
- `movie.status` â†’ status film (contoh: "Released", "Post Production")

---

<a name="menampilkan-production-companies"></a>
### ğŸ¢ Menampilkan Production Companies

```javascript
<h4>Production Companies</h4>
<div class="list-group">
  ${movie.production_companies
    .map((company) => `<span>${company.name}</span>`)  <!-- âœ¨ Loop companies -->
    .join(', ')}  <!-- âœ¨ Pisahkan dengan koma -->
</div>
```

**Penjelasan Step-by-Step:**

1. **`movie.production_companies`** â†’ array perusahaan produksi
   ```javascript
   // Contoh data:
   [
     { id: 1, name: "Warner Bros" },
     { id: 2, name: "DC Films" },
     { id: 3, name: "New Line Cinema" }
   ]
   ```

2. **`.map((company) => ...)`** â†’ buat `<span>` untuk setiap perusahaan
   ```javascript
   // Hasil map:
   [
     "<span>Warner Bros</span>",
     "<span>DC Films</span>",
     "<span>New Line Cinema</span>"
   ]
   ```

3. **`.join(', ')`** â†’ gabungkan dengan koma dan spasi
   ```javascript
   // Hasil akhir:
   "<span>Warner Bros</span>, <span>DC Films</span>, <span>New Line Cinema</span>"
   ```

---

<a name="membuat-fungsi-addcommastonnumber"></a>
## ğŸ”¢ Membuat Fungsi addCommasToNumber

### ğŸ“ Penjelasan

Fungsi ini mengubah angka seperti `200000000` menjadi `200,000,000` agar lebih mudah dibaca.

### ğŸ’¡ Kode

```javascript
// âœ¨ Fungsi baru untuk format angka
function addCommasToNumber(number) {
  return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}
```

**Penjelasan Step-by-Step:**

1. **`number.toString()`** â†’ ubah angka jadi string
   ```javascript
   200000000 â†’ "200000000"
   ```

2. **`.replace(/\B(?=(\d{3})+(?!\d))/g, ',')`** â†’ gunakan regex untuk tambah koma
   - Regex ini mencari setiap 3 digit dari belakang
   - Tambahkan koma di posisi tersebut

3. **Hasil:**
   ```javascript
   "200000000" â†’ "200,000,000"
   ```

**ğŸ’¡ Tips:** Kamu tidak perlu paham regex sepenuhnya! Banyak developer cari solusi regex di Stack Overflow untuk keperluan seperti ini.

---

<a name="menambahkan-ke-dom"></a>
## ğŸ¯ Menambahkan ke DOM

### ğŸ“ Langkah Terakhir

Setelah semua HTML template siap, kita perlu menambahkannya ke halaman:

```javascript
async function displayMovieDetails() {
  const movieId = window.location.search.split('=')[1];
  const movie = await fetchAPIData(`movie/${movieId}`);
  
  const div = document.createElement('div');
  div.innerHTML = `
    <!-- Semua HTML template di atas -->
  `;

  // âœ¨ Tambahkan div ke halaman
  document.querySelector('#movie-details').appendChild(div);
}
```

**Penjelasan:**
- `document.querySelector('#movie-details')` â†’ cari element dengan id `movie-details`
- `.appendChild(div)` â†’ masukkan div ke dalam element tersebut

---

<a name="memanggil-fungsi-di-router"></a>
## ğŸš¦ Memanggil Fungsi di Router

### ğŸ“ Update Fungsi init()

```javascript
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displayPopularMovies();
      break;
    case '/shows.html':
      displayPopularShows();
      break;
    case '/movie-details.html':
      displayMovieDetails();  // âœ¨ Ubah dari console.log ke displayMovieDetails()
      break;
    case '/tv-details.html':
      console.log('TV Details');
      break;
    case '/search.html':
      console.log('Search');
      break;
  }

  highlightActiveLink();
}
```

**Penjelasan:**
- Ketika user membuka `movie-details.html`, fungsi `displayMovieDetails()` akan otomatis dijalankan
- Fungsi ini akan mengambil ID dari URL, fetch data, dan menampilkan detail movie

---

<a name="kode-lengkap-akhir"></a>
## ğŸ“¦ Kode Lengkap Akhir

```javascript
const global = {
  currentPage: window.location.pathname,
};

// Display 20 most popular movies
async function displayPopularMovies() {
  const { results } = await fetchAPIData('movie/popular');

  results.forEach((movie) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="movie-details.html?id=${movie.id}">
            ${
              movie.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
              class="card-img-top"
              alt="${movie.title}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${movie.title}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${movie.title}</h5>
            <p class="card-text">
              <small class="text-muted">Release: ${movie.release_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-movies').appendChild(div);
  });
}

// Display 20 most popular tv shows
async function displayPopularShows() {
  const { results } = await fetchAPIData('tv/popular');

  results.forEach((show) => {
    const div = document.createElement('div');
    div.classList.add('card');
    div.innerHTML = `
          <a href="tv-details.html?id=${show.id}">
            ${
              show.poster_path
                ? `<img
              src="https://image.tmdb.org/t/p/w500${show.poster_path}"
              class="card-img-top"
              alt="${show.name}"
            />`
                : `<img
            src="../images/no-image.jpg"
            class="card-img-top"
            alt="${show.name}"
          />`
            }
          </a>
          <div class="card-body">
            <h5 class="card-title">${show.name}</h5>
            <p class="card-text">
              <small class="text-muted">Air Date: ${show.first_air_date}</small>
            </p>
          </div>
        `;

    document.querySelector('#popular-shows').appendChild(div);
  });
}

// âœ¨ FUNGSI BARU: Display Movie Details
async function displayMovieDetails() {
  const movieId = window.location.search.split('=')[1];

  const movie = await fetchAPIData(`movie/${movieId}`);

  const div = document.createElement('div');

  div.innerHTML = `
  <div class="details-top">
  <div>
  ${
    movie.poster_path
      ? `<img
    src="https://image.tmdb.org/t/p/w500${movie.poster_path}"
    class="card-img-top"
    alt="${movie.title}"
  />`
      : `<img
  src="../images/no-image.jpg"
  class="card-img-top"
  alt="${movie.title}"
/>`
  }
  </div>
  <div>
    <h2>${movie.title}</h2>
    <p>
      <i class="fas fa-star text-primary"></i>
      ${movie.vote_average.toFixed(1)} / 10
    </p>
    <p class="text-muted">Release Date: ${movie.release_date}</p>
    <p>
      ${movie.overview}
    </p>
    <h5>Genres</h5>
    <ul class="list-group">
      ${movie.genres.map((genre) => `<li>${genre.name}</li>`).join('')}
    </ul>
    <a href="${
      movie.homepage
    }" target="_blank" class="btn">Visit Movie Homepage</a>
  </div>
</div>
<div class="details-bottom">
  <h2>Movie Info</h2>
  <ul>
    <li><span class="text-secondary">Budget:</span> $${addCommasToNumber(
      movie.budget
    )}</li>
    <li><span class="text-secondary">Revenue:</span> $${addCommasToNumber(
      movie.revenue
    )}</li>
    <li><span class="text-secondary">Runtime:</span> ${
      movie.runtime
    } minutes</li>
    <li><span class="text-secondary">Status:</span> ${movie.status}</li>
  </ul>
  <h4>Production Companies</h4>
  <div class="list-group">
    ${movie.production_companies
      .map((company) => `<span>${company.name}</span>`)
      .join(', ')}
  </div>
</div>
  `;

  document.querySelector('#movie-details').appendChild(div);
}

// Fetch data from TMDB API
async function fetchAPIData(endpoint) {
  const API_KEY = '';
  const API_URL = 'https://api.themoviedb.org/3/';

  showSpinner();

  const response = await fetch(
    `${API_URL}${endpoint}?api_key=${API_KEY}&language=en-US`
  );

  const data = await response.json();

  hideSpinner();

  return data;
}

function showSpinner() {
  document.querySelector('.spinner').classList.add('show');
}

function hideSpinner() {
  document.querySelector('.spinner').classList.remove('show');
}

// Highlight active link
function highlightActiveLink() {
  const links = document.querySelectorAll('.nav-link');
  links.forEach((link) => {
    if (link.getAttribute('href') === global.currentPage) {
      link.classList.add('active');
    }
  });
}

// âœ¨ FUNGSI BARU: Add Commas to Number
function addCommasToNumber(number) {
  return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ',');
}

// Init App
function init() {
  switch (global.currentPage) {
    case '/':
    case '/index.html':
      displayPopularMovies();
      break;
    case '/shows.html':
      displayPopularShows();
      break;
    case '/movie-details.html':
      displayMovieDetails();  // âœ¨ DIUBAH dari console.log
      break;
    case '/tv-details.html':
      console.log('TV Details');
      break;
    case '/search.html':
      console.log('Search');
      break;
  }

  highlightActiveLink();
}

document.addEventListener('DOMContentLoaded', init);
```

---

## ğŸ‰ Ringkasan

**Yang sudah kita pelajari:**

1. âœ… **Mengambil ID dari URL** menggunakan `window.location.search`
2. âœ… **Fetch data movie** dari API berdasarkan ID
3. âœ… **Menampilkan data dinamis** dengan template literals
4. âœ… **Loop array dengan `.map()`** untuk genres dan production companies
5. âœ… **Format angka dengan koma** menggunakan regex
6. âœ… **Conditional rendering** untuk gambar poster
7. âœ… **Menambahkan element ke DOM** dengan `appendChild()`

**Fitur yang sudah berhasil dibuat:**

- ğŸ¬ Judul film
- ğŸ–¼ï¸ Poster film (dengan fallback image)
- â­ Rating dengan 1 desimal
- ğŸ“… Tanggal rilis
- ğŸ“– Sinopsis
- ğŸ­ List genres
- ğŸ”— Link ke homepage film
- ğŸ’° Budget dan revenue (dengan format ribuan)
- â±ï¸ Durasi film
- ğŸ“Š Status film
- ğŸ¢ Perusahaan produksi

---

## ğŸ“Œ Catatan Penting

> **ğŸ’¡ Tips:** Pastikan API_KEY sudah diisi agar fetch data berhasil!

> **ğŸ”’ Keamanan:** Jangan pernah share API key di public repository!

> **ğŸ¨ Selanjutnya:** Video berikutnya akan membahas cara menambahkan backdrop image!

---

**Selamat! ğŸŠ** Kamu sudah berhasil membuat halaman detail movie yang dinamis!
