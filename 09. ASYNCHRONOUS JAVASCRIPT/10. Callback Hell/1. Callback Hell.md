# ğŸ“š Dokumentasi Callback Hell untuk Pemula

> **Catatan Pribadi**: Dokumentasi ini dibuat untuk memahami konsep Callback Hell dalam JavaScript secara bertahap

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Apa itu Callback Hell?](#apa-itu-callback-hell)
- [Struktur Project](#struktur-project)
- [Membuat File JSON](#membuat-file-json)
- [Membuat HTML](#membuat-html)
- [Membuat Fungsi getData](#membuat-fungsi-getdata)
- [Memahami XMLHttpRequest](#memahami-xmlhttprequest)
- [Menambahkan Random Timeout](#menambahkan-random-timeout)
- [Problem: Tanpa Callback](#problem-tanpa-callback)
- [Solusi: Menggunakan Callback](#solusi-menggunakan-callback)
- [Callback Hell Terbentuk](#callback-hell-terbentuk)
- [Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Dalam JavaScript, kita sering menggunakan **callback** untuk menangani operasi asynchronous (operasi yang membutuhkan waktu). Namun, ketika kita harus melakukan banyak operasi secara berurutan, callback bisa menjadi sangat kompleks dan sulit dibaca. Inilah yang disebut **Callback Hell**.

**Tujuan Pembelajaran:**
- âœ… Memahami apa itu Callback Hell
- âœ… Melihat bagaimana Callback Hell terbentuk
- âœ… Mengerti mengapa Promise diciptakan sebagai solusi

---

<a name="apa-itu-callback-hell"></a>
## ğŸ”¥ Apa itu Callback Hell?

**Callback Hell** adalah situasi dimana kita memiliki banyak callback yang bersarang (nested) satu sama lain. Kodenya terlihat seperti **bentuk segitiga** atau piramida ke samping.

### Ciri-ciri Callback Hell:
- ğŸ”¸ Callback di dalam callback
- ğŸ”¸ Indentasi kode semakin dalam ke kanan
- ğŸ”¸ Sulit dibaca dan di-maintain
- ğŸ”¸ Berbentuk seperti segitiga

**Kenapa ini masalah?**
> Bayangkan kamu punya 5-10 request yang harus dilakukan secara berurutan. Kodenya akan sangat panjang dan membingungkan!

---

<a name="struktur-project"></a>
## ğŸ“ Struktur Project

Sebelum memulai, pastikan struktur folder kamu seperti ini:

```
ğŸ“¦ callback-hell-project/
 â”£ ğŸ“„ index.html
 â”£ ğŸ“„ script.js
 â”£ ğŸ“„ movies.json
 â”£ ğŸ“„ actors.json
 â”— ğŸ“„ directors.json
```

---

<a name="membuat-file-json"></a>
## ğŸ“ Membuat File JSON

Kita akan membuat 3 file JSON sebagai data contoh. File ini akan kita request secara berurutan.

### ğŸ¬ File: `movies.json`

```json
[
  {
    "title": "Scarface",
    "release_year": "1983"
  },
  {
    "title": "The Godfather",
    "release_year": "1972"
  },
  {
    "title": "Goodfellas",
    "release_year": "1990"
  },
  {
    "title": "A Bronx Tale",
    "release_year": "1993"
  }
]
```

**Penjelasan:**
- Array berisi 4 objek film
- Setiap film punya `title` dan `release_year`

---

### ğŸ­ File: `actors.json`

```json
[
  {
    "name": "Al Pacino",
    "age": "78"
  },
  {
    "name": "Robert De Niro",
    "age": "76"
  },
  {
    "name": "Joe Pesci",
    "age": "77"
  },
  {
    "name": "Chazz Palminteri",
    "age": "62"
  }
]
```

**Penjelasan:**
- Array berisi 4 objek aktor
- Setiap aktor punya `name` dan `age`

---

### ğŸ¥ File: `directors.json`

```json
[
  {
    "name": "Brian De Palma",
    "age": "78"
  },
  {
    "name": "Francis Ford Coppola",
    "age": "82"
  },
  {
    "name": "Martin Scorsese",
    "age": "76"
  },
  {
    "name": "Robert De Niro",
    "age": "76"
  }
]
```

**Penjelasan:**
- Array berisi 4 objek sutradara
- Setiap sutradara punya `name` dan `age`

---

<a name="membuat-html"></a>
## ğŸŒ Membuat HTML

### File: `index.html`

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Callback Hell</title>
  </head>
  <body>
    <h1>Callback Hell</h1>

    <script src="./script.js"></script>
  </body>
</html>
```

**Penjelasan:**
- HTML sederhana dengan judul "Callback Hell"
- File `script.js` di-load di bagian bawah body
- Buka **Console** di browser untuk melihat hasilnya (F12)

---

<a name="membuat-fungsi-getdata"></a>
## âš™ï¸ Membuat Fungsi getData

Sekarang kita buat fungsi untuk mengambil data dari file JSON.

### Langkah 1: Struktur Fungsi Dasar

```javascript
function getData(endpoint, cb) {
  // endpoint: nama file JSON yang mau diambil
  // cb: callback function yang akan dipanggil setelah data didapat
}
```

**Penjelasan:**
- `endpoint` â†’ file JSON yang ingin kita ambil (contoh: `'./movies.json'`)
- `cb` â†’ singkatan dari **callback**, yaitu fungsi yang akan dijalankan setelah data berhasil didapat

---

<a name="memahami-xmlhttprequest"></a>
## ğŸŒ Memahami XMLHttpRequest

XMLHttpRequest adalah cara lama untuk melakukan HTTP request di JavaScript (sebelum ada `fetch`).

### Lengkapi Fungsi getData:

```javascript
function getData(endpoint, cb) {
  // Buat objek XMLHttpRequest
  const xhr = new XMLHttpRequest();

  // Siapkan request GET ke endpoint
  xhr.open('GET', endpoint);

  // Event handler saat state berubah
  xhr.onreadystatechange = function () {
    // Cek apakah request selesai (4) dan berhasil (200)
    if ((this.readyState === 4) & (this.status === 200)) {
      // Panggil callback dengan data yang sudah di-parse
      cb(JSON.parse(this.responseText));
    }
  };

  // Kirim request
  xhr.send();
}
```

**Penjelasan Detail:**

1. **`const xhr = new XMLHttpRequest()`**
   - Membuat objek untuk melakukan HTTP request

2. **`xhr.open('GET', endpoint)`**
   - Menyiapkan request dengan method GET ke file yang ditentukan

3. **`xhr.onreadystatechange`**
   - Event yang dipicu setiap kali status request berubah

4. **`this.readyState === 4`**
   - Ready state 4 = request selesai

5. **`this.status === 200`**
   - Status 200 = request berhasil (OK)

6. **`JSON.parse(this.responseText)`**
   - Mengubah string JSON menjadi objek JavaScript

7. **`cb(...)`**
   - Memanggil callback function dengan data sebagai parameter

---

<a name="menambahkan-random-timeout"></a>
## â±ï¸ Menambahkan Random Timeout

Untuk mensimulasikan request yang membutuhkan waktu berbeda-beda, kita tambahkan `setTimeout` dengan waktu random.

### Update Fungsi getData:

```javascript
function getData(endpoint, cb) {
  const xhr = new XMLHttpRequest();

  xhr.open('GET', endpoint);

  xhr.onreadystatechange = function () {
    if ((this.readyState === 4) & (this.status === 200)) {
      cb(JSON.parse(this.responseText));
    }
  };

  // Kirim request dengan delay random 1-4 detik
  setTimeout(() => {
    xhr.send();
  }, Math.floor(Math.random() * 3000) + 1000);
}
```

**Penjelasan Rumus Random:**

```javascript
Math.floor(Math.random() * 3000) + 1000
```

- **`Math.random()`** â†’ menghasilkan angka desimal antara 0 dan 1
  - Contoh: `0.234`, `0.789`, `0.912`

- **`Math.random() * 3000`** â†’ angka antara 0 hingga 3000
  - Contoh: `702`, `2367`, `2736`

- **`+ 1000`** â†’ menambah 1000, jadi range menjadi 1000-4000
  - Contoh: `1702`, `3367`, `3736`

- **`Math.floor()`** â†’ membulatkan ke bawah
  - Contoh: `1702`, `3367`, `3736` (sudah bulat)

**Hasil Akhir:** Delay random antara 1000ms (1 detik) hingga 4000ms (4 detik)

---

<a name="problem-tanpa-callback"></a>
## âŒ Problem: Tanpa Callback

Coba kita panggil `getData` 3 kali tanpa callback:

```javascript
getData('./movies.json');
getData('./actors.json');
getData('./directors.json');
```

### âš ï¸ Masalah yang Terjadi:

- Data akan muncul dalam **urutan acak**
- Kadang actors dulu, kadang directors dulu
- **TIDAK ADA JAMINAN URUTAN** karena setiap request punya delay yang berbeda

**Contoh Output di Console:**
```
(Bisa jadi urutannya)
Directors â†’ Actors â†’ Movies
atau
Movies â†’ Directors â†’ Actors
```

> ğŸ”´ **Ini masalah besar!** Kalau kita butuh data dalam urutan tertentu, cara ini tidak bisa dipakai.

---

<a name="solusi-menggunakan-callback"></a>
## âœ… Solusi: Menggunakan Callback

Untuk memastikan data muncul berurutan, kita gunakan **callback bersarang**.

### Cara 1: Satu Request

```javascript
getData('./movies.json', (data) => {
  console.log(data);
});
```

**Penjelasan:**
- Panggil `getData` dengan 2 parameter:
  1. `'./movies.json'` â†’ file yang mau diambil
  2. `(data) => { ... }` â†’ callback function
- Setelah data movies didapat, tampilkan di console
- âœ… Kita dapat data movies dengan pasti

---

### Cara 2: Dua Request Berurutan

```javascript
getData('./movies.json', (data) => {
  console.log(data);
  
  // Setelah movies didapat, ambil actors
  getData('./actors.json', (data) => {
    console.log(data);
  });
});
```

**Penjelasan:**
- Ambil data movies dulu
- **Setelah movies selesai**, baru ambil actors
- âœ… Urutan terjamin: Movies â†’ Actors

---

<a name="callback-hell-terbentuk"></a>
## ğŸ”¥ Callback Hell Terbentuk

Sekarang kita tambahkan request ketiga untuk directors:

### File: `script.js` (Final)

```javascript
function getData(endpoint, cb) {
  const xhr = new XMLHttpRequest();

  xhr.open('GET', endpoint);

  xhr.onreadystatechange = function () {
    if ((this.readyState === 4) & (this.status === 200)) {
      cb(JSON.parse(this.responseText));
    }
  };

  setTimeout(() => {
    xhr.send();
  }, Math.floor(Math.random() * 3000) + 1000);
}

// ğŸ”¥ CALLBACK HELL DIMULAI DI SINI ğŸ”¥
getData('./movies.json', (data) => {
  console.log(data);
  getData('./actors.json', (data) => {
    console.log(data);
    getData('./directors.json', (data) => {
      console.log(data);
    });
  });
});
```

### ğŸ“Š Visualisasi Struktur Callback Hell:

```
getData('./movies.json', (data) => {
    console.log(data);
    â†“
    getData('./actors.json', (data) => {
        console.log(data);
        â†“
        getData('./directors.json', (data) => {
            console.log(data);
        });
    });
});
```

**Lihat bentuknya?** Seperti **segitiga** atau **piramida** ke kanan! ğŸ“

---

### ğŸ¯ Penjelasan Step-by-Step:

**Step 1:** Ambil data `movies.json`
- Tunggu 1-4 detik (random)
- Setelah selesai, tampilkan data movies
- Lanjut ke Step 2

**Step 2:** Ambil data `actors.json`
- Tunggu lagi 1-4 detik (random)
- Setelah selesai, tampilkan data actors
- Lanjut ke Step 3

**Step 3:** Ambil data `directors.json`
- Tunggu lagi 1-4 detik (random)
- Setelah selesai, tampilkan data directors
- Selesai!

**Total Waktu:** 3-12 detik (karena setiap request punya delay sendiri)

---

### âš ï¸ Kenapa Ini Disebut "Hell" (Neraka)?

Bayangkan kalau kamu punya **10 request** yang harus berurutan:

```javascript
getData('file1', (data) => {
  getData('file2', (data) => {
    getData('file3', (data) => {
      getData('file4', (data) => {
        getData('file5', (data) => {
          getData('file6', (data) => {
            getData('file7', (data) => {
              getData('file8', (data) => {
                getData('file9', (data) => {
                  getData('file10', (data) => {
                    // Akhirnya selesai!
                  });
                });
              });
            });
          });
        });
      });
    });
  });
});
```

**Masalahnya:**
- ğŸ˜µ Sangat sulit dibaca
- ğŸ› Susah di-debug kalau ada error
- ğŸ“ Susah di-maintain
- ğŸ”„ Indentasi terlalu dalam

---

<a name="kesimpulan"></a>
## ğŸ“ Kesimpulan

### âœ¨ Apa yang Sudah Kita Pelajari:

1. **Callback Hell** adalah situasi dimana callback bersarang terlalu dalam
2. Terjadi ketika kita harus melakukan **banyak operasi async secara berurutan**
3. Kodenya berbentuk **segitiga/piramida** yang sulit dibaca
4. Ini **masalah umum** sebelum Promise diciptakan

### ğŸš€ Solusi untuk Callback Hell:

Di video berikutnya akan dibahas tentang **Promise** yang merupakan solusi modern untuk mengatasi Callback Hell!

**Preview Promise:**
```javascript
// Dengan Promise, kode akan lebih bersih seperti ini:
getData('./movies.json')
  .then(data => console.log(data))
  .then(() => getData('./actors.json'))
  .then(data => console.log(data))
  .then(() => getData('./directors.json'))
  .then(data => console.log(data));
```

Lebih rapi bukan? ğŸ˜Š

---

### ğŸ“Œ Poin Penting:

- âœ… Callback berguna untuk operasi async
- âœ… Callback bisa di-nest untuk memastikan urutan
- âš ï¸ Terlalu banyak nesting = Callback Hell
- ğŸ’¡ Promise diciptakan untuk mengatasi masalah ini

---

### ğŸ”§ Cara Menjalankan Project:

1. Pastikan semua file (HTML, JS, JSON) ada dalam satu folder
2. Buka `index.html` di browser
3. Buka **Console** (tekan F12 atau Ctrl+Shift+J)
4. Lihat data muncul satu per satu dengan urutan:
   - Movies
   - Actors
   - Directors

---

**Selamat! Kamu sudah memahami Callback Hell! ğŸ‰**

*Next: Belajar tentang Promise untuk membuat kode async lebih elegan!* âœ¨
