# ğŸ“š Dokumentasi Belajar Promise.all() - JavaScript

> **Dokumentasi Pribadi** - Panduan langkah demi langkah untuk memahami Promise.all() dalam JavaScript

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Apa itu Promise?](#apa-itu-promise)
- [Apa itu Promise.all()?](#apa-itu-promise-all)
- [Persiapan Project](#persiapan-project)
- [Langkah 1: Membuat Fungsi getData()](#langkah-1-membuat-fungsi-getdata)
- [Langkah 2: Membuat Promise Variable](#langkah-2-membuat-promise-variable)
- [Langkah 3: Testing Promise Pertama](#langkah-3-testing-promise-pertama)
- [Langkah 4: Menambahkan Promise Lainnya](#langkah-4-menambahkan-promise-lainnya)
- [Langkah 5: Menggunakan Promise.all()](#langkah-5-menggunakan-promise-all)
- [Langkah 6: Menambahkan Error Handling](#langkah-6-menambahkan-error-handling)
- [Langkah 7: Menambahkan Promise Custom](#langkah-7-menambahkan-promise-custom)
- [Hasil Akhir](#hasil-akhir)
- [Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Dalam JavaScript, ada **banyak cara** untuk melakukan hal yang sama. Kita bisa menggunakan:
- âœ… **Callbacks** (cara lama, bisa bikin "callback hell")
- âœ… **Promise Chaining** (menggunakan `.then()`)
- âœ… **Promise.all()** (cara yang akan kita pelajari!)
- âœ… **Async/Await** (cara modern - untuk tutorial lain)

Dokumentasi ini akan fokus pada **Promise.all()** - cara yang lebih ringkas untuk menangani multiple promises sekaligus! ğŸš€

---

<a name="apa-itu-promise"></a>
## ğŸ“– Apa itu Promise?

**Promise** adalah objek yang merepresentasikan penyelesaian (atau kegagalan) dari operasi asynchronous.

ğŸ”‘ **Analogi sederhana:**
Promise seperti **tiket antrian** di restoran. Kamu dapat tiket, lalu tunggu sampai pesanan siap. Bisa jadi:
- âœ… **Resolve** - Pesanan berhasil dibuat
- âŒ **Reject** - Pesanan gagal (bahan habis)

---

<a name="apa-itu-promise-all"></a>
## ğŸ“– Apa itu Promise.all()?

**Promise.all()** adalah method yang menerima **array of promises** dan mengembalikan **single promise** yang resolve ketika **semua promises** sudah selesai.

ğŸ¯ **Kapan pakai Promise.all()?**
- Ketika butuh fetch data dari **multiple endpoints** sekaligus
- Ketika semua data harus tersedia sebelum melanjutkan
- Ketika ingin kode lebih **clean** dan **concise**

---

<a name="persiapan-project"></a>
## ğŸ› ï¸ Persiapan Project

### ğŸ“ Struktur Folder
```
project-folder/
â”‚
â”œâ”€â”€ index.html
â”œâ”€â”€ script.js
â”œâ”€â”€ movies.json
â”œâ”€â”€ actors.json
â””â”€â”€ directors.json
```

### ğŸ“„ File HTML (index.html)

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promise.all()</title>
  </head>
  <body>
    <h1>Promise.all()</h1>

    <script src="./script.js"></script>
  </body>
</html>
```

### ğŸ“ Catatan Penting
Kamu perlu membuat 3 file JSON sederhana untuk testing:

**movies.json:**
```json
[
  {"id": 1, "title": "The Matrix"},
  {"id": 2, "title": "Inception"}
]
```

**actors.json:**
```json
[
  {"id": 1, "name": "Keanu Reeves"},
  {"id": 2, "name": "Leonardo DiCaprio"}
]
```

**directors.json:**
```json
[
  {"id": 1, "name": "Christopher Nolan"},
  {"id": 2, "name": "Wachowski"}
]
```

---

<a name="langkah-1-membuat-fungsi-getdata"></a>
## ğŸ”¨ Langkah 1: Membuat Fungsi getData()

Buat file **script.js** dan tulis fungsi untuk fetch data:

```javascript
function getData(endpoint) {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();

    xhr.open('GET', endpoint);

    xhr.onreadystatechange = function () {
      if (this.readyState === 4) {
        if (this.status === 200) {
          resolve(JSON.parse(this.responseText));
        } else {
          reject('Something went wrong');
        }
      }
    };

    setTimeout(() => {
      xhr.send();
    }, Math.floor(Math.random() * 3000) + 1000);
  });
}
```

### ğŸ’¡ Penjelasan:
- ğŸ¯ Fungsi ini **return Promise**
- ğŸ“¡ Menggunakan **XMLHttpRequest** untuk fetch data
- â±ï¸ Ada **setTimeout random** untuk simulasi network delay
- âœ… **Resolve** jika berhasil (status 200)
- âŒ **Reject** jika gagal

---

<a name="langkah-2-membuat-promise-variable"></a>
## ğŸ“¦ Langkah 2: Membuat Promise Variable

Sekarang kita simpan promise ke dalam variable:

```javascript
const moviesPromise = getData('./movies.json');
```

### ğŸ’¡ Penjelasan:
- Variable `moviesPromise` **menyimpan Promise** yang di-return oleh `getData()`
- Promise ini belum di-handle, hanya disimpan dulu

---

<a name="langkah-3-testing-promise-pertama"></a>
## ğŸ§ª Langkah 3: Testing Promise Pertama

Mari kita test apakah promise bekerja:

```javascript
const moviesPromise = getData('./movies.json');

// Testing dengan .then()
moviesPromise.then((m) => {
  console.log(m);
});
```

### ğŸ‰ Hasil yang diharapkan:
Di console browser, kamu akan melihat array movies:
```
[{id: 1, title: "The Matrix"}, {id: 2, title: "Inception"}]
```

### ğŸ“ Catatan:
Ini cara lama menggunakan `.then()`. Kita akan hapus ini dan ganti dengan `Promise.all()`!

**âŒ Hapus bagian testing di atas** sebelum lanjut ke langkah berikutnya.

---

<a name="langkah-4-menambahkan-promise-lainnya"></a>
## â• Langkah 4: Menambahkan Promise Lainnya

Tambahkan promise untuk actors dan directors:

```javascript
const moviesPromise = getData('./movies.json');
const actorsPromise = getData('./actors.json');
const directorsPromise = getData('./directors.json');
```

### ğŸ’¡ Penjelasan:
- Kita punya **3 promises** sekarang
- Setiap promise fetch data dari endpoint berbeda
- Belum di-handle, baru disimpan di variable

---

<a name="langkah-5-menggunakan-promise-all"></a>
## â­ Langkah 5: Menggunakan Promise.all()

Ini bagian penting! Tambahkan kode berikut:

```javascript
Promise.all([moviesPromise, actorsPromise, directorsPromise])
  .then((data) => {
    console.log(data);
  });
```

### ğŸ’¡ Penjelasan:
- ğŸ“¥ `Promise.all()` menerima **array of promises**
- ğŸ¯ Menunggu **semua promises** selesai
- ğŸ“¤ Return **array of results** dalam urutan yang sama
- ğŸ”— Gunakan `.then()` untuk handle hasil

### ğŸ‰ Hasil yang diharapkan:
Di console, kamu akan lihat **array of arrays**:
```javascript
[
  [{id: 1, title: "The Matrix"}, ...],      // movies
  [{id: 1, name: "Keanu Reeves"}, ...],     // actors
  [{id: 1, name: "Christopher Nolan"}, ...] // directors
]
```

### âœ¨ Keuntungan Promise.all():
- âœ… Lebih **ringkas** dari callback hell
- âœ… Lebih **clean** dari promise chaining
- âœ… Semua request berjalan **parallel** (bersamaan)
- âœ… Data di-return dalam **urutan yang sama**

---

<a name="langkah-6-menambahkan-error-handling"></a>
## ğŸ›¡ï¸ Langkah 6: Menambahkan Error Handling

Tambahkan `.catch()` untuk handle error:

```javascript
Promise.all([moviesPromise, actorsPromise, directorsPromise])
  .then((data) => {
    console.log(data);
  })
  .catch((error) => console.log(error));
```

### ğŸ’¡ Penjelasan:
- ğŸš¨ Jika **salah satu promise** reject, `.catch()` akan jalan
- âš ï¸ `Promise.all()` akan **langsung reject** jika ada 1 promise yang gagal
- ğŸ” Ini disebut **"fail-fast"** behavior

### ğŸ§ª Testing Error:
Coba ubah salah satu endpoint jadi salah:

```javascript
const moviesPromise = getData('./movies1.json'); // File tidak ada
```

**Hasil:** Kamu akan lihat pesan error: `"Something went wrong"`

**ğŸ”„ Kembalikan ke `./movies.json`** setelah testing!

---

<a name="langkah-7-menambahkan-promise-custom"></a>
## ğŸ¨ Langkah 7: Menambahkan Promise Custom

Kita bisa tambahkan promise apa saja! Buat dummy promise:

```javascript
const dummyPromise = new Promise((resolve, reject) => {
  resolve('Hello World');
});
```

Tambahkan ke `Promise.all()`:

```javascript
Promise.all([moviesPromise, actorsPromise, directorsPromise, dummyPromise])
  .then((data) => {
    console.log(data);
  })
  .catch((error) => console.log(error));
```

### ğŸ‰ Hasil:
Sekarang array punya **4 elements**:
```javascript
[
  [{...}, {...}],           // movies (array)
  [{...}, {...}],           // actors (array)
  [{...}, {...}],           // directors (array)
  "Hello World"             // dummy (string)
]
```

### ğŸ’¡ Insight:
- ğŸ¯ `Promise.all()` bisa menerima **any promises**
- ğŸ“¦ Return value bisa **berbeda-beda type**
- ğŸ”¢ Urutan result **sama dengan urutan input**

---

<a name="hasil-akhir"></a>
## âœ… Hasil Akhir

### ğŸ“„ Kode Lengkap (script.js):

```javascript
function getData(endpoint) {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();

    xhr.open('GET', endpoint);

    xhr.onreadystatechange = function () {
      if (this.readyState === 4) {
        if (this.status === 200) {
          resolve(JSON.parse(this.responseText));
        } else {
          reject('Something went wrong');
        }
      }
    };

    setTimeout(() => {
      xhr.send();
    }, Math.floor(Math.random() * 3000) + 1000);
  });
}

const moviesPromise = getData('./movies.json');
const actorsPromise = getData('./actors.json');
const directorsPromise = getData('./directors.json');

const dummyPromise = new Promise((resolve, reject) => {
  resolve('Hello World');
});

// Takes in promises
Promise.all([moviesPromise, actorsPromise, directorsPromise, dummyPromise])
  .then((data) => {
    // Returns an array of promise results
    console.log(data);
  })
  .catch((error) => console.log(error));
```

---

<a name="kesimpulan"></a>
## ğŸ“ Kesimpulan

### âœ¨ Yang Sudah Dipelajari:

1. âœ… **Promise basics** - Apa itu promise dan cara kerjanya
2. âœ… **getData() function** - Membuat fungsi yang return promise
3. âœ… **Promise variable** - Menyimpan promise di variable
4. âœ… **Promise.all()** - Menangani multiple promises sekaligus
5. âœ… **Error handling** - Menggunakan `.catch()` untuk handle error
6. âœ… **Custom promise** - Membuat dan menambahkan promise sendiri

### ğŸ¯ Kapan Pakai Promise.all()?

| Scenario | Gunakan Promise.all()? |
|----------|----------------------|
| Fetch data dari multiple API | âœ… Ya |
| Butuh semua data sekaligus | âœ… Ya |
| Request bisa independent | âœ… Ya |
| Harus sequential (berurutan) | âŒ Tidak |
| Bisa lanjut meski ada yang gagal | âŒ Tidak (pakai Promise.allSettled) |

### ğŸš€ Next Steps:

Setelah ini, kamu bisa belajar:
- ğŸ“š **Fetch API** - Cara modern fetch data (ganti XMLHttpRequest)
- âš¡ **Async/Await** - Syntax lebih clean dari `.then()`
- ğŸ”„ **Promise.race()** - Ambil promise yang selesai paling cepat
- ğŸ›¡ï¸ **Promise.allSettled()** - Handle semua promise tanpa fail-fast

---

### ğŸ’ª Challenge untuk Latihan:

1. ğŸ¯ **Challenge 1:** Tambahkan file JSON baru (genres.json) dan fetch juga!
2. ğŸ¯ **Challenge 2:** Coba tampilkan hasil di HTML, bukan console.log
3. ğŸ¯ **Challenge 3:** Buat loading indicator saat data sedang di-fetch
4. ğŸ¯ **Challenge 4:** Handle error dengan menampilkan pesan di HTML

---

### ğŸ“š Resources Tambahan:

- [MDN - Promise.all()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)
- [JavaScript.info - Promises](https://javascript.info/promise-basics)

---

**ğŸ‰ Selamat! Kamu sudah menguasai Promise.all()!** 

Terus berlatih dan jangan takut untuk bereksperimen dengan kode! ğŸ’»âœ¨

---

*Dokumentasi ini dibuat untuk pembelajaran pribadi | Last updated: 2026*
