# ğŸ“š Dokumentasi Promise.all() - JavaScript

> **Catatan Pribadi**: Dokumentasi ini dibuat untuk memahami cara ketiga dalam menangani asynchronous JavaScript menggunakan `Promise.all()`

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Tiga Cara Menangani Asynchronous](#tiga-cara-menangani-asynchronous)
- [Apa itu Promise.all()?](#apa-itu-promise-all)
- [Struktur File Project](#struktur-file-project)
- [Penjelasan Kode Step by Step](#penjelasan-kode-step-by-step)
  - [1. Fungsi getData()](#1-fungsi-getdata)
  - [2. Menyimpan Promise ke Variable](#2-menyimpan-promise-ke-variable)
  - [3. Menggunakan Promise.all()](#3-menggunakan-promise-all)
  - [4. Menambahkan Dummy Promise](#4-menambahkan-dummy-promise)
  - [5. Error Handling dengan .catch()](#5-error-handling-dengan-catch)
- [Output yang Dihasilkan](#output-yang-dihasilkan)
- [Kelebihan Promise.all()](#kelebihan-promise-all)
- [Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Dalam course JavaScript, kita sudah belajar bahwa **ada banyak cara untuk melakukan hal yang sama**. Khususnya dalam mengambil data secara asynchronous (tidak langsung).

Dokumentasi ini fokus pada **cara ketiga**: menggunakan `Promise.all()` untuk fetch data dari multiple endpoints (movies, actors, directors) secara bersamaan.

---

<a name="tiga-cara-menangani-asynchronous"></a>
## ğŸ”„ Tiga Cara Menangani Asynchronous

Sebelum masuk ke `Promise.all()`, mari ingat kembali 3 cara yang sudah dipelajari:

| Cara | Metode | Keterangan |
|------|--------|------------|
| **1ï¸âƒ£** | **Callbacks** | Menggunakan callback function, bisa menyebabkan "callback hell" jika nested |
| **2ï¸âƒ£** | **Promise Chaining** | Menggunakan `.then()` untuk chain promises secara berurutan |
| **3ï¸âƒ£** | **Promise.all()** | Menjalankan multiple promises secara bersamaan dan menunggu semuanya selesai |

> ğŸ’¡ **Catatan**: Semua cara ini valid! Pilih yang sesuai dengan kebutuhan dan style coding kamu.

---

<a name="apa-itu-promise-all"></a>
## ğŸ“– Apa itu Promise.all()?

`Promise.all()` adalah method JavaScript yang:

- âœ… Menerima **array of promises** sebagai parameter
- âœ… Menjalankan semua promises **secara paralel** (bersamaan)
- âœ… Menunggu sampai **semua promises selesai**
- âœ… Mengembalikan **array of results** dalam urutan yang sama

### ğŸ“ Syntax Dasar

```javascript
Promise.all([promise1, promise2, promise3])
  .then((results) => {
    // results adalah array dari hasil semua promises
    console.log(results);
  })
  .catch((error) => {
    // Jika ada 1 promise yang error, langsung masuk sini
    console.log(error);
  });
```

---

<a name="struktur-file-project"></a>
## ğŸ“ Struktur File Project

```
project/
â”‚
â”œâ”€â”€ index.html          # File HTML utama
â”œâ”€â”€ script.js           # File JavaScript utama
â”œâ”€â”€ movies.json         # Data movies
â”œâ”€â”€ actors.json         # Data actors
â””â”€â”€ directors.json      # Data directors
```

---

<a name="penjelasan-kode-step-by-step"></a>
## ğŸ” Penjelasan Kode Step by Step

<a name="1-fungsi-getdata"></a>
### 1ï¸âƒ£ Fungsi getData()

**Kode:**
```javascript
function getData(endpoint) {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();

    xhr.open('GET', endpoint);

    xhr.onreadystatechange = function () {
      if (this.readyState === 4) {
        if (this.status === 200) {
          resolve(JSON.parse(this.responseText));
        } else {
          reject('Something went wrong');
        }
      }
    };

    setTimeout(() => {
      xhr.send();
    }, Math.floor(Math.random() * 3000) + 1000);
  });
}
```

**ğŸ“Œ Penjelasan:**

- Fungsi ini **tidak diubah sama sekali** dari video sebelumnya
- Fungsi ini **return Promise** yang melakukan HTTP request
- Parameter `endpoint` adalah path file JSON yang mau diambil
- `setTimeout` digunakan untuk simulasi delay random (1-4 detik)
- Jika berhasil (status 200) â†’ `resolve` dengan data JSON
- Jika gagal â†’ `reject` dengan pesan error

> ğŸ’¡ **Poin Penting**: Kita hanya mengubah **cara menangani promise** yang dikembalikan, bukan fungsinya!

---

<a name="2-menyimpan-promise-ke-variable"></a>
### 2ï¸âƒ£ Menyimpan Promise ke Variable

**Kode:**
```javascript
const moviesPromise = getData('./movies.json');
const actorsPromise = getData('./actors.json');
const directorsPromise = getData('./directors.json');
```

**ğŸ“Œ Penjelasan:**

- Kita **menyimpan promise** yang dikembalikan `getData()` ke dalam variable
- `moviesPromise` â†’ promise untuk ambil data movies
- `actorsPromise` â†’ promise untuk ambil data actors
- `directorsPromise` â†’ promise untuk ambil data directors

**ğŸ§ª Testing (Opsional):**

Jika mau test satu promise saja, bisa seperti ini:

```javascript
moviesPromise.then((m) => {
  console.log(m); // Akan tampil array movies
});
```

---

<a name="3-menggunakan-promise-all"></a>
### 3ï¸âƒ£ Menggunakan Promise.all()

**Kode:**
```javascript
Promise.all([moviesPromise, actorsPromise, directorsPromise])
  .then((data) => {
    console.log(data);
  })
  .catch((error) => console.log(error));
```

**ğŸ“Œ Penjelasan:**

#### ğŸ”¹ `Promise.all([...])`
- Method yang menerima **array of promises**
- Kita pass 3 promises: movies, actors, directors
- Semua promises akan **dijalankan bersamaan** (paralel)

#### ğŸ”¹ `.then((data) => {...})`
- Akan dijalankan **setelah semua promises selesai**
- Parameter `data` adalah **array of results**
- Urutan hasil sesuai urutan promise yang kita pass

#### ğŸ”¹ Format `data` yang dikembalikan:
```javascript
[
  [...movies],      // Index 0: hasil dari moviesPromise
  [...actors],      // Index 1: hasil dari actorsPromise
  [...directors]    // Index 2: hasil dari directorsPromise
]
```

> âš¡ **Kelebihan**: Lebih concise (ringkas) daripada callback hell atau promise chaining!

---

<a name="4-menambahkan-dummy-promise"></a>
### 4ï¸âƒ£ Menambahkan Dummy Promise

**Kode:**
```javascript
const dummyPromise = new Promise((resolve, reject) => {
  resolve('Hello World');
});

Promise.all([moviesPromise, actorsPromise, directorsPromise, dummyPromise])
  .then((data) => {
    console.log(data);
  })
  .catch((error) => console.log(error));
```

**ğŸ“Œ Penjelasan:**

- Kita bisa **menambahkan promise apapun** ke dalam array
- `dummyPromise` adalah contoh promise sederhana yang langsung resolve string
- Promise ini **tidak harus fetch request**, bisa promise apapun!

#### ğŸ”¹ Output yang dihasilkan:
```javascript
[
  [...movies],        // Array movies
  [...actors],        // Array actors
  [...directors],     // Array directors
  'Hello World'       // String dari dummyPromise
]
```

> ğŸ’¡ **Poin Penting**: Array hasil akan berisi 4 elemen. 3 pertama adalah array, yang ke-4 adalah string karena itu yang di-resolve oleh `dummyPromise`.

---

<a name="5-error-handling-dengan-catch"></a>
### 5ï¸âƒ£ Error Handling dengan .catch()

**Kode:**
```javascript
Promise.all([moviesPromise, actorsPromise, directorsPromise])
  .then((data) => {
    console.log(data);
  })
  .catch((error) => console.log(error));
```

**ğŸ“Œ Penjelasan:**

- `.catch()` akan menangkap error dari **promise manapun** yang gagal
- Jika **satu saja promise error**, langsung masuk ke `.catch()`
- Contoh: jika `movies.json` path salah â†’ akan tampil "Something went wrong"

#### ğŸ§ª Simulasi Error:

```javascript
// Ubah path jadi salah
const moviesPromise = getData('./movies1.json'); // âŒ File tidak ada

// Output di console:
// Something went wrong
```

> âš ï¸ **Penting**: Jika 1 promise gagal, `Promise.all()` langsung reject dan tidak menunggu promise lainnya!

---

<a name="output-yang-dihasilkan"></a>
## ğŸ“Š Output yang Dihasilkan

### âœ… Ketika Semua Promise Berhasil:

```javascript
[
  [
    { title: "Movie 1", year: 2020 },
    { title: "Movie 2", year: 2021 }
  ],
  [
    { name: "Actor 1", age: 35 },
    { name: "Actor 2", age: 28 }
  ],
  [
    { name: "Director 1", awards: 3 },
    { name: "Director 2", awards: 5 }
  ],
  "Hello World"
]
```

### âŒ Ketika Ada Promise yang Gagal:

```
Something went wrong
```

---

<a name="kelebihan-promise-all"></a>
## âœ¨ Kelebihan Promise.all()

| Kelebihan | Penjelasan |
|-----------|------------|
| **ğŸš€ Lebih Cepat** | Semua request berjalan **paralel**, tidak menunggu satu per satu |
| **ğŸ“ Lebih Clean** | Tidak ada callback nesting atau promise chaining yang panjang |
| **ğŸ¯ Urutan Terjaga** | Hasil dikembalikan dalam **array dengan urutan yang sama** |
| **ğŸ”§ Fleksibel** | Bisa menambahkan **promise apapun**, tidak harus HTTP request |
| **ğŸ›¡ï¸ Error Handling** | Satu `.catch()` untuk handle semua error |

---

<a name="kesimpulan"></a>
## ğŸ“ Kesimpulan

### ğŸ“Œ Yang Sudah Dipelajari:

1. âœ… Ada 3 cara menangani asynchronous: Callbacks, Promise Chaining, dan `Promise.all()`
2. âœ… `Promise.all()` menerima array of promises dan menjalankannya bersamaan
3. âœ… Hasil dikembalikan dalam bentuk **array of results**
4. âœ… Jika 1 promise error, langsung masuk `.catch()`
5. âœ… Sangat berguna untuk **multiple fetch requests** ke berbagai endpoints

### ğŸš€ Next Step:

Di section berikutnya akan belajar tentang:
- **Fetch API** â†’ cara modern untuk get data (menggantikan XMLHttpRequest)
- **Async/Await** â†’ syntax alternatif untuk handle promises (lebih clean dari `.then()`)

---

### ğŸ’¾ Kode Lengkap

**index.html:**
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promise.all()</title>
  </head>
  <body>
    <h1>Promise.all()</h1>
    <script src="./script.js"></script>
  </body>
</html>
```

**script.js:**
```javascript
function getData(endpoint) {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();

    xhr.open('GET', endpoint);

    xhr.onreadystatechange = function () {
      if (this.readyState === 4) {
        if (this.status === 200) {
          resolve(JSON.parse(this.responseText));
        } else {
          reject('Something went wrong');
        }
      }
    };

    setTimeout(() => {
      xhr.send();
    }, Math.floor(Math.random() * 3000) + 1000);
  });
}

const moviesPromise = getData('./movies.json');
const actorsPromise = getData('./actors.json');
const directorsPromise = getData('./directors.json');

const dummyPromise = new Promise((resolve, reject) => {
  resolve('Hello World');
});

Promise.all([moviesPromise, actorsPromise, directorsPromise, dummyPromise])
  .then((data) => {
    console.log(data);
  })
  .catch((error) => console.log(error));
```

---

**ğŸ“… Dibuat untuk pembelajaran pribadi**  
**ğŸ¯ Keep learning, step by step!** ğŸ’ª
