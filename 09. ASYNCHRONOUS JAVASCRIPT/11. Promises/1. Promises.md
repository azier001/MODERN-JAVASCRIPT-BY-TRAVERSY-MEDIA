# ğŸ“š Dokumentasi JavaScript Promises - Untuk Pemula

---

## ğŸ“‹ Daftar Isi

- [Apa itu Promise?](#apa-itu-promise)
- [Konsep Dasar Promise](#konsep-dasar-promise)
- [Kapan Menggunakan Promise?](#kapan-menggunakan-promise)
- [Membuat Promise](#membuat-promise)
  - [Syntax Dasar](#syntax-dasar)
  - [Contoh Sederhana](#contoh-sederhana)
- [Menangani Promise](#menangani-promise)
  - [Menggunakan .then()](#menggunakan-then)
  - [Cara Alternatif](#cara-alternatif)
- [Mengirim Data dari Promise](#mengirim-data-dari-promise)
- [Error Handling](#error-handling)
  - [Menggunakan reject()](#menggunakan-reject)
  - [Menggunakan .catch()](#menggunakan-catch)
- [Finally Method](#finally-method)
- [Asynchronous & Non-blocking](#asynchronous-non-blocking)
- [Kode Praktek Lengkap](#kode-praktek-lengkap)
- [Kesimpulan](#kesimpulan)

---

<a name="apa-itu-promise"></a>
## ğŸ¯ Apa itu Promise?

**Promise** adalah sebuah **object** yang merepresentasikan **penyelesaian (completion)** atau **kegagalan (failure)** dari sebuah operasi asynchronous.

ğŸ’¡ **Analogi sederhana:**
> Promise itu seperti janji yang kamu buat ke seseorang. Kamu berjanji akan melakukan sesuatu, dan nantinya janji itu akan:
> - âœ… **Dipenuhi (fulfilled)** - jika berhasil
> - âŒ **Ditolak (rejected)** - jika gagal

Dalam JavaScript, Promise adalah janji ke script kamu bahwa ia akan menyelesaikan suatu tugas atau operasi (seperti mengambil data dari server).

---

<a name="konsep-dasar-promise"></a>
## ğŸ§© Konsep Dasar Promise

### âš¡ Karakteristik Promise:

1. **Asynchronous** - Operasi berjalan di background
2. **Non-blocking** - Kode lain tetap bisa dijalankan sambil menunggu promise selesai
3. **Mencegah Callback Hell** - Menghindari nested callbacks yang berlebihan

### ğŸ“Š Status Promise:

- **Pending** - Sedang dalam proses
- **Fulfilled** - Berhasil diselesaikan
- **Rejected** - Gagal diselesaikan

---

<a name="kapan-menggunakan-promise"></a>
## ğŸ¤” Kapan Menggunakan Promise?

### ğŸ“Œ Sebagai Pemula:

**Kamu lebih sering akan MENGGUNAKAN promise daripada MEMBUAT promise!**

Contoh penggunaan umum:
- ğŸŒ Menggunakan **Fetch API** untuk mengambil data dari server
- ğŸ“¡ Operasi yang membutuhkan waktu (fetching data, membaca file, dll)

```javascript
// Contoh: Fetch API mengembalikan promise
fetch('https://api.example.com/data')
  .then(response => response.json())
  .then(data => console.log(data));
```

### ğŸ”§ Membuat Promise:

Kamu baru akan membuat promise sendiri ketika masuk ke JavaScript yang lebih advanced.

---

<a name="membuat-promise"></a>
## ğŸ—ï¸ Membuat Promise

<a name="syntax-dasar"></a>
### ğŸ“ Syntax Dasar

Promise dibuat menggunakan **Promise Constructor** dengan keyword `new`:

```javascript
const promise = new Promise((resolve, reject) => {
  // Kode asynchronous di sini
});
```

**Parameter yang dibutuhkan:**
- âœ… `resolve` - Dipanggil ketika operasi **berhasil**
- âŒ `reject` - Dipanggil ketika operasi **gagal**

---

<a name="contoh-sederhana"></a>
### ğŸª Contoh Sederhana

```javascript
// Membuat promise
const promise = new Promise((resolve, reject) => {
  // Simulasi async task dengan setTimeout
  setTimeout(() => {
    console.log('Async task complete');
    resolve(); // Panggil resolve saat selesai
  }, 1000);
});
```

**Penjelasan:**
- `setTimeout()` digunakan untuk mensimulasikan operasi asynchronous (menunggu 1 detik)
- Setelah 1 detik, `resolve()` dipanggil yang menandakan promise berhasil

---

<a name="menangani-promise"></a>
## ğŸ¯ Menangani Promise

<a name="menggunakan-then"></a>
### âœ¨ Menggunakan `.then()`

Untuk menangani hasil dari promise yang berhasil, gunakan method `.then()`:

```javascript
promise.then(() => {
  console.log('Promise consumed..');
});
```

**Cara kerja:**
1. `.then()` menerima sebuah **callback function**
2. Callback ini akan dijalankan ketika promise di-resolve
3. Callback menerima data yang dikirim melalui `resolve()`

---

<a name="cara-alternatif"></a>
### ğŸ”„ Cara Alternatif

**Cara 1: Simpan di variable dulu**
```javascript
const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    console.log('Async task complete');
    resolve();
  }, 1000);
});

promise.then(() => {
  console.log('Promise consumed');
});
```

**Cara 2: Langsung di promise** (lebih umum)
```javascript
new Promise((resolve, reject) => {
  setTimeout(() => {
    console.log('Async task 2 complete');
    resolve();
  }, 1000);
}).then(() => {
  console.log('Promise 2 consumed');
});
```

---

<a name="mengirim-data-dari-promise"></a>
## ğŸ“¦ Mengirim Data dari Promise

Seringkali kamu ingin mengembalikan data dari promise. Caranya dengan **memasukkan data ke dalam `resolve()`**:

```javascript
const getUser = new Promise((resolve, reject) => {
  setTimeout(() => {
    // Kirim object user melalui resolve
    resolve({ 
      name: 'John', 
      age: 30 
    });
  }, 1000);
});
```

**Menangkap data di `.then()`:**
```javascript
getUser.then((user) => {
  console.log(user); // { name: 'John', age: 30 }
});
```

**Penjelasan:**
- Parameter di callback `.then()` (dalam contoh: `user`) akan menerima data yang dikirim via `resolve()`
- Kamu bisa beri nama apa saja untuk parameter ini

---

<a name="error-handling"></a>
## âŒ Error Handling

<a name="menggunakan-reject"></a>
### ğŸš« Menggunakan `reject()`

Ketika terjadi error, gunakan `reject()` untuk menolak promise:

```javascript
const getUser = new Promise((resolve, reject) => {
  setTimeout(() => {
    let error = true; // Flag untuk simulasi error
    
    if (!error) {
      resolve({ name: 'John', age: 30 });
    } else {
      reject('Error: Something went wrong'); // Kirim pesan error
    }
  }, 1000);
});
```

**Penjelasan:**
- Jika `error = false` â†’ Promise di-resolve (berhasil)
- Jika `error = true` â†’ Promise di-reject (gagal)

---

<a name="menggunakan-catch"></a>
### ğŸ£ Menggunakan `.catch()`

Untuk menangkap error yang di-reject, gunakan `.catch()`:

```javascript
getUser
  .then((user) => {
    console.log(user);
  })
  .catch((error) => {
    console.log(error); // Tangkap error di sini
  });
```

**âš ï¸ Penting:**
- Tanpa `.catch()`, error akan menjadi **"Uncaught in promise"**
- Selalu gunakan `.catch()` untuk menangani error dengan baik

**Output jika error = true:**
```
Error: Something went wrong
```

**Output jika error = false:**
```
{ name: 'John', age: 30 }
```

---

<a name="finally-method"></a>
## ğŸ Finally Method

`.finally()` akan dijalankan **tidak peduli** promise berhasil atau gagal:

```javascript
getUser
  .then((user) => console.log(user))
  .catch((error) => console.log(error))
  .finally(() => {
    console.log('The promise has been resolved or rejected');
  });
```

**Kapan berguna?**
- ğŸ”„ Menutup loading spinner
- ğŸ§¹ Membersihkan resource
- ğŸ“ Logging

**ğŸ’¡ Note:** Method ini tidak terlalu sering digunakan dalam praktek sehari-hari.

---

<a name="asynchronous-non-blocking"></a>
## âš¡ Asynchronous & Non-blocking

Promise bersifat **non-blocking**, artinya kode lain tetap berjalan sambil menunggu promise selesai:

```javascript
const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    console.log('Async task complete'); // 2. Muncul setelah 1 detik
    resolve();
  }, 1000);
});

promise.then(() => {
  console.log('Promise consumed'); // 3. Muncul setelah resolve
});

console.log('Hello from global scope'); // 1. Muncul PERTAMA!
```

**Output urutan:**
```
Hello from global scope
Async task complete
Promise consumed
```

**Mengapa urutan seperti ini?**
1. `console.log('Hello from global scope')` dijalankan **segera** (synchronous)
2. Promise berjalan di background (asynchronous)
3. Setelah 1 detik, promise selesai dan `.then()` dijalankan

**ğŸ” Behind the scenes:**
- Promise melewati **Microtask Queue** (bukan Task Queue biasa)
- Ini membuatnya lebih prioritas daripada callback biasa seperti `setTimeout`

---

<a name="kode-praktek-lengkap"></a>
## ğŸ’» Kode Praktek Lengkap

### ğŸ“„ index.html
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promises</title>
  </head>
  <body>
    <h1>Promises</h1>

    <script src="./script.js"></script>
  </body>
</html>
```

### ğŸ“„ script.js
```javascript
// ========================================
// 1ï¸âƒ£ CREATE A PROMISE
// ========================================
const promise = new Promise((resolve, reject) => {
  // Simulasi async task
  setTimeout(() => {
    console.log('Async task complete');
    resolve();
  }, 1000);
});

// Tidak digunakan saat ini
// promise.then(() => {
//   console.log('Promise consumed..');
// });

// ========================================
// 2ï¸âƒ£ PROMISE DENGAN DATA & ERROR HANDLING
// ========================================
const getUser = new Promise((resolve, reject) => {
  setTimeout(() => {
    let error = true; // Ubah ke false untuk test sukses
    
    if (!error) {
      // Jika tidak ada error, kirim data user
      resolve({ name: 'John', age: 30 });
    } else {
      // Jika ada error, kirim pesan error
      reject('Error: Something went wrong');
    }
  }, 1000);
});

// ========================================
// 3ï¸âƒ£ HANDLING PROMISE
// ========================================
getUser
  .then((user) => console.log(user))           // Handle sukses
  .catch((error) => console.log(error))        // Handle error
  .finally(() => console.log('The promise has been resolved or rejected')); // Selalu jalan

// ========================================
// 4ï¸âƒ£ DEMONSTRASI NON-BLOCKING
// ========================================
console.log('Hello from global scope');
```

**ğŸ® Cara testing:**
1. Buka `index.html` di browser
2. Buka Console (F12)
3. Lihat output di console
4. Ubah `let error = true` menjadi `false` untuk lihat hasil berbeda

---

<a name="kesimpulan"></a>
## ğŸ“ Kesimpulan

### âœ… Yang Harus Diingat:

1. **Promise = Janji** untuk menyelesaikan operasi async
2. **Resolve** = Berhasil âœ…
3. **Reject** = Gagal âŒ
4. **`.then()`** = Handle sukses
5. **`.catch()`** = Handle error
6. **`.finally()`** = Jalan apapun hasilnya

### ğŸ¯ Untuk Pemula:

> **Fokus pada MENGGUNAKAN promise (`.then()`, `.catch()`) lebih dulu!**
> 
> Membuat promise sendiri bisa dipelajari nanti setelah kamu lebih comfortable.

### ğŸš€ Next Step:

Di video berikutnya, kamu akan belajar:
- Refactor code dengan callbacks menjadi promises
- Contoh lebih praktis dengan `createPost` dan `getPosts`
- Menggunakan Fetch API yang mengembalikan promise

---

### ğŸ“š Referensi Cepat:

```javascript
// Template Promise
new Promise((resolve, reject) => {
  // async operation
  if (success) {
    resolve(data);
  } else {
    reject(error);
  }
})
.then(data => {/* handle sukses */})
.catch(error => {/* handle error */})
.finally(() => {/* cleanup */});
```

---

**ğŸ’ª Keep practicing and happy coding! ğŸš€**
