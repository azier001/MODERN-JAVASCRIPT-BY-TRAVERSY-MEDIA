# ğŸ“š Dokumentasi Callback Functions - JavaScript

> Dokumentasi pribadi untuk memahami konsep callback functions dalam JavaScript secara bertahap

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Recap: Callback dengan addEventListener](#recap-callback-dengan-addeventlistener)
- [Kesalahan Umum Pemula](#kesalahan-umum-pemula)
- [Callback Tidak Selalu Asynchronous](#callback-tidak-selalu-asynchronous)
- [Membuat Contoh Callback Sendiri](#membuat-contoh-callback-sendiri)
  - [Setup Data Posts](#setup-data-posts)
  - [Fungsi getPosts()](#fungsi-getposts)
  - [Fungsi createPost()](#fungsi-createpost)
  - [Problem: Race Condition](#problem-race-condition)
  - [Solusi: Callback Function](#solusi-callback-function)
- [Kode Lengkap](#kode-lengkap)
- [Kapan Menggunakan Callback?](#kapan-menggunakan-callback)
- [Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Callback adalah **fungsi yang dioper sebagai parameter ke fungsi lain**, dan akan dieksekusi setelah operasi tertentu selesai. Dalam video ini, kita akan belajar:

âœ… Cara menggunakan callback yang sudah ada (seperti addEventListener)  
âœ… Cara membuat fungsi kita sendiri yang menerima callback  
âœ… Mengapa callback berguna untuk operasi asynchronous  

---

<a name="recap-callback-dengan-addeventlistener"></a>
## ğŸ”„ Recap: Callback dengan addEventListener

### ğŸ“ Konsep Dasar

Mari kita lihat contoh callback yang sudah sering kita gunakan:

```javascript
function toggle(e) {
  e.target.classList.toggle('danger');
}

document.querySelector('button').addEventListener('click', toggle);
```

### ğŸ’¡ Penjelasan

- `toggle` adalah **callback function** - fungsi yang dioper ke fungsi lain
- `addEventListener` menerima 2 parameter:
  1. **Event name**: `'click'`
  2. **Callback function**: `toggle`
- Ketika button diklik, fungsi `toggle` akan dipanggil secara otomatis

### ğŸ¨ Struktur HTML & CSS

**index.html:**
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Callbacks</title>
  </head>
  <body>
    <h1>Callbacks</h1>
    <button>Click Me</button>
    <div id="posts"></div>
    <script src="./script.js"></script>
  </body>
</html>
```

**CSS** untuk class `danger`:
```css
.danger {
  background-color: red;
  color: white;
}
```

### âœ¨ Hasil

Ketika button diklik, class `danger` akan di-toggle (ditambah/dihapus), mengubah background menjadi merah.

---

<a name="kesalahan-umum-pemula"></a>
## âš ï¸ Kesalahan Umum Pemula

### âŒ SALAH:

```javascript
document.querySelector('button').addEventListener('click', toggle());
//                                                                 ^^
//                                                   Jangan pakai ()!
```

### âœ… BENAR:

```javascript
document.querySelector('button').addEventListener('click', toggle);
//                                                           ^^^^^^
//                                                     Tanpa ()
```

### ğŸ¤” Mengapa?

- **Dengan `()`**: Fungsi langsung **dijalankan** saat itu juga, bukan saat event terjadi
- **Tanpa `()`**: Kita memberikan **referensi** fungsi, akan dijalankan nanti saat event terjadi

### ğŸ’¥ Error yang Terjadi:

Jika menggunakan `toggle()`:
```
Uncaught TypeError: Cannot read property 'target' of undefined
```

Karena `e` (event object) tidak ada - fungsi dijalankan sebelum event terjadi!

---

<a name="callback-tidak-selalu-asynchronous"></a>
## ğŸ” Callback Tidak Selalu Asynchronous

### â±ï¸ Asynchronous Callbacks:

```javascript
// addEventListener - asynchronous
button.addEventListener('click', callback);

// setTimeout - asynchronous
setTimeout(callback, 1000);
```

Callback ini masuk ke **task queue** dan dijalankan lewat **event loop**.

### âš¡ Synchronous Callbacks:

```javascript
// forEach - synchronous (langsung dijalankan)
array.forEach(callback);

// map - synchronous
array.map(callback);
```

Callback ini **langsung dieksekusi**, tidak ditunda!

### ğŸ“Œ Poin Penting:

> **Callback â‰  Selalu Asynchronous**  
> Callback hanya berarti "fungsi yang dioper sebagai parameter". Apakah asynchronous atau tidak tergantung bagaimana fungsi tersebut digunakan.

---

<a name="membuat-contoh-callback-sendiri"></a>
## ğŸ› ï¸ Membuat Contoh Callback Sendiri

Sekarang kita akan membuat fungsi kita sendiri yang menerima callback!

<a name="setup-data-posts"></a>
### 1ï¸âƒ£ Setup Data Posts

```javascript
const posts = [
  { title: 'Post One', body: 'This is post one' },
  { title: 'Post Two', body: 'This is post two' },
];
```

Array sederhana yang menyimpan data posts.

---

<a name="fungsi-getposts"></a>
### 2ï¸âƒ£ Fungsi getPosts()

```javascript
function getPosts() {
  setTimeout(() => {
    posts.forEach(function (post) {
      const div = document.createElement('div');
      div.innerHTML = `<strong>${post.title}</strong> - ${post.body}`;

      document.querySelector('#posts').appendChild(div);
    });
  }, 1000);
}
```

### ğŸ“– Penjelasan Step by Step:

1. **`setTimeout(..., 1000)`**: Menunda eksekusi 1 detik (1000ms)
   - ğŸ¯ **Tujuan**: Meniru network request ke server
   
2. **`posts.forEach()`**: Loop setiap post
   - âš¡ Ini synchronous callback
   
3. **`document.createElement('div')`**: Buat elemen div baru

4. **`div.innerHTML`**: Isi div dengan HTML
   - `<strong>`: Membuat title bold
   - Template literal (` `` `) untuk string dinamis
   
5. **`appendChild(div)`**: Tambahkan div ke DOM

### ğŸ¬ Cara Kerja:

```
Tunggu 1 detik â†’ Loop posts â†’ Buat div untuk setiap post â†’ Tampilkan di halaman
```

---

<a name="fungsi-createpost"></a>
### 3ï¸âƒ£ Fungsi createPost()

```javascript
function createPost(post) {
  setTimeout(() => {
    posts.push(post);
  }, 2000);
}
```

### ğŸ“– Penjelasan:

1. **Parameter `post`**: Object post baru yang akan ditambahkan
2. **`setTimeout(..., 2000)`**: Menunda 2 detik
   - ğŸ¯ **Tujuan**: Meniru POST request ke server (biasanya lebih lama)
3. **`posts.push(post)`**: Tambahkan post baru ke array

### ğŸ’¡ Kenapa 2 detik?

Operasi menulis (POST/create) ke server biasanya lebih lama dari operasi membaca (GET).

---

<a name="problem-race-condition"></a>
### 4ï¸âƒ£ Problem: Race Condition

Mari kita coba jalankan kedua fungsi:

```javascript
createPost({ title: 'Post Three', body: 'This is post three' });
getPosts();
```

### âŒ Hasil:

Hanya **Post One** dan **Post Two** yang muncul! **Post Three** tidak ada!

### ğŸ¤” Mengapa?

```
t=0s:  createPost() dipanggil (akan selesai di t=2s)
       getPosts() dipanggil (akan selesai di t=1s)

t=1s:  getPosts() selesai â†’ Tampilkan posts
       âŒ Post Three belum ditambahkan!

t=2s:  createPost() selesai â†’ Post Three ditambahkan
       ğŸ˜¢ Tapi getPosts() sudah dijalankan...
```

### ğŸ“Š Timeline Visualisasi:

```
createPost (2 detik)  |====================|
getPosts (1 detik)    |==========|
                      ^          ^
                      Start      getPosts selesai
                                 (createPost belum!)
```

Ini disebut **Race Condition** - getPosts "menang" lebih dulu sebelum createPost selesai!

---

<a name="solusi-callback-function"></a>
### 5ï¸âƒ£ Solusi: Callback Function

### âœ… Kode yang Diperbaiki:

```javascript
function createPost(post, cb) {
  setTimeout(() => {
    posts.push(post);
    cb();  // â† Panggil callback setelah post ditambahkan
  }, 2000);
}

// Panggil dengan callback
createPost({ title: 'Post Three', body: 'This is post three' }, getPosts);
//                                                                ^^^^^^^^
//                                                            Tanpa ()!
```

### ğŸ“– Penjelasan:

1. **Parameter `cb`**: Callback function (singkatan dari callback)
   - ğŸ’¡ `cb` adalah naming convention umum untuk callback

2. **`cb()`**: Setelah post ditambahkan, **panggil callback**

3. **`getPosts` tanpa `()`**: Kita memberikan referensi fungsi, bukan hasil eksekusinya

### ğŸ¬ Cara Kerja yang Benar:

```
t=0s:  createPost() dipanggil
       â³ Tunggu 2 detik...

t=2s:  Post Three ditambahkan ke array
       âœ… cb() dipanggil â†’ getPosts() berjalan
       â³ Tunggu 1 detik lagi...

t=3s:  getPosts() selesai
       ğŸ‰ Semua posts ditampilkan (termasuk Post Three)!
```

### ğŸ“Š Timeline yang Benar:

```
createPost (2s) |====================|
                                     â†“
                         getPosts (1s) |==========|
                                                  â†“
                                          Semua posts muncul âœ…
```

Total waktu: **3 detik** (2 detik + 1 detik)

### âœ¨ Hasilnya:

Sekarang **ketiga posts** muncul di halaman, termasuk Post Three!

---

<a name="kode-lengkap"></a>
## ğŸ“¦ Kode Lengkap

### **script.js**

```javascript
// Data posts
const posts = [
  { title: 'Post One', body: 'This is post one' },
  { title: 'Post Two', body: 'This is post two' },
];

// Fungsi untuk membuat post baru (dengan callback)
function createPost(post, cb) {
  setTimeout(() => {
    posts.push(post);
    cb();  // Panggil callback setelah selesai
  }, 2000);
}

// Fungsi untuk mengambil dan menampilkan posts
function getPosts() {
  setTimeout(() => {
    posts.forEach(function (post) {
      const div = document.createElement('div');
      div.innerHTML = `<strong>${post.title}</strong> - ${post.body}`;
      document.querySelector('#posts').appendChild(div);
    });
  }, 1000);
}

// Panggil createPost dengan getPosts sebagai callback
createPost({ title: 'Post Three', body: 'This is post three' }, getPosts);
```

### **index.html**

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Callbacks</title>
  </head>
  <body>
    <h1>Callbacks</h1>
    <button>Click Me</button>
    <div id="posts"></div>
    <script src="./script.js"></script>
  </body>
</html>
```

---

<a name="kapan-menggunakan-callback"></a>
## ğŸ“ Kapan Menggunakan Callback?

### ğŸ”§ Menggunakan Callback yang Sudah Ada (Sering):

```javascript
// Event listeners
button.addEventListener('click', callback);

// Array methods
array.forEach(callback);
array.map(callback);
array.filter(callback);

// Timers
setTimeout(callback, 1000);
setInterval(callback, 1000);
```

Ini yang akan **sangat sering** kamu lakukan!

### ğŸ—ï¸ Membuat Callback Sendiri (Jarang):

Biasanya baru diperlukan saat:
- Membuat library/framework sendiri
- Advanced JavaScript projects
- Handling complex asynchronous operations

### ğŸ’¡ Kata-kata dari Instruktur:

> "From my own experience, you're probably not going to be doing this type of thing where you're creating your own callbacks until you get into much more advanced JavaScript."

---

<a name="kesimpulan"></a>
## ğŸ‰ Kesimpulan

### ğŸ“Œ Poin-Poin Penting:

1. **Callback** = Fungsi yang dioper ke fungsi lain sebagai parameter

2. **Cara memanggil callback**:
   - âœ… `addEventListener('click', toggle)` - BENAR
   - âŒ `addEventListener('click', toggle())` - SALAH

3. **Callback â‰  Asynchronous**:
   - `setTimeout`, `addEventListener` â†’ Asynchronous
   - `forEach`, `map` â†’ Synchronous

4. **Gunakan callback untuk**:
   - Memastikan kode dijalankan setelah operasi selesai
   - Menghindari race conditions
   - Handling asynchronous operations

5. **Membuat callback sendiri**:
   - Terima callback sebagai parameter: `function myFunc(cb)`
   - Panggil callback saat diperlukan: `cb()`
   - Pass function tanpa `()`: `myFunc(otherFunc)`

### ğŸš€ Next Steps:

Video berikutnya akan membahas **HTTP Requests** yang sebenarnya, bukan hanya simulasi dengan `setTimeout`!

---

### ğŸ“š Catatan Tambahan

**setTimeout untuk Simulasi Network Request:**

```javascript
// Simulasi GET request (biasanya lebih cepat)
setTimeout(() => {
  // Fetch data
}, 1000);  // 1 detik

// Simulasi POST request (biasanya lebih lama)
setTimeout(() => {
  // Send data
}, 2000);  // 2 detik
```

Dalam dunia nyata, waktu network request bervariasi tergantung:
- ğŸŒ Kecepatan internet
- ğŸ–¥ï¸ Performa server
- ğŸ“Š Ukuran data
- ğŸŒ Jarak geografis

---

**Dokumentasi dibuat untuk pembelajaran pribadi** ğŸ“–âœ¨

*Terus berlatih dan semangat belajar!* ğŸ’ªğŸš€
