# ğŸ”— Dokumentasi Promise Chaining JavaScript

> **Dokumentasi Pribadi** - Panduan lengkap memahami Promise Chaining untuk pemula

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Apa itu Promise?](#apa-itu-promise)
- [Apa itu Promise Chaining?](#apa-itu-promise-chaining)
- [Persiapan Project](#persiapan-project)
- [Langkah 1: Membuat Promise Dasar](#langkah-1-membuat-promise-dasar)
- [Langkah 2: Menambahkan .then() Pertama](#langkah-2-menambahkan-then-pertama)
- [Langkah 3: Menambahkan .then() Kedua](#langkah-3-menambahkan-then-kedua)
- [Langkah 4: Menambahkan .then() Ketiga](#langkah-4-menambahkan-then-ketiga)
- [Langkah 5: Menambahkan .catch()](#langkah-5-menambahkan-catch)
- [Langkah 6: .then() Setelah .catch()](#langkah-6-then-setelah-catch)
- [Langkah 7: Return Value dari .catch()](#langkah-7-return-value-dari-catch)
- [Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Promise Chaining adalah teknik dalam JavaScript yang memungkinkan kita untuk menjalankan **beberapa operasi asynchronous secara berurutan**. Ini sangat berguna ketika kita memiliki tugas-tugas yang harus dilakukan secara bertahap.

**Kapan digunakan?**
- âœ… Ketika ada sequence/urutan tugas asynchronous
- âœ… Ketika promise pertama menghasilkan nilai yang dibutuhkan promise berikutnya
- âœ… Untuk menghindari "callback hell"

---

<a name="apa-itu-promise"></a>
## ğŸ“– Apa itu Promise?

**Promise** adalah objek JavaScript yang merepresentasikan hasil dari operasi asynchronous. Promise memiliki 3 state:

- ğŸŸ¡ **Pending**: Sedang proses
- ğŸŸ¢ **Fulfilled**: Berhasil (resolve)
- ğŸ”´ **Rejected**: Gagal (reject)

---

<a name="apa-itu-promise-chaining"></a>
## ğŸ”— Apa itu Promise Chaining?

**Promise Chaining** adalah teknik menghubungkan beberapa `.then()` secara berurutan. Nilai yang di-return dari `.then()` pertama akan masuk ke `.then()` berikutnya.

**Konsep Dasar:**
```
Promise â†’ .then() â†’ .then() â†’ .then() â†’ .catch()
```

---

<a name="persiapan-project"></a>
## ğŸ› ï¸ Persiapan Project

### Struktur Folder
```
promise-chaining/
â”‚
â”œâ”€â”€ index.html
â””â”€â”€ script.js
```

### ğŸ“„ File `index.html`

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Promise Chaining</title>
  </head>
  <body>
    <h1>Promise Chaining</h1>

    <script src="./script.js"></script>
  </body>
</html>
```

**Penjelasan:**
- File HTML sederhana sebagai container
- Menghubungkan dengan `script.js`
- Buka file ini di browser untuk melihat hasil di Console

---

<a name="langkah-1-membuat-promise-dasar"></a>
## ğŸ“ Langkah 1: Membuat Promise Dasar

### ğŸ¯ Tujuan
Membuat promise yang mengembalikan objek user setelah 1 detik.

### ğŸ’» Kode `script.js`

```javascript
const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    let error = false;

    if (!error) {
      resolve({ name: 'John', age: 30 });
    } else {
      reject('Error: Something went wrong');
    }
  }, 1000);
});
```

### ğŸ“š Penjelasan:

| Bagian | Fungsi |
|--------|--------|
| `new Promise()` | Membuat promise baru |
| `resolve` | Fungsi untuk menandakan promise berhasil |
| `reject` | Fungsi untuk menandakan promise gagal |
| `setTimeout()` | Simulasi operasi async (tunggu 1 detik) |
| `error = false` | Flag untuk simulasi error |
| `{ name: 'John', age: 30 }` | Data user yang akan dikembalikan |

**ğŸ’¡ Tips:** Variabel `error` digunakan untuk simulasi. Nanti kita akan ubah menjadi `true` untuk testing error handling.

---

<a name="langkah-2-menambahkan-then-pertama"></a>
## ğŸ“ Langkah 2: Menambahkan .then() Pertama

### ğŸ¯ Tujuan
Menangani promise dan mengakses data user.

### ğŸ’» Tambahkan kode ini di bawah promise:

```javascript
promise
  .then((user) => {
    console.log(user);
  });
```

### ğŸ–¥ï¸ Output Console:
```
{ name: 'John', age: 30 }
```

### ğŸ“š Penjelasan:

- `.then()` dijalankan ketika promise **berhasil (resolve)**
- Parameter `user` berisi data yang di-resolve: `{ name: 'John', age: 30 }`
- `console.log(user)` menampilkan objek user di console

**ğŸ”¥ Key Point:** `.then()` hanya jalan jika promise berhasil!

---

<a name="langkah-3-menambahkan-then-kedua"></a>
## ğŸ“ Langkah 3: Menambahkan .then() Kedua (Chaining)

### ğŸ¯ Tujuan
Return nilai dari `.then()` pertama dan gunakan di `.then()` kedua.

### ğŸ’» Update kode menjadi:

```javascript
promise
  .then((user) => {
    console.log(user);
    return user.name;  // ğŸ‘ˆ Return nama user
  })
  .then((name) => {    // ğŸ‘ˆ Terima nama user
    console.log(name);
  });
```

### ğŸ–¥ï¸ Output Console:
```
{ name: 'John', age: 30 }
John
```

### ğŸ“š Penjelasan:

| Baris | Penjelasan |
|-------|-----------|
| `return user.name` | Mengembalikan string "John" |
| `.then((name) => {...})` | Menerima "John" sebagai parameter `name` |
| `console.log(name)` | Menampilkan "John" |

**ğŸ”¥ Key Point:** Apapun yang di-**return** dari `.then()` akan masuk ke `.then()` berikutnya!

---

<a name="langkah-4-menambahkan-then-ketiga"></a>
## ğŸ“ Langkah 4: Menambahkan .then() Ketiga

### ğŸ¯ Tujuan
Chain lagi untuk mendapatkan panjang nama.

### ğŸ’» Update kode menjadi:

```javascript
promise
  .then((user) => {
    console.log(user);
    return user.name;
  })
  .then((name) => {
    console.log(name);
    return name.length;  // ğŸ‘ˆ Return panjang nama
  })
  .then((nameLength) => { // ğŸ‘ˆ Terima panjang nama
    console.log(nameLength);
  });
```

### ğŸ–¥ï¸ Output Console:
```
{ name: 'John', age: 30 }
John
4
```

### ğŸ“š Penjelasan:

**Flow Data:**
```
user object â†’ user.name ("John") â†’ name.length (4)
```

- `name.length` menghitung panjang string "John" = 4 karakter
- Nilai 4 diteruskan ke `.then()` berikutnya
- `console.log(nameLength)` menampilkan 4

**ğŸ’¡ Insight:** Kita bisa chain sebanyak yang kita mau! Setiap `.then()` bisa mengolah data dan meneruskannya.

---

<a name="langkah-5-menambahkan-catch"></a>
## ğŸ“ Langkah 5: Menambahkan .catch()

### ğŸ¯ Tujuan
Menangani error jika promise di-reject.

### ğŸ’» Update kode menjadi:

```javascript
promise
  .then((user) => {
    console.log(user);
    return user.name;
  })
  .then((name) => {
    console.log(name);
    return name.length;
  })
  .then((nameLength) => {
    console.log(nameLength);
  })
  .catch((error) => {      // ğŸ‘ˆ Tangkap error
    console.log(error);
  });
```

### ğŸ§ª Testing Error:

**Ubah flag error menjadi `true`:**
```javascript
let error = true;  // ğŸ‘ˆ Ubah dari false ke true
```

### ğŸ–¥ï¸ Output Console (ketika error = true):
```
Error: Something went wrong
```

### ğŸ“š Penjelasan:

**Ketika `error = false`:**
- Semua `.then()` berjalan normal
- `.catch()` tidak dijalankan

**Ketika `error = true`:**
- Promise di-reject
- Semua `.then()` **dilewati**
- Langsung loncat ke `.catch()`

**ğŸ”¥ Key Point:** `.catch()` menangkap error dari **semua** `.then()` sebelumnya!

---

<a name="langkah-6-then-setelah-catch"></a>
## ğŸ“ Langkah 6: .then() Setelah .catch()

### ğŸ¯ Tujuan
Menambahkan kode yang berjalan **tidak peduli** promise berhasil atau gagal.

### ğŸ’» Update kode menjadi:

```javascript
promise
  .then((user) => {
    console.log(user);
    return user.name;
  })
  .then((name) => {
    console.log(name);
    return name.length;
  })
  .then((nameLength) => {
    console.log(nameLength);
  })
  .catch((error) => {
    console.log(error);
  })
  .then(() => {  // ğŸ‘ˆ Setelah .catch()
    console.log('This will run no matter what');
  });
```

### ğŸ–¥ï¸ Output Console (ketika error = true):
```
Error: Something went wrong
This will run no matter what
```

### ğŸ–¥ï¸ Output Console (ketika error = false):
```
{ name: 'John', age: 30 }
John
4
This will run no matter what
```

### ğŸ“š Penjelasan:

**Behavior:**
- `.then()` setelah `.catch()` **SELALU** dijalankan
- Tidak peduli promise berhasil atau gagal
- Mirip dengan `finally` block

**Use Case:** Cocok untuk cleanup code, hide loading spinner, dll.

---

<a name="langkah-7-return-value-dari-catch"></a>
## ğŸ“ Langkah 7: Return Value dari .catch()

### ğŸ¯ Tujuan
Membuktikan bahwa kita bisa return value dari `.catch()` dan menggunakannya di `.then()` berikutnya.

### ğŸ’» Kode Final:

```javascript
const promise = new Promise((resolve, reject) => {
  setTimeout(() => {
    let error = true;  // ğŸ‘ˆ Set true untuk testing

    if (!error) {
      resolve({ name: 'John', age: 30 });
    } else {
      reject('Error: Something went wrong');
    }
  }, 1000);
});

promise
  .then((user) => {
    console.log(user);
    return user.name;
  })
  .then((name) => {
    console.log(name);
    return name.length;
  })
  .then((nameLength) => {
    console.log(nameLength);
  })
  .catch((error) => {
    console.log(error);
    return 123;  // ğŸ‘ˆ Return nilai dari .catch()
  })
  .then((x) => {   // ğŸ‘ˆ Terima nilai dari .catch()
    console.log('This will run no matter what', x);
  });
```

### ğŸ–¥ï¸ Output Console (ketika error = true):
```
Error: Something went wrong
This will run no matter what 123
```

### ğŸ“š Penjelasan:

**Flow ketika error:**
```
reject â†’ .catch() â†’ return 123 â†’ .then(x) â†’ console.log(x)
```

- `.catch()` me-return nilai `123`
- Nilai `123` masuk ke parameter `x` di `.then()` berikutnya
- Console log menampilkan: "This will run no matter what 123"

**ğŸ’¡ Catatan:** Ini jarang digunakan dalam praktik, tapi penting untuk memahami mekanismenya!

---

<a name="kesimpulan"></a>
## ğŸ“ Kesimpulan

### âœ… Apa yang Sudah Dipelajari:

1. **Promise Basics**
   - Cara membuat promise
   - Resolve dan reject

2. **Promise Chaining**
   - Menggunakan multiple `.then()`
   - Return value antar `.then()`
   - Data mengalir dari satu `.then()` ke `.then()` berikutnya

3. **Error Handling**
   - Menggunakan `.catch()` untuk menangkap error
   - `.catch()` menangkap error dari semua `.then()` sebelumnya
   - `.then()` setelah `.catch()` tetap berjalan

4. **Advanced Concepts**
   - Return value dari `.catch()`
   - Chain bisa sepanjang yang dibutuhkan

### ğŸ¯ Keuntungan Promise Chaining:

| Keuntungan | Penjelasan |
|-----------|-----------|
| ğŸ§¹ **Clean Code** | Menghindari callback hell |
| ğŸ“Š **Readable** | Code mudah dibaca dan diikuti |
| ğŸ”§ **Maintainable** | Mudah untuk di-maintenance |
| âš¡ **Scalable** | Mudah menambah step baru |

### ğŸš€ Next Steps:

- âœ¨ Pelajari **async/await** (syntax modern untuk handle promise)
- ğŸ”„ Pelajari **Promise.all()** (handle multiple promise sekaligus)
- ğŸ¯ Praktikkan dengan real API calls (fetch)

### ğŸ“Œ Key Takeaways:

> **"Apapun yang di-return dari .then() akan masuk ke .then() berikutnya"**

> **".catch() menangkap semua error dari .then() sebelumnya"**

> **".then() setelah .catch() akan tetap berjalan"**

---

## ğŸ‰ Selamat!

Kamu sudah menguasai Promise Chaining! Terus berlatih dan eksperimen dengan kode untuk memahami lebih dalam.

**Happy Coding! ğŸ’»âœ¨**

---

*Dokumentasi dibuat untuk keperluan belajar pribadi*
