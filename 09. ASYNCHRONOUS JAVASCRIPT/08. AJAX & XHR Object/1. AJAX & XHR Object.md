# ğŸ“š Dokumentasi XHR & AJAX untuk Pemula

> **Catatan Pribadi**: Dokumentasi ini dibuat untuk memahami cara kerja XMLHttpRequest (XHR) dan AJAX dalam JavaScript secara bertahap.

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Apa itu XMLHttpRequest?](#apa-itu-xmlhttprequest)
- [Apa itu AJAX?](#apa-itu-ajax)
- [Bagaimana Cara Kerjanya?](#bagaimana-cara-kerjanya)
- [Ready State Property](#ready-state-property)
- [Status Code HTTP](#status-code-http)
- [Praktek 1: Fetch Data dari File JSON Lokal](#praktek-1-fetch-data-dari-file-json-lokal)
- [Praktek 2: Fetch Data dari API GitHub](#praktek-2-fetch-data-dari-api-github)
- [Catatan Penting](#catatan-penting)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

XMLHttpRequest adalah cara lama (tapi masih penting untuk dipelajari) untuk membuat HTTP request di JavaScript. Meskipun sekarang sudah ada **Fetch API** yang lebih modern dan mudah, memahami XHR tetap penting karena:

- âœ… Banyak kode legacy (kode lama) yang masih menggunakannya
- âœ… Membantu memahami konsep dasar AJAX
- âœ… Beberapa situasi masih memerlukan XHR untuk kompatibilitas browser lama

---

<a name="apa-itu-xmlhttprequest"></a>
## ğŸ“– Apa itu XMLHttpRequest?

**XMLHttpRequest (XHR)** adalah objek JavaScript bawaan browser yang memungkinkan kita membuat HTTP request. 

### ğŸ” Fakta Menarik:

- Nama mengandung "XML" karena dulu format data populer adalah XML
- Sekarang kita hampir selalu menggunakan **JSON** (lebih simpel dan bersih)
- XHR sedikit lebih rumit daripada Fetch API, tapi tetap straightforward

### ğŸ’¡ Kegunaan:

> **XMLHttpRequest memungkinkan kita membuat request ke server tanpa refresh halaman, membuat webpage menjadi lebih dinamis!**

---

<a name="apa-itu-ajax"></a>
## ğŸŒ Apa itu AJAX?

**AJAX** = **A**synchronous **J**avaScript **A**nd **X**ML

### ğŸ“Œ Penjelasan:

- **Asynchronous**: Request terjadi di background tanpa mengganggu user
- **JavaScript**: Bahasa yang kita gunakan
- **XML**: Format data lama (sekarang diganti JSON)

### âš¡ Kenapa AJAX Penting?

Sebelum AJAX, setiap kali kita butuh data baru dari server, halaman harus **refresh seluruhnya**. Dengan AJAX, kita bisa:

- ğŸ”„ Update sebagian halaman saja
- âš¡ Pengalaman user lebih cepat dan smooth
- ğŸ’¾ Hemat bandwidth karena tidak reload seluruh halaman

---

<a name="bagaimana-cara-kerjanya"></a>
## ğŸ”§ Bagaimana Cara Kerjanya?

### ğŸ“Š Diagram Alur:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SERVER                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–²â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                       â”‚
         â”‚ XmlHttpRequest                        â”‚ JSON/XML
         â”‚                                       â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”                           â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Request  â”‚                           â”‚  Response  â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                                       â”‚
         â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ AJAX ENGINE  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                    â”‚  JS Call    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”
                    â”‚   CLIENT    â”‚
                    â”‚(YOUR BROWSER)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ“ Alur Kerja:

1. **Common Request & Response**: Request-response normal (saat kita buka/refresh halaman)
2. **JS Call**: Kita panggil XHR dari JavaScript kita
3. **AJAX Engine**: Browser memproses request di background
4. **XmlHttpRequest**: Kirim request ke server
5. **JSON/XML Response**: Server kirim data balik
6. **HTML Response**: Update sebagian halaman dengan data baru

---

<a name="ready-state-property"></a>
## ğŸ”„ Ready State Property

XMLHttpRequest memiliki property `readyState` yang menunjukkan status request. Ada **5 nilai** yang mungkin:

| Nilai | Status | Penjelasan |
|-------|--------|------------|
| **0** | âŒ UNSENT | Request belum diinisialisasi |
| **1** | ğŸ”Œ OPENED | Koneksi ke server berhasil dibuat |
| **2** | ğŸ“¨ HEADERS_RECEIVED | Request diterima server |
| **3** | â³ LOADING | Server sedang memproses request |
| **4** | âœ… DONE | Request selesai dan response sudah siap |

### ğŸ’¡ Yang Penting:

Kita hanya perlu bertindak saat `readyState === 4` (request selesai)!

---

<a name="status-code-http"></a>
## ğŸš¦ Status Code HTTP

Selain `readyState`, kita juga perlu cek `status` code:

| Status Code | Arti |
|-------------|------|
| **200** | âœ… OK - Request berhasil |
| **404** | âŒ Not Found - Resource tidak ditemukan |
| **500** | âš ï¸ Internal Server Error - Error di server |

### ğŸ¯ Best Practice:

```javascript
if (this.readyState === 4 && this.status === 200) {
  // âœ… Request berhasil, lanjut proses data
}
```

---

<a name="praktek-1-fetch-data-dari-file-json-lokal"></a>
## ğŸ¬ Praktek 1: Fetch Data dari File JSON Lokal

### ğŸ“ Struktur Project:

```
project/
â”‚
â”œâ”€â”€ index.html
â”œâ”€â”€ style.css
â”œâ”€â”€ script.js
â””â”€â”€ movies.json
```

---

### ğŸ“„ **File: index.html**

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>AJAX & XHR Object</title>
  </head>
  <body>
    <h1>AJAX & XHR Object</h1>
    <ul id="results"></ul>

    <script src="./script.js"></script>
  </body>
</html>
```

**ğŸ“ Penjelasan:**
- `<ul id="results">`: Tempat kita akan menampilkan data yang di-fetch
- Struktur HTML sederhana untuk fokus ke JavaScript

---

### ğŸ¨ **File: style.css**

```css
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

*,
*:before,
*:after {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

body {
  font-family: 'Poppins';
  line-height: 1.6;
  padding: 0 40px;
}

h1 {
  text-align: center;
  line-height: 1.3;
}

button {
  display: inline-block;
  background: #333;
  border: 0;
  color: #fff;
  padding: 15px 20px;
  text-decoration: none;
  margin: 20px 0;
  cursor: pointer;
}

button:hover {
  background: #555;
}

ul {
  padding: 0;
}

li {
  list-style: none;
  background: #f4f4f4;
  margin-bottom: 5px;
  padding: 5px;
}
```

**ğŸ“ Penjelasan:**
- Styling sederhana agar tampilan lebih rapi
- Font Poppins untuk tampilan modern
- Background abu-abu untuk setiap list item

---

### ğŸ“Š **File: movies.json**

```json
[
  {
    "title": "The Godfather",
    "year": "1972"
  },
  {
    "title": "Goodfellas",
    "year": 1990
  },
  {
    "title": "A Bronx Tale",
    "year": 1993
  },
  {
    "title": "Casino",
    "year": 1994
  }
]
```

**ğŸ“ Penjelasan:**
- Array JSON berisi daftar film
- Setiap objek memiliki `title` dan `year`
- Data ini akan kita fetch menggunakan XHR

---

### âš™ï¸ **File: script.js (Versi Movies)**

```javascript
// STEP 1: Inisialisasi XMLHttpRequest object
const xhr = new XMLHttpRequest();

// STEP 2: Tentukan method dan URL
xhr.open('GET', './movies.json');

// STEP 3: Event handler untuk menangani perubahan readyState
// readyState memiliki 5 nilai:
// - 0: request not initialized
// - 1: server connection established
// - 2: request received
// - 3: processing request
// - 4: request finished and response is ready
xhr.onreadystatechange = function () {
  // STEP 4: Cek apakah request selesai dan berhasil
  if (this.readyState === 4 && this.status === 200) {
    // STEP 5: Parse JSON response menjadi JavaScript array
    const data = JSON.parse(this.responseText);

    // STEP 6: Loop setiap movie dan tampilkan di halaman
    data.forEach((movie) => {
      // Buat elemen <li>
      const li = document.createElement('li');
      
      // Isi dengan data movie
      li.innerHTML = `<strong>${movie.title}</strong> - ${movie.year}`;
      
      // Tambahkan ke <ul id="results">
      document.querySelector('#results').appendChild(li);
    });
  }
};

// STEP 7: Kirim request
xhr.send();
```

### ğŸ” **Penjelasan Detail Setiap Step:**

#### **STEP 1: Inisialisasi XMLHttpRequest**
```javascript
const xhr = new XMLHttpRequest();
```
- ğŸ¯ Membuat instance baru dari objek XMLHttpRequest
- ğŸ“¦ Objek ini yang akan kita gunakan untuk membuat HTTP request

#### **STEP 2: Open Method**
```javascript
xhr.open('GET', './movies.json');
```
- ğŸ”§ `open()` menerima 2 parameter:
  - **Parameter 1**: Method HTTP (`'GET'`, `'POST'`, dll)
  - **Parameter 2**: URL/path file yang akan di-fetch
- ğŸ“ `'GET'` = kita ingin mengambil data
- ğŸ“ `'./movies.json'` = file lokal di folder yang sama

#### **STEP 3: Event Handler onreadystatechange**
```javascript
xhr.onreadystatechange = function () { ... }
```
- ğŸ”” Event ini di-trigger setiap kali `readyState` berubah
- ğŸ”„ Akan berjalan beberapa kali (nilai 2, 3, 4)
- ğŸ’¡ Kita hanya ambil tindakan saat readyState = 4

#### **STEP 4: Validasi Request**
```javascript
if (this.readyState === 4 && this.status === 200)
```
- âœ… `readyState === 4`: Request sudah selesai
- âœ… `status === 200`: Request berhasil (OK)
- ğŸ¯ Kombinasi keduanya = data siap digunakan!

#### **STEP 5: Parse JSON**
```javascript
const data = JSON.parse(this.responseText);
```
- ğŸ“¥ `this.responseText`: Response dari server dalam bentuk string JSON
- ğŸ”„ `JSON.parse()`: Convert string JSON menjadi JavaScript array/object
- ğŸ’¾ Simpan hasilnya di variable `data`

#### **STEP 6: Loop dan Display Data**
```javascript
data.forEach((movie) => {
  const li = document.createElement('li');
  li.innerHTML = `<strong>${movie.title}</strong> - ${movie.year}`;
  document.querySelector('#results').appendChild(li);
});
```
- ğŸ” Loop setiap movie dalam array
- ğŸ“ Buat elemen `<li>` baru
- âœï¸ Isi dengan title (bold) dan year
- â• Tambahkan ke `<ul id="results">`

#### **STEP 7: Kirim Request**
```javascript
xhr.send();
```
- ğŸš€ Mengirim request ke server/file
- âš¡ Tanpa ini, tidak ada yang terjadi!

---

### âœ¨ **Hasil Akhir:**

Ketika halaman dibuka, akan tampil:

```
â€¢ The Godfather - 1972
â€¢ Goodfellas - 1990
â€¢ A Bronx Tale - 1993
â€¢ Casino - 1994
```

---

<a name="praktek-2-fetch-data-dari-api-github"></a>
## ğŸŒ Praktek 2: Fetch Data dari API GitHub

### ğŸ”„ **File: script.js (Versi GitHub API)**

```javascript
// STEP 1: Inisialisasi XMLHttpRequest object
const xhr = new XMLHttpRequest();

// STEP 2: Tentukan method dan endpoint API
xhr.open('GET', 'https://api.github.com/users/bradtraversy/repos');

// STEP 3: Event handler untuk menangani perubahan readyState
// readyState memiliki 5 nilai:
// - 0: request not initialized
// - 1: server connection established
// - 2: request received
// - 3: processing request
// - 4: request finished and response is ready
xhr.onreadystatechange = function () {
  // STEP 4: Cek apakah request selesai dan berhasil
  if (this.readyState === 4 && this.status === 200) {
    // STEP 5: Parse JSON response
    const data = JSON.parse(this.responseText);

    // STEP 6: Loop setiap repository dan tampilkan
    data.forEach((repo) => {
      const li = document.createElement('li');
      li.innerHTML = `<strong>${repo.name}</strong> - ${repo.description}`;
      document.querySelector('#results').appendChild(li);
    });
  }
};

// STEP 7: Kirim request
xhr.send();
```

### ğŸ” **Perbedaan dengan Praktek 1:**

| Aspek | Praktek 1 (Local JSON) | Praktek 2 (GitHub API) |
|-------|------------------------|------------------------|
| **URL** | `'./movies.json'` | `'https://api.github.com/users/bradtraversy/repos'` |
| **Data** | Array of movies | Array of repositories |
| **Property** | `movie.title`, `movie.year` | `repo.name`, `repo.description` |

### ğŸ“ **Penjelasan API Endpoint:**

```
https://api.github.com/users/bradtraversy/repos
â”‚                         â”‚              â”‚
â”‚                         â”‚              â””â”€ Endpoint: repos
â”‚                         â””â”€ Username: bradtraversy
â””â”€ Base URL: GitHub API
```

- ğŸŒ GitHub API: API publik untuk akses data GitHub
- ğŸ‘¤ `/users/bradtraversy`: Data user tertentu
- ğŸ“¦ `/repos`: Semua repository user tersebut

### ğŸ” **Melihat Response di Browser:**

Untuk melihat data yang kita terima:

1. Buka **DevTools** (F12)
2. Tab **Network**
3. Filter **XHR**
4. Refresh halaman
5. Klik **repos**
6. Tab **Response** menunjukkan data JSON

### ğŸ“Š **Contoh Response Data:**

```json
[
  {
    "name": "react-course",
    "description": "Modern React course project",
    "url": "https://github.com/bradtraversy/react-course",
    ...
  },
  {
    "name": "javascript-basics",
    "description": "JavaScript fundamentals tutorial",
    ...
  }
]
```

---

<a name="catatan-penting"></a>
## ğŸ“Œ Catatan Penting

### âš ï¸ **Hal yang Perlu Diperhatikan:**

1. **Pahami API yang Digunakan**
   - ğŸ“– Setiap API memiliki dokumentasi
   - ğŸ” Cari tahu endpoint yang tersedia
   - ğŸ“Š Pahami struktur data yang dikembalikan

2. **Property Response Bisa Berbeda**
   - JSON dari API berbeda-beda strukturnya
   - Perlu cek dokumentasi atau inspect response
   - Contoh: `repo.name` vs `movie.title`

3. **Batasan API**
   - GitHub API membatasi request per jam
   - Beberapa endpoint butuh authentication
   - Free tier biasanya ada limit

4. **CORS (Cross-Origin Resource Sharing)**
   - Beberapa API memblokir request dari browser
   - Perlu backend proxy atau API yang support CORS
   - GitHub API public aman untuk request langsung

### ğŸ¯ **Best Practices:**

```javascript
// âœ… GOOD: Cek readyState dan status
if (this.readyState === 4 && this.status === 200) {
  // Process data
}

// âŒ BAD: Tidak cek status
if (this.readyState === 4) {
  // Bisa error jika status !== 200
}
```

### ğŸ’¡ **Tips Debugging:**

1. **Console.log response:**
   ```javascript
   console.log(JSON.parse(this.responseText));
   ```

2. **Cek di Network Tab:**
   - Status code
   - Response headers
   - Response body

3. **Handle Error:**
   ```javascript
   if (this.readyState === 4) {
     if (this.status === 200) {
       // Success
     } else {
       console.error('Error:', this.status);
     }
   }
   ```

---

## ğŸ“ Kesimpulan

### âœ¨ **Yang Sudah Dipelajari:**

- âœ… Apa itu XMLHttpRequest dan AJAX
- âœ… Cara kerja request-response
- âœ… Ready state dan status code
- âœ… Fetch data dari file lokal
- âœ… Fetch data dari API eksternal
- âœ… Manipulasi DOM dengan data yang di-fetch

### ğŸš€ **Langkah Selanjutnya:**

- ğŸ“š Pelajari **Fetch API** (cara modern)
- ğŸ”„ Pelajari **async/await** untuk code lebih bersih
- ğŸ› ï¸ Buat project: Chuck Norris Joke Generator
- ğŸŒ Eksplorasi API public lainnya

### ğŸ’ª **Latihan:**

1. Ganti endpoint GitHub dengan username kamu sendiri
2. Tampilkan data tambahan (stars, forks, language)
3. Tambahkan error handling
4. Coba API lain (Weather API, Pokemon API, dll)

---

**ğŸ“ Catatan Akhir:**

> Meskipun sekarang Fetch API lebih populer, memahami XHR memberikan fondasi kuat untuk memahami asynchronous JavaScript dan HTTP request. Terus berlatih! ğŸ’ª

---

*Dokumentasi dibuat untuk pembelajaran pribadi | Dipelajari: January 2026*
