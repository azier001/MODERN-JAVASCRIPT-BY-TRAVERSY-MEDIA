# ğŸ“ Dokumentasi Geolocation API JavaScript

> **Dokumentasi Pribadi untuk Pemula**  
> Belajar menggunakan Geolocation API untuk mendapatkan lokasi pengguna

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Apa itu Geolocation API?](#apa-itu-geolocation-api)
- [Persiapan Awal](#persiapan-awal)
- [Langkah 1: Struktur HTML Dasar](#langkah-1-struktur-html-dasar)
- [Langkah 2: Memahami Navigator Object](#langkah-2-memahami-navigator-object)
- [Langkah 3: Menggunakan getCurrentPosition()](#langkah-3-menggunakan-getcurrentposition)
  - [3.1 Membuat Function Success](#31-membuat-function-success)
  - [3.2 Membuat Function Error](#32-membuat-function-error)
  - [3.3 Membuat Options Object](#33-membuat-options-object)
  - [3.4 Memanggil getCurrentPosition()](#34-memanggil-getcurrentposition)
- [Langkah 4: Menampilkan Koordinat Detail](#langkah-4-menampilkan-koordinat-detail)
- [Langkah 5: Menambahkan Options Lanjutan](#langkah-5-menambahkan-options-lanjutan)
- [Langkah 6: Menggunakan watchPosition()](#langkah-6-menggunakan-watchposition)
  - [6.1 Membuat Target Lokasi](#61-membuat-target-lokasi)
  - [6.2 Membuat Watch Success Function](#62-membuat-watch-success-function)
  - [6.3 Mengaktifkan watchPosition()](#63-mengaktifkan-watchposition)
- [Kode Lengkap](#kode-lengkap)
- [Catatan Penting](#catatan-penting)
- [Troubleshooting](#troubleshooting)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Dokumentasi ini akan membantu Anda memahami cara menggunakan **Geolocation API** untuk mendapatkan lokasi pengguna di browser. Kita akan belajar langkah demi langkah dari yang paling dasar.

<a name="apa-itu-geolocation-api"></a>
## ğŸ“– Apa itu Geolocation API?

**Geolocation API** adalah fitur bawaan browser yang memungkinkan kita mendapatkan lokasi geografis pengguna (dengan izin mereka). API ini tersedia melalui object `navigator.geolocation`.

**Kegunaan:**
- ğŸŒ¦ï¸ Aplikasi cuaca berdasarkan lokasi
- ğŸ” Mencari restoran terdekat
- ğŸ—ºï¸ Navigasi dan peta
- ğŸ“ Tracking lokasi real-time

**Metode Utama:**
1. `getCurrentPosition()` - Mendapatkan lokasi sekali
2. `watchPosition()` - Memantau perubahan lokasi
3. `clearWatch()` - Menghentikan pemantauan

---

<a name="persiapan-awal"></a>
## ğŸ› ï¸ Persiapan Awal

Yang Anda butuhkan:
- âœ… Text editor (VS Code, Sublime, dll)
- âœ… Browser modern (Chrome, Firefox, Edge)
- âœ… File HTML dan JavaScript

---

<a name="langkah-1-struktur-html-dasar"></a>
## ğŸ“„ Langkah 1: Struktur HTML Dasar

Buat file `index.html` dengan struktur sederhana:

```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Geolocation API</title>
</head>
<body>
  <h1>Geolocation API Demo</h1>
  
  <script src="script.js"></script>
</body>
</html>
```

**ğŸ’¡ Catatan:** HTML ini sangat sederhana karena fokus kita adalah JavaScript.

---

<a name="langkah-2-memahami-navigator-object"></a>
## ğŸ” Langkah 2: Memahami Navigator Object

Sebelum coding, mari lihat di mana Geolocation API berada:

1. Buka browser dan buka **Developer Tools** (F12)
2. Ketik di Console:

```javascript
console.log(window.navigator);
```

3. Cari object `geolocation` di dalam navigator
4. Di dalam `geolocation`, Anda akan melihat:
   - `getCurrentPosition`
   - `watchPosition`
   - `clearWatch`

**ğŸ“Œ Penting:** Geolocation API adalah bagian dari browser, bukan library eksternal!

---

<a name="langkah-3-menggunakan-getcurrentposition"></a>
## ğŸ¯ Langkah 3: Menggunakan getCurrentPosition()

Metode ini digunakan untuk mendapatkan lokasi pengguna **satu kali**.

<a name="31-membuat-function-success"></a>
### 3.1 Membuat Function Success âœ…

Function ini dipanggil ketika lokasi **berhasil** didapatkan:

```javascript
// getCurrentPosition()

function curSuccess(pos) {
  console.log(pos);
}
```

**Apa yang terjadi:**
- Parameter `pos` berisi object posisi
- Kita log object tersebut ke console

<a name="32-membuat-function-error"></a>
### 3.2 Membuat Function Error âŒ

Function ini dipanggil ketika terjadi **error**:

```javascript
function curError(err) {
  console.log(`Error: ${err.code} - ${err.message}`);
}
```

**Apa yang terjadi:**
- Parameter `err` berisi informasi error
- `err.code` = kode error (angka)
- `err.message` = pesan error (teks)

<a name="33-membuat-options-object"></a>
### 3.3 Membuat Options Object âš™ï¸

Object untuk konfigurasi (untuk saat ini kosong):

```javascript
const curOptions = {};
```

<a name="34-memanggil-getcurrentposition"></a>
### 3.4 Memanggil getCurrentPosition() ğŸš€

Sekarang panggil metode dengan 3 parameter:

```javascript
navigator.geolocation.getCurrentPosition(curSuccess, curError, curOptions);
```

**Parameter urutan:**
1. Success callback
2. Error callback
3. Options object

**ğŸ‰ Coba jalankan!** Browser akan meminta izin lokasi. Klik **Allow**.

---

<a name="langkah-4-menampilkan-koordinat-detail"></a>
## ğŸ“Š Langkah 4: Menampilkan Koordinat Detail

Sekarang kita tampilkan **latitude**, **longitude**, dan **akurasi**:

**Update function `curSuccess`:**

```javascript
function curSuccess(pos) {
  const coords = pos.coords;

  console.log(`Latitude: ${coords.latitude}`);
  console.log(`Longitude: ${coords.longitude}`);
  console.log(`Within: ${coords.accuracy} meters`);
}
```

**Penjelasan:**
- `pos.coords` = object yang berisi koordinat
- `coords.latitude` = garis lintang
- `coords.longitude` = garis bujur
- `coords.accuracy` = akurasi dalam meter

**Output contoh:**
```
Latitude: -7.5591
Longitude: 110.8246
Within: 23 meters
```

---

<a name="langkah-5-menambahkan-options-lanjutan"></a>
## âš™ï¸ Langkah 5: Menambahkan Options Lanjutan

Update `curOptions` dengan konfigurasi lengkap:

```javascript
const curOptions = {
  enableHighAccuracy: true, // Use GPS if available
  timeout: 5000, // Time to wait to stop trying for location
  maximumAge: 0, // Do not use a cached position
};
```

**Penjelasan setiap option:**

| Option | Nilai | Fungsi |
|--------|-------|--------|
| `enableHighAccuracy` | `true` | Gunakan GPS untuk akurasi lebih tinggi |
| `timeout` | `5000` | Waktu tunggu maksimal (5 detik) |
| `maximumAge` | `0` | Jangan gunakan cache, selalu ambil data baru |

---

<a name="langkah-6-menggunakan-watchposition"></a>
## ğŸ‘€ Langkah 6: Menggunakan watchPosition()

Metode ini untuk **memantau** perubahan lokasi secara real-time.

<a name="61-membuat-target-lokasi"></a>
### 6.1 Membuat Target Lokasi ğŸ¯

Buat object target (tujuan):

```javascript
// watchPosition()

const target = {
  latitude: 41.3874387,
  longitude: -71.394839,
};
```

**ğŸ’¡ Catatan:** Ganti dengan koordinat yang Anda inginkan.

<a name="62-membuat-watch-success-function"></a>
### 6.2 Membuat Watch Success Function ğŸ”„

```javascript
function watchSuccess(pos) {
  const coords = pos.coords;
  console.log(coords);

  if (
    target.latitude === coords.latitude &&
    target.longitude === coords.longitude
  ) {
    console.log('You have reached your destination!');
    navigator.geolocation.clearWatch(id);
  }
}
```

**Apa yang terjadi:**
1. Setiap kali lokasi berubah, function ini dipanggil
2. Cek apakah lokasi sekarang = target
3. Jika ya, tampilkan pesan dan hentikan watch

**Function Error:**

```javascript
function watchError(err) {
  console.log(`Error: ${err.code} - ${err.message}`);
}
```

**Options:**

```javascript
const watchOptions = {
  enableHighAccuracy: true,
  timeout: 5000,
  maximumAge: 0,
};
```

<a name="63-mengaktifkan-watchposition"></a>
### 6.3 Mengaktifkan watchPosition() ğŸš€

```javascript
const id = navigator.geolocation.watchPosition(
  watchSuccess,
  watchError,
  watchOptions
);
```

**ğŸ“Œ Penting:**
- `watchPosition()` mengembalikan **ID**
- ID digunakan untuk menghentikan watch dengan `clearWatch(id)`

---

<a name="kode-lengkap"></a>
## ğŸ“ Kode Lengkap

```javascript
// ==========================================
// getCurrentPosition()
// ==========================================

function curSuccess(pos) {
  const coords = pos.coords;

  console.log(`Latitude: ${coords.latitude}`);
  console.log(`Longitude: ${coords.longitude}`);
  console.log(`Within: ${coords.accuracy} meters`);
}

function curError(err) {
  console.log(`Error: ${err.code} - ${err.message}`);
}

const curOptions = {
  enableHighAccuracy: true, // Use GPS if available
  timeout: 5000, // Time to wait to stop trying for location
  maximumAge: 0, // Do not use a cached position
};

// Uncomment untuk menjalankan
// navigator.geolocation.getCurrentPosition(curSuccess, curError, curOptions);


// ==========================================
// watchPosition()
// ==========================================

const target = {
  latitude: 41.3874387,
  longitude: -71.394839,
};

function watchSuccess(pos) {
  const coords = pos.coords;
  console.log(coords);

  if (
    target.latitude === coords.latitude &&
    target.longitude === coords.longitude
  ) {
    console.log('You have reached your destination!');
    navigator.geolocation.clearWatch(id);
  }
}

function watchError(err) {
  console.log(`Error: ${err.code} - ${err.message}`);
}

const watchOptions = {
  enableHighAccuracy: true, // Use GPS if available
  timeout: 5000, // Time to wait to stop trying for location
  maximumAge: 0, // Do not use a cached position
};

const id = navigator.geolocation.watchPosition(
  watchSuccess,
  watchError,
  watchOptions
);
```

---

<a name="catatan-penting"></a>
## ğŸ“Œ Catatan Penting

### âœ… Yang Harus Diingat:

1. **Izin Pengguna**
   - Browser akan meminta izin terlebih dahulu
   - Izin disimpan (cached) untuk domain yang sama
   
2. **HTTPS Required**
   - Geolocation API hanya bekerja di HTTPS
   - Atau localhost untuk testing

3. **Akurasi Lokasi**
   - Desktop biasanya kurang akurat
   - Mobile dengan GPS lebih akurat
   - VPN akan mempengaruhi lokasi

4. **3 Method Utama:**
   - `getCurrentPosition()` â†’ Lokasi sekali
   - `watchPosition()` â†’ Pantau terus
   - `clearWatch(id)` â†’ Stop pantau

---

<a name="troubleshooting"></a>
## ğŸ”§ Troubleshooting

### âŒ Error: User denied Geolocation

**Penyebab:** Pengguna menolak izin lokasi

**Solusi:** 
1. Klik icon gembok di address bar
2. Ubah permission lokasi ke "Allow"
3. Refresh halaman

### âŒ Error Code 1: Permission Denied

**Penyebab:** Lokasi diblokir di sistem operasi

**Solusi:**
- **Mac:** System Preferences â†’ Security & Privacy â†’ Location Services â†’ centang Chrome
- **Windows:** Settings â†’ Privacy â†’ Location â†’ centang Chrome

### âŒ Koordinat tidak berubah di watchPosition()

**Solusi:**
- Gunakan mobile device dan bergerak
- Atau gunakan Chrome DevTools untuk simulasi lokasi:
  1. F12 â†’ Console menu (â‹®) â†’ Sensors
  2. Pilih lokasi atau custom coordinates

---

## ğŸ“ Latihan

**Latihan 1:** Buat tombol HTML yang ketika diklik akan menampilkan lokasi

**Latihan 2:** Tampilkan koordinat di halaman HTML, bukan di console

**Latihan 3:** Hitung jarak antara lokasi sekarang dengan target

---

## ğŸ”— Referensi

- [MDN Geolocation API](https://developer.mozilla.org/en-US/docs/Web/API/Geolocation_API)
- [W3Schools Geolocation](https://www.w3schools.com/html/html5_geolocation.asp)

---

**ğŸ“… Dibuat untuk pembelajaran pribadi**  
**ğŸ¯ Level: Pemula**  
**â±ï¸ Waktu belajar: ~30 menit**
