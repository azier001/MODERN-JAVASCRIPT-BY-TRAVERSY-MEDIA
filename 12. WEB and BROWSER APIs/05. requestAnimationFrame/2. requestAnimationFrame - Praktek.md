# ğŸ¬ Dokumentasi requestAnimationFrame untuk Pemula

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Apa itu requestAnimationFrame?](#apa-itu-requestanimationframe)
- [Persiapan Awal](#persiapan-awal)
- [Langkah 1: Membuat Fungsi Step Sederhana](#langkah-1-membuat-fungsi-step-sederhana)
- [Langkah 2: Membuat Animasi Berulang](#langkah-2-membuat-animasi-berulang)
- [Langkah 3: Menggunakan Timestamp](#langkah-3-menggunakan-timestamp)
- [Langkah 4: Menghitung Waktu yang Berlalu](#langkah-4-menghitung-waktu-yang-berlalu)
- [Langkah 5: Membuat Animasi Berhenti](#langkah-5-membuat-animasi-berhenti)
- [Langkah 6: Menganimasikan Gambar](#langkah-6-menganimasikan-gambar)
- [Langkah 7: Menambahkan Rotasi](#langkah-7-menambahkan-rotasi)
- [Langkah 8: Menyesuaikan Kecepatan](#langkah-8-menyesuaikan-kecepatan)
- [Kode Lengkap](#kode-lengkap)
- [Tips dan Trik](#tips-dan-trik)
- [Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Selamat datang di tutorial animasi JavaScript! ğŸ‰

Dalam dokumentasi ini, kita akan belajar cara membuat animasi yang smooth dan profesional menggunakan `requestAnimationFrame`. Tutorial ini dirancang khusus untuk pemula, jadi kita akan belajar **sedikit demi sedikit**.

**Apa yang akan kita buat?**
- âœ¨ Animasi bola yang bergerak dari kiri ke kanan
- ğŸ”„ Bola yang berputar sambil bergerak
- â±ï¸ Kontrol waktu animasi

---

<a name="apa-itu-requestanimationframe"></a>
## ğŸ“– Apa itu requestAnimationFrame?

**`requestAnimationFrame`** adalah method pada object `window` yang sangat powerful untuk membuat animasi.

### ğŸ¤” Kenapa Pakai requestAnimationFrame?

- âœ… Animasi lebih smooth dan natural
- âœ… Lebih efisien (tidak memboroskan resource)
- âœ… Sinkron dengan refresh rate browser
- âœ… Otomatis pause ketika tab tidak aktif

### ğŸ“ Konsep Dasar
```
requestAnimationFrame(callback)
```

Method ini memberitahu browser bahwa kamu ingin membuat animasi, dan browser akan memanggil fungsi callback sebelum **repaint** berikutnya.

> **ğŸ’¡ Apa itu Repaint?**  
> Repaint adalah setiap langkah/frame dalam animasi. Seperti frame dalam film, setiap repaint membuat gambar baru di layar.

---

<a name="persiapan-awal"></a>
## ğŸ› ï¸ Persiapan Awal

### 1ï¸âƒ£ HTML yang Dibutuhkan

Buat file `index.html`:
```html
<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Animasi Bola</title>
</head>
<body>
    <img src="ball.png" alt="Bola" width="100">
    <script src="script.js"></script>
</body>
</html>
```

### 2ï¸âƒ£ Siapkan Gambar

- Siapkan gambar bola (bisa download gambar bola apapun)
- Simpan dengan nama `ball.png` di folder yang sama dengan HTML

### 3ï¸âƒ£ Buat File JavaScript

Buat file `script.js` (kosong dulu, kita akan isi bertahap)

---

<a name="langkah-1-membuat-fungsi-step-sederhana"></a>
## ğŸš€ Langkah 1: Membuat Fungsi Step Sederhana

### ğŸ“Œ Konsep

Kita akan membuat fungsi bernama `step` yang akan dipanggil oleh browser sebelum repaint.

### âœï¸ Kode

Tulis kode berikut di `script.js`:
```javascript
function step() {
  console.log('hello');
}

requestAnimationFrame(step);
```

### ğŸ” Penjelasan

- `function step()` â†’ Fungsi yang akan dijalankan setiap repaint
- `console.log('hello')` â†’ Cetak "hello" di console
- `requestAnimationFrame(step)` â†’ Minta browser untuk panggil fungsi `step` sebelum repaint berikutnya

### ğŸ¯ Hasil

Buka browser dan buka **Console** (tekan F12):
- Kamu akan melihat **"hello" muncul SATU KALI saja**
- Ini karena kita hanya memanggil `requestAnimationFrame` sekali

> **ğŸ’¡ Catatan:** Ini baru animasi yang berjalan sekali. Kita akan buat berulang di langkah berikutnya!

---

<a name="langkah-2-membuat-animasi-berulang"></a>
## ğŸ” Langkah 2: Membuat Animasi Berulang

### ğŸ“Œ Konsep

Agar animasi terus berjalan, kita perlu memanggil `requestAnimationFrame` **di dalam** fungsi `step` itu sendiri. Ini disebut **recursive call** (pemanggilan rekursif).

### âœï¸ Kode

Ubah kode menjadi:
```javascript
function step() {
  console.log('hello');
  requestAnimationFrame(step);  // â† Panggil lagi!
}

requestAnimationFrame(step);
```

### ğŸ” Penjelasan

Sekarang fungsi `step`:
1. Cetak "hello"
2. Minta browser untuk panggil `step` lagi
3. Browser panggil `step` lagi â†’ kembali ke langkah 1
4. Loop terus! ğŸ”„

### ğŸ¯ Hasil

Buka Console:
- **"hello" akan terus muncul!**
- Angka di sebelah kanan menunjukkan berapa kali sudah dipanggil
- Animasi berjalan terus-menerus âš¡

> **âš ï¸ Hati-hati:** Animasi ini akan berjalan terus! Kita akan belajar menghentikannya nanti.

---

<a name="langkah-3-menggunakan-timestamp"></a>
## â° Langkah 3: Menggunakan Timestamp

### ğŸ“Œ Konsep

Callback function di `requestAnimationFrame` otomatis menerima **timestamp** sebagai parameter. Timestamp ini adalah waktu dalam **milidetik** sejak animasi dimulai.

### âœï¸ Kode

Ubah kode menjadi:
```javascript
function step(timestamp) {
  console.log(timestamp);
  requestAnimationFrame(step);
}

requestAnimationFrame(step);
```

### ğŸ” Penjelasan

- `timestamp` â†’ Parameter otomatis dari browser
- Berisi waktu sejak animasi dimulai (dalam milidetik)
- Nilai bertambah terus setiap frame

### ğŸ¯ Hasil

Di Console kamu akan melihat:
```
0.5
16.7
33.3
50.0
...
```

Angka-angka ini adalah **timestamp dalam milidetik**! ğŸ•

---

<a name="langkah-4-menghitung-waktu-yang-berlalu"></a>
## ğŸ“Š Langkah 4: Menghitung Waktu yang Berlalu

### ğŸ“Œ Konsep

Untuk animasi, kita perlu tahu **berapa lama waktu yang sudah berlalu** sejak animasi dimulai. Kita akan menghitung **elapsed time** (waktu yang berlalu).

### âœï¸ Kode
```javascript
let start;  // Waktu mulai (belum diset)

function step(timestamp) {
  // Jika ini pertama kali, simpan waktu mulai
  if (start === undefined) {
    start = timestamp;
  }
  
  // Hitung waktu yang berlalu
  const elapsed = timestamp - start;
  
  console.log(elapsed);
  
  requestAnimationFrame(step);
}

requestAnimationFrame(step);
```

### ğŸ” Penjelasan Baris per Baris
```javascript
let start;
```
- Variabel untuk menyimpan waktu mulai
- Nilai awal: `undefined`
```javascript
if (start === undefined) {
    start = timestamp;
}
```
- **Hanya di frame pertama:** simpan timestamp sebagai waktu mulai
- Frame selanjutnya: skip kondisi ini
```javascript
const elapsed = timestamp - start;
```
- **elapsed** = waktu yang sudah berlalu
- Rumus: waktu sekarang - waktu mulai

### ğŸ¯ Hasil

Di Console:
```
0           â† Frame pertama
16.7        â† 16.7ms telah berlalu
33.3        â† 33.3ms telah berlalu
50.0        â† 50.0ms telah berlalu
```

Sekarang kita punya **timer**! â±ï¸

---

<a name="langkah-5-membuat-animasi-berhenti"></a>
## â¹ï¸ Langkah 5: Membuat Animasi Berhenti

### ğŸ“Œ Konsep

Animasi yang berjalan terus akan membebani browser. Kita perlu membuat animasi **berhenti setelah waktu tertentu**.

### âœï¸ Kode
```javascript
let start;
let done = false;  // Status: apakah animasi selesai?

function step(timestamp) {
  if (start === undefined) {
    start = timestamp;
  }
  
  const elapsed = timestamp - start;
  
  // Jika sudah 5 detik (5000ms), set done = true
  if (elapsed > 5000) {
    done = true;
  }
  
  // Jika done = true, STOP animasi
  if (done) {
    console.log('Animasi selesai!');
    return;  // Keluar dari fungsi, tidak panggil requestAnimationFrame lagi
  }
  
  console.log(elapsed);
  requestAnimationFrame(step);
}

requestAnimationFrame(step);
```

### ğŸ” Penjelasan
```javascript
let done = false;
```
- Variabel untuk status: apakah animasi sudah selesai?
- Awal: `false` (belum selesai)
```javascript
if (elapsed > 5000) {
    done = true;
}
```
- Cek: apakah sudah lewat 5000ms (5 detik)?
- Jika ya: ubah `done` jadi `true`
```javascript
if (done) {
    console.log('Animasi selesai!');
    return;
}
```
- Jika `done = true`: cetak pesan dan **return**
- `return` â†’ keluar dari fungsi
- Karena keluar, `requestAnimationFrame` tidak dipanggil lagi
- **Animasi BERHENTI!** âœ‹

### ğŸ¯ Hasil

- Animasi berjalan selama 5 detik
- Setelah 5 detik: muncul "Animasi selesai!" dan berhenti

> **ğŸ’¡ Tips:** Ubah `5000` menjadi angka lain untuk durasi berbeda (dalam milidetik)

---

<a name="langkah-6-menganimasikan-gambar"></a>
## ğŸ–¼ï¸ Langkah 6: Menganimasikan Gambar

### ğŸ“Œ Konsep

Sekarang saatnya **animasi sungguhan**! Kita akan membuat bola bergerak dari kiri ke kanan menggunakan CSS property `transform: translateX()`.

### ğŸ¨ Tentang Transform TranslateX

`translateX()` adalah CSS property untuk menggeser element secara horizontal:
- `translateX(0px)` â†’ posisi awal
- `translateX(100px)` â†’ geser 100 pixel ke kanan
- `translateX(-50px)` â†’ geser 50 pixel ke kiri

### âœï¸ Kode
```javascript
const image = document.querySelector('img');  // Ambil element gambar
let start;
let done = false;

function step(timestamp) {
  if (start === undefined) {
    start = timestamp;
  }
  
  const elapsed = timestamp - start;
  
  if (elapsed > 5000) {
    done = true;
  }
  
  if (done) {
    return;
  }
  
  // ANIMASI: Gerakkan gambar
  image.style.transform = `translateX(${elapsed / 10}px)`;
  
  requestAnimationFrame(step);
}

requestAnimationFrame(step);
```

### ğŸ” Penjelasan Detail
```javascript
const image = document.querySelector('img');
```
- Ambil element `<img>` dari HTML
- Simpan dalam variabel `image`
```javascript
image.style.transform = `translateX(${elapsed / 10}px)`;
```
Mari kita bedah baris ini:

1. `image.style.transform` â†’ Ubah CSS property `transform`
2. **Template literal** (backtick `` ` ``) â†’ Bisa sisipkan variabel dengan `${}`
3. `translateX(...)` â†’ Fungsi CSS untuk geser horizontal
4. `${elapsed / 10}` â†’ Sisipkan nilai: elapsed dibagi 10
5. `px` â†’ Satuan pixel

**Contoh perhitungan:**
- Frame 1: `elapsed = 0` â†’ `translateX(0px)` â†’ posisi awal
- Frame 2: `elapsed = 16.7` â†’ `translateX(1.67px)` â†’ geser 1.67px
- Frame 60: `elapsed = 1000` â†’ `translateX(100px)` â†’ geser 100px

> **ğŸ¤” Kenapa dibagi 10?**  
> Untuk memperlambat animasi. Tanpa pembagian, bola akan bergerak terlalu cepat!

### ğŸ¯ Hasil

- Bola bergerak dari kiri ke kanan! ğŸ¾â†’
- Bergerak smooth selama 5 detik
- Berhenti setelah 5 detik

**Selamat! Kamu sudah membuat animasi pertamamu!** ğŸ‰

---

<a name="langkah-7-menambahkan-rotasi"></a>
## ğŸ”„ Langkah 7: Menambahkan Rotasi

### ğŸ“Œ Konsep

Kita bisa **kombinasikan beberapa transformasi** sekaligus! Mari tambahkan rotasi agar bola berputar sambil bergerak.

### ğŸ¨ Tentang Rotate

`rotate()` adalah CSS property untuk memutar element:
- `rotate(0deg)` â†’ tidak diputar
- `rotate(90deg)` â†’ putar 90 derajat (Â¼ putaran)
- `rotate(360deg)` â†’ putar 360 derajat (1 putaran penuh)

### âœï¸ Kode
```javascript
const image = document.querySelector('img');
let start;
let done = false;

function step(timestamp) {
  if (start === undefined) {
    start = timestamp;
  }
  
  const elapsed = timestamp - start;
  
  if (elapsed > 5000) {
    done = true;
  }
  
  if (done) {
    return;
  }
  
  // ANIMASI: Gerakkan DAN Putar gambar
  image.style.transform = `translateX(${elapsed / 10}px) rotate(${elapsed / 10}deg)`;
  
  requestAnimationFrame(step);
}

requestAnimationFrame(step);
```

### ğŸ” Penjelasan
```javascript
`translateX(${elapsed / 10}px) rotate(${elapsed / 10}deg)`
```

Sekarang ada **DUA transformasi**:

1. **`translateX(${elapsed / 10}px)`** 
   - Geser horizontal
   - Menggunakan satuan `px` (pixel)

2. **`rotate(${elapsed / 10}deg)`**
   - Putar gambar
   - Menggunakan satuan `deg` (degree/derajat)

Keduanya menggunakan nilai yang sama (`elapsed / 10`), jadi:
- Kecepatan gerak = kecepatan putar
- Sinkron! ğŸµ

**Contoh:**
- `elapsed = 1000` â†’ `translateX(100px) rotate(100deg)`
- Geser 100px ke kanan DAN putar 100 derajat

### ğŸ¯ Hasil

- Bola bergerak dari kiri ke kanan â¡ï¸
- Sambil berputar ğŸ”„
- Smooth dan sinkron!

**Keren kan?** ğŸ¤©

---

<a name="langkah-8-menyesuaikan-kecepatan"></a>
## âš¡ Langkah 8: Menyesuaikan Kecepatan

### ğŸ“Œ Konsep

Kamu bisa mengatur kecepatan animasi dengan **mengubah angka pembagi**!

### ğŸ§® Rumus Kecepatan
```
Posisi/Rotasi = elapsed / PEMBAGI
```

- **Pembagi BESAR** = animasi LAMBAT ğŸ¢
- **Pembagi KECIL** = animasi CEPAT ğŸ‡

### âœï¸ Kode Lambat (Pembagi 20)
```javascript
image.style.transform = `translateX(${elapsed / 20}px) rotate(${elapsed / 20}deg)`;
```

### âœï¸ Kode Cepat (Pembagi 5)
```javascript
image.style.transform = `translateX(${elapsed / 5}px) rotate(${elapsed / 5}deg)`;
```

### ğŸ“Š Perbandingan Kecepatan

| Waktu (ms) | Pembagi 20 | Pembagi 10 | Pembagi 5 |
|------------|-----------|-----------|----------|
| 1000       | 50px      | 100px     | 200px    |
| 2000       | 100px     | 200px     | 400px    |
| 3000       | 150px     | 300px     | 600px    |

### ğŸ’¡ Kecepatan Berbeda untuk Gerak dan Rotasi

Kamu juga bisa membuat gerak dan rotasi dengan kecepatan berbeda:
```javascript
image.style.transform = `translateX(${elapsed / 10}px) rotate(${elapsed / 5}deg)`;
```

Ini akan membuat:
- Gerak: kecepatan normal
- Rotasi: 2x lebih cepat! ğŸŒªï¸

---

<a name="kode-lengkap"></a>
## ğŸ“ Kode Lengkap

Berikut adalah kode lengkap untuk `script.js`:
```javascript
const image = document.querySelector('img');
let start;
let done = false;

function step(timestamp) {
  // Set waktu mulai (hanya sekali di frame pertama)
  if (start === undefined) {
    start = timestamp;
  }

  // Hitung waktu yang berlalu
  const elapsed = timestamp - start;

  // Berhenti setelah 5 detik
  if (elapsed > 5000) {
    done = true;
  }

  // Jika selesai, stop animasi
  if (done) {
    return;
  }

  // Animasi: gerakkan dan putar gambar
  image.style.transform = `translateX(${elapsed / 10}px) rotate(${elapsed / 10}deg)`;

  // Panggil lagi untuk frame berikutnya
  requestAnimationFrame(step);
}

// Mulai animasi
requestAnimationFrame(step);
```

### ğŸ¨ Struktur Folder
```
ğŸ“ project-animasi/
  â”œâ”€â”€ ğŸ“„ index.html
  â”œâ”€â”€ ğŸ“„ script.js
  â””â”€â”€ ğŸ–¼ï¸ ball.png
```

---

<a name="tips-dan-trik"></a>
## ğŸ’¡ Tips dan Trik

### ğŸ¯ Mengubah Durasi

Ganti `5000` dengan angka lain:
```javascript
if (elapsed > 3000) {  // 3 detik
if (elapsed > 10000) { // 10 detik
```

### ğŸ¯ Mengubah Arah Gerak

**Ke bawah:**
```javascript
translateY(${elapsed / 10}px)  // Ganti X jadi Y
```

**Diagonal:**
```javascript
translate(${elapsed / 10}px, ${elapsed / 10}px)  // X dan Y sekaligus
```

### ğŸ¯ Animasi Loop (Berulang Terus)

Hapus bagian pengecekan `done`:
```javascript
// Hapus bagian ini:
// if (elapsed > 5000) {
//   done = true;
// }
// 
// if (done) {
//   return;
// }
```

### ğŸ¯ Multiple Gambar
```javascript
const images = document.querySelectorAll('img');
images.forEach((img, index) => {
  img.style.transform = `translateX(${elapsed / 10 * (index + 1)}px)`;
});
```

### ğŸ¯ Easing (Percepatan/Perlambatan)

Untuk efek yang lebih natural, gunakan fungsi easing:
```javascript
// Ease Out (mulai cepat, makin lambat)
const easeOut = elapsed => elapsed * (2 - elapsed / 5000);

image.style.transform = `translateX(${easeOut(elapsed) / 10}px)`;
```

---

<a name="kesimpulan"></a>
## ğŸ“ Kesimpulan

### âœ… Apa yang Sudah Kita Pelajari

1. âœ¨ **requestAnimationFrame** â†’ Method untuk animasi smooth
2. â° **Timestamp** â†’ Waktu sejak animasi dimulai
3. ğŸ“Š **Elapsed Time** â†’ Menghitung waktu yang berlalu
4. ğŸ›‘ **Stopping Animation** â†’ Menghentikan animasi dengan kondisi
5. ğŸ¨ **Transform** â†’ Memanipulasi posisi dan rotasi element
6. ğŸ”„ **Recursive Call** â†’ Membuat animasi berulang
7. âš¡ **Speed Control** â†’ Mengatur kecepatan animasi

### ğŸš€ Langkah Selanjutnya

Sekarang kamu sudah paham dasar-dasarnya! Cobalah:

- ğŸ® Buat game sederhana dengan animasi
- ğŸŒˆ Kombinasikan dengan perubahan warna
- ğŸ“± Buat animasi interaktif (pakai mouse/keyboard)
- ğŸ¨ Gabungkan dengan Canvas API untuk grafis lebih kompleks

### ğŸ‰ Selamat!

Kamu telah menyelesaikan tutorial **requestAnimationFrame**! 

Keep coding and have fun! ğŸš€âœ¨

---

**ğŸ“š Dibuat dengan â¤ï¸ untuk pembelajaran pribadi**

*Versi: 1.0 | Terakhir diupdate: 2026*
</artifact>
