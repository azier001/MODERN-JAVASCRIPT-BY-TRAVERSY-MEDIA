# ğŸ¬ Dokumentasi requestAnimationFrame untuk Pemula

> **Catatan Pribadi**: Dokumentasi ini dibuat untuk memahami cara kerja animasi di JavaScript menggunakan `requestAnimationFrame()` step by step.

---

## ğŸ“‹ Daftar Isi

- [Pengenalan](#pengenalan)
- [Apa itu requestAnimationFrame?](#apa-itu-requestanimationframe)
- [Konsep Repaint](#konsep-repaint)
- [Membuat Fungsi Step Pertama](#membuat-fungsi-step-pertama)
- [Membuat Animasi Berulang (Recursive)](#membuat-animasi-berulang-recursive)
- [Memahami Timestamp](#memahami-timestamp)
- [Menghitung Waktu yang Berlalu (Elapsed Time)](#menghitung-waktu-yang-berlalu-elapsed-time)
- [Menghentikan Animasi](#menghentikan-animasi)
- [Menganimasikan Elemen (Transform)](#menganimasikan-elemen-transform)
- [Kode Lengkap](#kode-lengkap)
- [Penjelasan Kode Step by Step](#penjelasan-kode-step-by-step)
- [Variasi Animasi](#variasi-animasi)
- [Tips untuk Pemula](#tips-untuk-pemula)
- [Referensi Eksternal](#referensi-eksternal)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Dalam tutorial ini, kita akan belajar tentang **animasi di JavaScript** menggunakan method yang sangat powerful yaitu `requestAnimationFrame()`. Kita akan membuat animasi sederhana berupa **bola yang bergerak dan berputar** melintasi layar.

**Yang akan kita pelajari:**
- âœ… Cara kerja `requestAnimationFrame()`
- âœ… Menggunakan timestamp untuk mengontrol animasi
- âœ… Menggunakan CSS `transform` untuk animasi
- âœ… Menghentikan animasi setelah waktu tertentu

---

<a name="apa-itu-requestanimationframe"></a>
## ğŸ“– Apa itu requestAnimationFrame?

`requestAnimationFrame()` adalah **method pada window object** yang sangat powerful untuk membuat animasi.

### ğŸ” Fungsinya:
- Memberitahu browser bahwa kita ingin melakukan animasi
- Meminta browser untuk memanggil fungsi tertentu untuk **update animasi sebelum repaint berikutnya**
- Method ini menerima **callback function** sebagai argumen

**Syntax:**
```javascript
requestAnimationFrame(callbackFunction);
```

---

<a name="konsep-repaint"></a>
## ğŸ¨ Konsep Repaint

### Apa itu Repaint?

**Repaint** adalah proses dimana browser atau layar **menggambar ulang** tampilan.

ğŸ’¡ **Analogi sederhana:**
- Bayangkan animasi seperti flipbook (buku gambar yang dibalik cepat)
- Setiap halaman = 1 repaint
- Semakin cepat dibalik = animasi semakin smooth

Dalam animasi, **setiap step/langkah** adalah satu repaint. Browser akan terus melakukan repaint untuk menciptakan ilusi gerakan.

---

<a name="membuat-fungsi-step-pertama"></a>
## ğŸš€ Membuat Fungsi Step Pertama

### Langkah 1: Membuat Fungsi Step Sederhana

```javascript
function step() {
  console.log("hello");
}

requestAnimationFrame(step);
```

**Apa yang terjadi?**
- âœ… Fungsi `step` dibuat
- âœ… `requestAnimationFrame(step)` dipanggil
- âœ… Browser memanggil fungsi `step` **sebelum repaint berikutnya**
- âœ… **Hasil:** Console akan menampilkan "hello" **HANYA SEKALI**

### ğŸ“Œ Kenapa hanya sekali?

Karena kita hanya meminta browser untuk memanggil fungsi `step` **satu kali** sebelum repaint berikutnya. Setelah itu, tidak ada perintah lagi.

---

<a name="membuat-animasi-berulang-recursive"></a>
## ğŸ” Membuat Animasi Berulang (Recursive)

Untuk membuat animasi yang **terus berjalan**, kita perlu memanggil `requestAnimationFrame()` **di dalam fungsi step itu sendiri** (recursive).

```javascript
function step() {
  console.log("hello");
  requestAnimationFrame(step); // ğŸ‘ˆ Panggil lagi di dalam fungsi
}

requestAnimationFrame(step);
```

**Apa yang terjadi sekarang?**
- âœ… Fungsi `step` dipanggil
- âœ… Console log "hello"
- âœ… Fungsi `step` memanggil `requestAnimationFrame(step)` lagi
- âœ… Fungsi `step` dipanggil lagi
- âœ… **Loop terus berlanjut!** ğŸ”„

**Hasil:** Console akan terus menampilkan "hello" berkali-kali dengan nomor counter yang terus bertambah.

---

<a name="memahami-timestamp"></a>
## â±ï¸ Memahami Timestamp

### Callback Function Menerima Parameter Timestamp

Fungsi callback yang kita pass ke `requestAnimationFrame()` **otomatis menerima parameter `timestamp`**.

```javascript
function step(timestamp) {
  console.log(timestamp);
  requestAnimationFrame(step);
}

requestAnimationFrame(step);
```

### ğŸ“Š Apa itu Timestamp?

- **Timestamp** adalah **waktu dalam milliseconds** sejak animasi dimulai
- Nilai ini **terus bertambah** seiring waktu berjalan
- Sangat berguna untuk mengontrol kecepatan dan durasi animasi

**Contoh output:**
```
16.234
32.567
48.891
65.123
...
```

---

<a name="menghitung-waktu-yang-berlalu-elapsed-time"></a>
## â³ Menghitung Waktu yang Berlalu (Elapsed Time)

### Kenapa Perlu Elapsed Time?

Kita ingin tahu **berapa lama waktu yang sudah berlalu** sejak animasi dimulai untuk:
- Mengontrol kecepatan animasi
- Menghentikan animasi setelah durasi tertentu
- Membuat animasi yang konsisten

### ğŸ› ï¸ Cara Menghitung Elapsed Time

**Langkah 1:** Buat variabel `start` dan `done`

```javascript
let start; // Belum didefinisikan (undefined)
let done = false; // Status animasi
```

**Langkah 2:** Set nilai `start` di awal

```javascript
function step(timestamp) {
  if (start === undefined) {
    start = timestamp; // ğŸ‘ˆ Set start di iterasi pertama
  }
  
  // Hitung waktu yang berlalu
  const elapsed = timestamp - start;
  
  console.log(elapsed);
  
  requestAnimationFrame(step);
}
```

### ğŸ“ Penjelasan:

| Variabel | Fungsi | Contoh Nilai |
|----------|--------|--------------|
| `start` | Menyimpan timestamp awal | `16.234` |
| `timestamp` | Waktu saat ini | `1016.234` |
| `elapsed` | Waktu yang berlalu (sekarang - awal) | `1000` ms = 1 detik |

**Contoh output:**
```
0
16.7
33.4
50.1
... (terus bertambah)
```

---

<a name="menghentikan-animasi"></a>
## â¹ï¸ Menghentikan Animasi

### Cara Menghentikan Setelah Waktu Tertentu

Kita bisa menggunakan **elapsed time** untuk menghentikan animasi.

**Contoh: Hentikan setelah 5 detik (5000 ms)**

```javascript
let start;
let done = false;

function step(timestamp) {
  if (start === undefined) {
    start = timestamp;
  }
  
  const elapsed = timestamp - start;
  
  // Cek jika sudah lebih dari 5 detik
  if (elapsed > 5000) {
    done = true; // ğŸ‘ˆ Tandai animasi selesai
  }
  
  // Jika selesai, stop animasi
  if (done) {
    return; // ğŸ‘ˆ Keluar dari fungsi, tidak memanggil requestAnimationFrame lagi
  }
  
  console.log(elapsed);
  
  requestAnimationFrame(step);
}

requestAnimationFrame(step);
```

### ğŸ”‘ Konsep Penting:

1. **`elapsed > 5000`** â†’ Cek apakah sudah 5 detik (5000 milliseconds)
2. **`done = true`** â†’ Tandai bahwa animasi harus berhenti
3. **`return`** â†’ Keluar dari fungsi, **tidak memanggil** `requestAnimationFrame()` lagi
4. **Animasi berhenti!** âœ‹

---

<a name="menganimasikan-elemen-transform"></a>
## ğŸ¨ Menganimasikan Elemen (Transform)

### Menggunakan CSS Transform

Sekarang kita akan **menganimasikan elemen gambar** menggunakan CSS property `transform`.

#### ğŸ“Œ Transform Properties yang Digunakan:

1. **`translateX()`** â†’ Menggerakkan elemen ke kanan/kiri
2. **`rotate()`** â†’ Memutar elemen

### Langkah 1: Ambil Elemen Image

```javascript
const image = document.querySelector('img');
```

### Langkah 2: Update Transform di Setiap Step

```javascript
function step(timestamp) {
  if (start === undefined) {
    start = timestamp;
  }
  
  const elapsed = timestamp - start;
  
  if (elapsed > 5000) {
    done = true;
  }
  
  if (done) {
    return;
  }
  
  // ğŸ¨ Animasi! Ubah posisi dan rotasi
  image.style.transform = `translateX(${elapsed / 10}px) rotate(${elapsed / 10}deg)`;
  
  requestAnimationFrame(step);
}
```

### ğŸ” Penjelasan Detail:

#### **translateX()**
```javascript
translateX(${elapsed / 10}px)
```
- `elapsed / 10` â†’ Membagi waktu dengan 10 untuk **memperlambat** gerakan
- Semakin besar pembagi â†’ semakin lambat
- Semakin kecil pembagi â†’ semakin cepat
- Contoh: Jika `elapsed = 1000` ms â†’ `translateX(100px)` â†’ bola bergerak 100px ke kanan

#### **rotate()**
```javascript
rotate(${elapsed / 10}deg)
```
- `deg` = **degrees** (derajat)
- Memutar elemen searah jarum jam
- Contoh: Jika `elapsed = 1000` ms â†’ `rotate(100deg)` â†’ bola berputar 100 derajat

### ğŸ’¡ Mengapa `/ 10`?

Angka `10` adalah **speed controller**:
- **Lebih besar** (misal `/20`) â†’ animasi **lebih lambat**
- **Lebih kecil** (misal `/5`) â†’ animasi **lebih cepat**

---

<a name="kode-lengkap"></a>
## ğŸ“ Kode Lengkap

### HTML (index.html)
```html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RequestAnimationFrame Demo</title>
</head>
<body>
  <img src="ball.png" alt="Ball">
  <script src="script.js"></script>
</body>
</html>
```

### JavaScript (script.js)
```javascript
const image = document.querySelector('img');
let start;
let done = false;

function step(timestamp) {
  if (start === undefined) {
    start = timestamp;
  }

  const elapsed = timestamp - start;

  if (elapsed > 5000) {
    done = true;
  }

  if (done) {
    return;
  }

  image.style.transform = `translateX(${elapsed / 10}px) rotate(${elapsed / 10}deg)`;

  requestAnimationFrame(step);
}

requestAnimationFrame(step);
```

---

<a name="penjelasan-kode-step-by-step"></a>
## ğŸ”¬ Penjelasan Kode Step by Step

### 1ï¸âƒ£ Setup Awal
```javascript
const image = document.querySelector('img');
let start;
let done = false;
```

| Kode | Penjelasan |
|------|------------|
| `const image` | Ambil elemen `<img>` dari DOM |
| `let start` | Variabel untuk menyimpan waktu mulai (undefined awalnya) |
| `let done = false` | Flag untuk menandai apakah animasi selesai |

---

### 2ï¸âƒ£ Fungsi Step
```javascript
function step(timestamp) {
```
- Fungsi yang akan dipanggil berulang kali
- Parameter `timestamp` otomatis diberikan oleh `requestAnimationFrame()`

---

### 3ï¸âƒ£ Inisialisasi Start Time
```javascript
if (start === undefined) {
  start = timestamp;
}
```
- **Hanya dijalankan sekali** (di iterasi pertama)
- Menyimpan timestamp awal sebagai titik referensi

---

### 4ï¸âƒ£ Hitung Elapsed Time
```javascript
const elapsed = timestamp - start;
```
- Menghitung **berapa lama** sejak animasi dimulai
- Hasilnya dalam **milliseconds**

---

### 5ï¸âƒ£ Kondisi Berhenti
```javascript
if (elapsed > 5000) {
  done = true;
}
```
- Jika sudah lebih dari 5000 ms (5 detik)
- Set `done = true`

---

### 6ï¸âƒ£ Stop Animasi
```javascript
if (done) {
  return;
}
```
- Jika `done` bernilai `true`
- **Keluar dari fungsi** tanpa memanggil `requestAnimationFrame()` lagi
- **Animasi berhenti**

---

### 7ï¸âƒ£ Update Animasi
```javascript
image.style.transform = `translateX(${elapsed / 10}px) rotate(${elapsed / 10}deg)`;
```
- Ubah CSS `transform` setiap frame
- **translateX**: Gerakkan ke kanan
- **rotate**: Putar elemen
- Kecepatan dikontrol dengan `/10`

---

### 8ï¸âƒ£ Request Frame Berikutnya
```javascript
requestAnimationFrame(step);
```
- Panggil fungsi `step` lagi untuk frame berikutnya
- **Membuat loop animasi**

---

### 9ï¸âƒ£ Mulai Animasi
```javascript
requestAnimationFrame(step);
```
- Pemanggilan **pertama kali** di luar fungsi
- Memulai seluruh animasi

---

<a name="variasi-animasi"></a>
## ğŸ¨ Variasi Animasi

### 1. Mengubah Arah (Vertikal)
```javascript
// Gerak ke bawah
image.style.transform = `translateY(${elapsed / 10}px)`;
```

### 2. Mengubah Kecepatan
```javascript
// Lebih cepat (bagi dengan angka lebih kecil)
image.style.transform = `translateX(${elapsed / 5}px) rotate(${elapsed / 5}deg)`;

// Lebih lambat (bagi dengan angka lebih besar)
image.style.transform = `translateX(${elapsed / 20}px) rotate(${elapsed / 20}deg)`;
```

### 3. Kombinasi Gerakan
```javascript
// Gerak diagonal + rotasi
image.style.transform = `
  translateX(${elapsed / 10}px) 
  translateY(${elapsed / 15}px) 
  rotate(${elapsed / 10}deg)
`;
```

### 4. Mengubah Durasi
```javascript
// Berhenti setelah 2 detik
if (elapsed > 2000) {
  done = true;
}

// Berhenti setelah 10 detik
if (elapsed > 10000) {
  done = true;
}
```

---

<a name="tips-untuk-pemula"></a>
## ğŸ’¡ Tips untuk Pemula

### âœ… Yang Harus Diingat:

1. **`requestAnimationFrame()` hanya jalan sekali** kecuali dipanggil lagi di dalam callback
2. **Timestamp dalam milliseconds** (1000 ms = 1 detik)
3. **`elapsed = timestamp - start`** untuk hitung waktu yang berlalu
4. **`return` untuk stop animasi** (jangan panggil `requestAnimationFrame` lagi)
5. **Bagi `elapsed` untuk kontrol kecepatan** (angka besar = lambat)

### âš ï¸ Kesalahan Umum:

| Kesalahan | Solusi |
|-----------|--------|
| Animasi terlalu cepat | Bagi `elapsed` dengan angka lebih besar |
| Animasi tidak berhenti | Pastikan ada `return` saat `done = true` |
| `start` tidak terdefinisi | Cek kondisi `if (start === undefined)` |
| Rotate tidak muncul | Pastikan pakai `deg` bukan `px` |

### ğŸ¯ Latihan:

1. Coba ubah kecepatan animasi (ganti angka pembagi)
2. Coba ubah durasi animasi (ganti 5000 ke angka lain)
3. Coba kombinasi `translateX` dan `translateY`
4. Coba tambahkan transform lain seperti `scale()`

---

<a name="referensi-eksternal"></a>
## ğŸ“š Referensi Eksternal

### ğŸ“– Dokumentasi Official:
- [MDN - requestAnimationFrame()](https://developer.mozilla.org/en-US/docs/Web/API/window/requestAnimationFrame)
- [MDN - CSS Transform](https://developer.mozilla.org/en-US/docs/Web/CSS/transform)
- [MDN - translateX()](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/translateX)
- [MDN - rotate()](https://developer.mozilla.org/en-US/docs/Web/CSS/transform-function/rotate)

### ğŸ“ Tutorial & Guides:
- [W3Schools - requestAnimationFrame](https://www.w3schools.com/jsref/met_win_requestanimationframe.asp)
- [W3Schools - CSS Transforms](https://www.w3schools.com/css/css3_2dtransforms.asp)
- [JavaScript.info - Animation](https://javascript.info/js-animation)

### ğŸ¬ Video Tutorial:
- [Traversy Media - requestAnimationFrame Tutorial](https://www.youtube.com/c/TraversyMedia)

### ğŸ› ï¸ Tools & Playground:
- [CodePen - Experiment with animations](https://codepen.io/)
- [JSFiddle - Test your code](https://jsfiddle.net/)

---

## ğŸ‰ Selamat!

Kamu sudah mempelajari dasar-dasar **requestAnimationFrame** untuk membuat animasi di JavaScript! Terus berlatih dan eksperimen dengan berbagai kombinasi transform properties.

**Happy Coding! ğŸš€**

---

> ğŸ“ **Catatan**: Dokumentasi ini dibuat untuk pembelajaran pribadi berdasarkan tutorial video tentang requestAnimationFrame di JavaScript.
