# ğŸ“š Panduan Lengkap: Async/Await Multiple Promises dalam JavaScript

> **ğŸ“Œ Catatan:** Dokumentasi ini dirancang untuk pemula yang ingin memahami cara menangani multiple promises menggunakan async/await di JavaScript. Mari kita belajar sedikit demi sedikit!

---

## ğŸ“‹ Daftar Isi

- [Pengenalan](#pengenalan)
- [Prerequisites: Apa yang Perlu Diketahui](#prerequisites-apa-yang-perlu-diketahui)
- [Konsep Dasar: Promise & Async/Await](#konsep-dasar-promise--asyncawait)
- [Metode 1: Async/Await Dasar](#metode-1-asyncawait-dasar)
- [Metode 2: Async/Await dengan Fetch API](#metode-2-asyncawait-dengan-fetch-api)
- [Metode 3: Promise.all dengan Async/Await](#metode-3-promiseall-dengan-asyncawait)
- [Metode 4: Promise.all + .then() Kombinasi](#metode-4-promiseall--then-kombinasi)
- [Perbandingan Semua Metode](#perbandingan-semua-metode)
- [Tips & Trik untuk Pemula](#tips--trik-untuk-pemula)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Dalam tutorial ini, kita akan belajar **bagaimana mengambil data dari multiple sumber secara bersamaan atau berurutan** menggunakan JavaScript modern. 

Bayangkan Anda sedang membuat aplikasi movie yang membutuhkan data dari 3 file JSON:
- ğŸ“½ï¸ `movies.json` (Data film)
- ğŸ‘¥ `actors.json` (Data aktor)
- ğŸ¬ `directors.json` (Data sutradara)

**Pertanyaannya:** Bagaimana cara mengambil ketiga file ini dengan cara yang paling elegan dan mudah dibaca?

> **Jawaban:** Menggunakan **Async/Await** dan **Promise.all**! âœ¨

---

<a name="prerequisites-apa-yang-perlu-diketahui"></a>
## ğŸ“– Prerequisites: Apa yang Perlu Diketahui

Sebelum melanjutkan, pastikan Anda sudah familiar dengan:

- âœ… **Promise dasar** (`.then()`, `.catch()`)
- âœ… **Function biasa** di JavaScript
- âœ… **JSON** dan cara membaca file JSON
- âœ… **XMLHttpRequest atau Fetch API** (basic)

Jika belum, tidak masalah! Kita akan menjelaskan saat dibutuhkan. ğŸ˜Š

---

<a name="konsep-dasar-promise--asyncawait"></a>
## ğŸ“– Konsep Dasar: Promise & Async/Await

### Apa itu Promise?

**Promise** adalah janji JavaScript untuk melakukan sesuatu di masa depan. Bisa berhasil âœ… atau gagal âŒ.

### Apa itu Async/Await?

**Async/Await** adalah cara yang lebih **rapi dan mudah dibaca** untuk menangani Promise. Inilah perbedaannya:

```javascript
// âŒ Cara lama (Promise chaining)
getData('./movies.json')
  .then((movies) => {
    console.log(movies);
    return getData('./actors.json');
  })
  .then((actors) => {
    console.log(actors);
  });

// âœ… Cara modern (Async/Await)
async function getAllData() {
  const movies = await getData('./movies.json');
  const actors = await getData('./actors.json');
  console.log(movies, actors);
}
```

Lihat? Cara kedua terlihat seperti kode synchronous biasa! Lebih mudah dipahami, bukan? ğŸ‰

---

<a name="metode-1-asyncawait-dasar"></a>
## ğŸš€ Metode 1: Async/Await Dasar

### Step 1ï¸âƒ£: Buat Function untuk Mengambil Data

Pertama, kita buat function `getData()` yang mengembalikan Promise:

```javascript
function getData(endpoint) {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', endpoint);

    xhr.onreadystatechange = function () {
      if (this.readyState === 4) {
        if (this.status === 200) {
          resolve(JSON.parse(this.responseText));
        } else {
          reject('Error: Something went wrong');
        }
      }
    };

    // Delay 1-4 detik (untuk simulasi)
    setTimeout(() => {
      xhr.send();
    }, Math.floor(Math.random() * 3000) + 1000);
  });
}
```

**Penjelasan:**
- ğŸ” `xhr.open('GET', endpoint)` = Buka koneksi GET ke file
- ğŸ“¦ `resolve(JSON.parse(...))` = Jika berhasil, kembalikan data JSON
- âš ï¸ `reject(...)` = Jika gagal, kembalikan error
- â±ï¸ `setTimeout()` = Simulasi delay real-world (1-4 detik)

---

### Step 2ï¸âƒ£: Buat Async Function untuk Mengambil Multiple Data

Sekarang buat function `async` yang menggunakan `await`:

```javascript
async function getAllData() {
  const movies = await getData('./movies.json');
  const actors = await getData('./actors.json');
  const directors = await getData('./directors.json');
  
  console.log(movies, actors, directors);
}
```

**Penjelasan baris per baris:**

| Baris | Penjelasan |
|-------|-----------|
| `async function` | Menandai function ini adalah asynchronous |
| `const movies = await ...` | **Tunggu** hingga `getData()` selesai, simpan hasilnya di `movies` |
| Baris berikutnya | Baru dijalankan setelah baris sebelumnya selesai âœ… |

> **ğŸ’¡ Catatan Penting:** Baris-baris ini **dijalankan berurutan** (sequential), bukan paralel!
> - Ambil movies (1-4 detik)
> - Tunggu selesai
> - Baru ambil actors (1-4 detik)
> - Tunggu selesai
> - Baru ambil directors (1-4 detik)

---

### Step 3ï¸âƒ£: Panggil Function

```javascript
getAllData();
```

**Output yang mungkin:**
```
[
  {id: 1, title: "Movie 1"},
  {id: 2, title: "Movie 2"},
  ...
]
[
  {id: 1, name: "Actor 1"},
  ...
]
[
  {id: 1, name: "Director 1"},
  ...
]
```

---

<a name="metode-2-asyncawait-dengan-fetch-api"></a>
## ğŸš€ Metode 2: Async/Await dengan Fetch API

### Kenapa Ganti ke Fetch?

**Fetch API** lebih modern dan lebih simple dari `XMLHttpRequest`. Mari kita upgrade kode kita! ğŸ”„

### Step 1ï¸âƒ£: Buat Async Function dengan Fetch

```javascript
async function getAllDataWithFetch() {
  // Ambil movies
  const moviesRes = await fetch('./movies.json');
  const movies = await moviesRes.json();

  // Ambil actors
  const actorsRes = await fetch('./actors.json');
  const actors = await actorsRes.json();

  // Ambil directors
  const directorsRes = await fetch('./directors.json');
  const directors = await directorsRes.json();

  console.log(movies, actors, directors);
}
```

**Penjelasan:**

Fetch punya 2 langkah:

| Langkah | Penjelasan |
|---------|-----------|
| **1ï¸âƒ£ Ambil Response** | `const moviesRes = await fetch(...)` |
| **2ï¸âƒ£ Convert ke JSON** | `const movies = await moviesRes.json()` |

> **Mengapa 2 langkah?** Karena `fetch()` memberikan kita **response object** (berisi metadata, status, dll), bukan langsung data JSON-nya. Kita perlu `.json()` untuk extract data-nya.

---

### Step 2ï¸âƒ£: Panggil Function

```javascript
getAllDataWithFetch();
```

**Hasil:** Sama seperti Metode 1, tapi kodenya lebih rapi! âœ¨

---

<a name="metode-3-promiseall-dengan-asyncawait"></a>
## ğŸš€ Metode 3: Promise.all dengan Async/Await

### Apa itu Promise.all?

`Promise.all()` adalah cara untuk menjalankan **multiple promises SECARA BERSAMAAN** (paralel), bukan berurutan.

### Perbedaan Penting:

```
Metode 1 & 2 (Sequential):
Ambil movies (1-4s) â†’ Ambil actors (1-4s) â†’ Ambil directors (1-4s)
Total waktu: ~12 detik âŒ

Metode 3 (Paralel):
Ambil semua 3 files BERSAMAAN (1-4s)
Total waktu: ~4 detik âœ…âœ…âœ…
```

### Step 1ï¸âƒ£: Buat Async Function dengan Promise.all

```javascript
async function getAllDataPromiseAll() {
  // Ambil semua response secara bersamaan
  const [moviesRes, actorsRes, directorsRes] = await Promise.all([
    fetch('./movies.json'),
    fetch('./actors.json'),
    fetch('./directors.json'),
  ]);

  // Convert semuanya ke JSON
  const movies = await moviesRes.json();
  const actors = await actorsRes.json();
  const directors = await directorsRes.json();

  console.log(movies, actors, directors);
}
```

**Penjelasan:**

**Baris 2-6:** Array dari semua fetch calls
```javascript
[
  fetch('./movies.json'),      // Promise #1
  fetch('./actors.json'),      // Promise #2
  fetch('./directors.json'),   // Promise #3
]
```

**Baris 1 & 2:** Destructuring
```javascript
const [moviesRes, actorsRes, directorsRes] = await Promise.all([...])
```
- Jalankan **semua promises** bersamaan
- **Tunggu** semuanya selesai
- **Extract** hasil ke variabel masing-masing

> **ğŸ“Œ Destructuring:** Cara cepat mengambil element dari array!
> ```javascript
> const arr = [1, 2, 3];
> const [a, b, c] = arr;
> console.log(a); // 1
> console.log(b); // 2
> ```

---

### Step 2ï¸âƒ£: Panggil Function

```javascript
getAllDataPromiseAll();
```

**Keuntungan:** âš¡ Lebih cepat dari metode sebelumnya!

---

<a name="metode-4-promiseall--then-kombinasi"></a>
## ğŸš€ Metode 4: Promise.all + .then() Kombinasi

### Cara Lebih Compact

Kita bisa menggabungkan `.then()` langsung dalam `Promise.all()` agar lebih singkat:

```javascript
async function getAllDataPromiseAll2() {
  const [movies, actors, directors] = await Promise.all([
    fetch('./movies.json').then((res) => res.json()),
    fetch('./actors.json').then((res) => res.json()),
    fetch('./directors.json').then((res) => res.json()),
  ]);

  console.log(movies, actors, directors);
}
```

**Perbedaan dari Metode 3:**

```javascript
// Metode 3: 2 tahap
const moviesRes = await fetch(...);
const movies = await moviesRes.json();

// Metode 4: 1 baris (lebih compact)
fetch('./movies.json').then((res) => res.json())
```

**Hasil akhir:** Sama, tapi lebih sedikit baris kode! ğŸ“

---

<a name="perbandingan-semua-metode"></a>
## ğŸ“Š Perbandingan Semua Metode

| Metode | Syntax | Kecepatan | Readability | Rekomendasi |
|--------|--------|-----------|------------|-------------|
| **Metode 1** | Custom Promise | Slow âŒ | â­â­â­ | Belajar Promise |
| **Metode 2** | Fetch + Await | Slow âŒ | â­â­â­â­ | Beginner-friendly |
| **Metode 3** | Promise.all | Fast âœ… | â­â­â­ | Production |
| **Metode 4** | Promise.all + then | Fast âœ… | â­â­ | Advanced |

---

<a name="tips--trik-untuk-pemula"></a>
## ğŸ’¡ Tips & Trik untuk Pemula

### âœ… DO's (Lakukan)

```javascript
// âœ… Gunakan Fetch API (lebih modern)
async function getData() {
  const res = await fetch(url);
  const data = await res.json();
  return data;
}

// âœ… Gunakan Promise.all untuk multiple requests
Promise.all([
  fetch(url1),
  fetch(url2),
  fetch(url3),
]);

// âœ… Tambahkan error handling
try {
  const data = await fetch(url);
} catch (error) {
  console.log('Error:', error);
}
```

---

### âŒ DON'Ts (Jangan Lakukan)

```javascript
// âŒ Jangan lupa await
const data = fetch(url); // Ini adalah Promise, bukan data!

// âŒ Jangan buat function nested yang tidak perlu
async function main() {
  async function nested() {
    const data = await fetch(url);
  }
}

// âŒ Jangan sequential jika bisa paralel
const res1 = await fetch(url1);
const res2 = await fetch(url2); // Tunggu url1 selesai dulu âŒ

// âœ… Lakukan ini saja:
const [res1, res2] = await Promise.all([
  fetch(url1),
  fetch(url2),
]);
```

---

### ğŸ”¥ Pro Tips

**1. Selalu gunakan Try-Catch untuk Error Handling**

```javascript
async function safeGetData() {
  try {
    const data = await fetch(url);
    const json = await data.json();
    return json;
  } catch (error) {
    console.error('Oops!', error);
    return null;
  }
}
```

**2. Understand the Difference: Sequential vs Parallel**

```javascript
// Sequential (Lambat - 12 detik)
async function slow() {
  const a = await fetch(url1); // 4s
  const b = await fetch(url2); // 4s
  const c = await fetch(url3); // 4s
  // Total: 12s
}

// Parallel (Cepat - 4 detik)
async function fast() {
  const [a, b, c] = await Promise.all([
    fetch(url1),
    fetch(url2),
    fetch(url3),
  ]); // Total: 4s
}
```

**3. Jangan Takut Berbuat Salah!**

> Coding itu trial & error. Setiap error adalah pembelajaran! ğŸ“
> Coba berbagai cara, lihat mana yang paling bagus untuk kasus Anda.

---

## ğŸ“ Kesimpulan

Untuk mengambil **multiple promises**:

1. âœ… **Gunakan `async`/`await`** untuk kode yang lebih rapi
2. âœ… **Gunakan `Fetch API`** daripada XMLHttpRequest
3. âœ… **Gunakan `Promise.all()`** jika data independent (paralel)
4. âœ… **Gunakan sequential `await`** jika ada dependency
5. âœ… **Selalu handle errors** dengan try-catch

---

## ğŸ¯ Project Selanjutnya

Setelah menguasai tutorial ini, Anda siap untuk membuat **Movie App "Flicks"** menggunakan:
- âœ¨ Movie API
- âœ¨ Async/Await patterns
- âœ¨ Promise handling

Selamat belajar! ğŸš€ğŸ“š
