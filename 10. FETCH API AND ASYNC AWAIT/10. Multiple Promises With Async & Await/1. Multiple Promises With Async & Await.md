# ğŸ“š Dokumentasi Async/Await Multiple Promises untuk Pemula

## ğŸ“‹ Daftar Isi
- [ğŸ¯ Pengenalan](#pengenalan)
- [ğŸ”„ Mengenal Promise dengan Then](#mengenal-promise-dengan-then)
- [âš¡ Apa itu Async/Await?](#apa-itu-async-await)
- [ğŸ“¦ Menggunakan Async/Await Dasar](#menggunakan-async-await-dasar)
- [ğŸŒ Async/Await dengan Fetch API](#async-await-dengan-fetch-api)
- [ğŸ Promise.all untuk Optimasi](#promise-all-untuk-optimasi)
- [ğŸ“ Contoh Kode Lengkap](#contoh-kode-lengkap)
- [âœ¨ Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Halo, pemula! ğŸ‘‹ Pada dokumentasi ini kita akan belajar tentang **Async/Await** dan bagaimana cara mengambil **multiple promises** (banyak data) secara bersamaan atau berurutan menggunakan cara yang lebih rapi daripada method `.then()`.

### Mengapa Ini Penting? ğŸ¤”
Bayangkan kamu ingin mengambil data tentang film, aktor, dan sutradara dari file atau API. Jika menggunakan `.then()` berkali-kali, kode akan terlihat rumit. Dengan **Async/Await**, semuanya terlihat lebih bersih dan mudah dibaca!

---

<a name="mengenal-promise-dengan-then"></a>
## ğŸ”„ Mengenal Promise dengan Then

Sebelum masuk ke Async/Await, kita perlu tahu cara lama menggunakan Promise dengan `.then()`.

### Konsep Dasar ğŸ“š
Fungsi `getData()` adalah custom function yang menggunakan **XMLHttpRequest (XHR)** untuk mengambil data dari endpoint tertentu. Function ini mengembalikan sebuah **Promise**.

```javascript
function getData(endpoint) {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', endpoint);

    xhr.onreadystatechange = function () {
      if (this.readyState === 4) {
        if (this.status === 200) {
          resolve(JSON.parse(this.responseText));
        } else {
          reject('Error: Something went wrong');
        }
      }
    };

    // Menambahkan delay 1-4 detik sebelum mengirim request
    setTimeout(() => {
      xhr.send();
    }, Math.floor(Math.random() * 3000) + 1000);
  });
}
```

### Cara Menggunakan dengan .then() â›“ï¸

Jika ingin mengambil data secara **berurutan** (film â†’ aktor â†’ sutradara), kita menggunakan chain `.then()`:

```javascript
getData('./movies.json')
  .then((movies) => {
    console.log(movies);        // Data film
    return getData('./actors.json');
  })
  .then((actors) => {
    console.log(actors);        // Data aktor
    return getData('./directors.json');
  })
  .then((directors) => {
    console.log(directors);     // Data sutradara
  })
  .catch((error) => console.log(error));
```

**Penjelasan:**
- âœ… Data diambil satu per satu secara berurutan
- âŒ Kode terlihat bertingkat dan kurang rapi (dikenal sebagai "callback hell")
- â±ï¸ Total waktu tunggu bisa jadi lama karena menunggu satu selesai baru mulai yang lain

---

<a name="apa-itu-async-await"></a>
## âš¡ Apa itu Async/Await?

**Async/Await** adalah cara modern untuk menulis kode asynchronous yang lebih rapi dan mudah dibaca. Ia membuat kode terlihat seperti **synchronous** meskipun sebenarnya **asynchronous**.

### Karakteristik Async/Await ğŸŒŸ

| Fitur | Penjelasan |
|-------|-----------|
| **async** | Keyword untuk mendeklarasikan function asynchronous |
| **await** | Keyword untuk menunggu promise selesai sebelum lanjut ke baris berikutnya |
| **Readability** | Kode terlihat seperti baris demi baris biasa |
| **Error Handling** | Bisa menggunakan try/catch seperti error handling biasa |

### Penting! ğŸš¨
Ketika function diberi keyword `async`, function tersebut **selalu mengembalikan Promise**. Ini berarti kode di luar function akan tetap jalan, sedangkan isi function menunggu proses asynchronous selesai.

---

<a name="menggunakan-async-await-dasar"></a>
## ğŸ“¦ Menggunakan Async/Await Dasar

Mari kita lihat cara menggunakan Async/Await dengan function `getData()` yang sudah ada.

### Syntaks Dasar ğŸ’»

```javascript
async function getAllData() {
  const movies = await getData('./movies.json');
  const actors = await getData('./actors.json');
  const directors = await getData('./directors.json');
  console.log(movies, actors, directors);
}

// Jangan lupa memanggil function-nya!
getAllData();
```

### Penjelasan Baris per Baris ğŸ”

1. **`async function getAllData()`** â†’ Mendeklarasikan function asynchronous
2. **`const movies = await getData('./movies.json')`** â†’ Menunggu data film selesai diambil, baru simpan ke variable `movies`
3. **`const actors = await getData('./actors.json')`** â†’ Setelah film siap, ambil data aktor
4. **`const directors = await getData('./directors.json')`** â†’ Setelah aktor siap, ambil data sutradara
5. **`console.log(movies, actors, directors)`** â†’ Setelah semua selesai, tampilkan hasilnya

### Keuntungan âœ¨
- âœ… Kode terlihat rapi dan mudah dibaca
- âœ… Urutan eksekusi jelas dan logis
- âœ… Tidak perlu chain `.then()` berkali-kali

### Yang Perlu Diingat âš ï¸
- Kode di **dalam function** akan menunggu setiap `await` selesai
- Kode di **luar function** akan tetap jalan (asynchronous)
- Data diambil **berurutan**, bukan bersamaan (lebih lambat jika banyak)

---

<a name="async-await-dengan-fetch-api"></a>
## ğŸŒ Async/Await dengan Fetch API

Di dunia nyata, kita jarang menggunakan XHR. Umumnya kita menggunakan **Fetch API** yang lebih modern dan simple.

### Perbedaan Fetch vs XHR ğŸ”„

| Aspek | XHR | Fetch |
|-------|-----|-------|
| **Sintaks** | Panjang dan kompleks | Singkat dan rapi |
| **Modern** | Lama | Baru dan standard |
| **Return Value** | Resolve langsung dengan data | Resolve dengan Response object |

### Menggunakan Async/Await dengan Fetch ğŸ’»

```javascript
async function getAllDataWithFetch() {
  // Step 1: Ambil film - dapat Response object
  const moviesRes = await fetch('./movies.json');
  // Step 2: Konversi Response menjadi JSON
  const movies = await moviesRes.json();

  // Step 3: Ambil aktor - dapat Response object
  const actorsRes = await fetch('./actors.json');
  // Step 4: Konversi Response menjadi JSON
  const actors = await actorsRes.json();

  // Step 5: Ambil sutradara - dapat Response object
  const directorsRes = await fetch('./directors.json');
  // Step 6: Konversi Response menjadi JSON
  const directors = await directorsRes.json();

  // Step 7: Tampilkan semua data
  console.log(movies, actors, directors);
}

// Panggil function
getAllDataWithFetch();
```

### Penjelasan Fetch ğŸ“–
- `fetch()` mengembalikan Promise yang resolve dengan **Response object** (bukan langsung data)
- Response object memiliki method `.json()` untuk mengkonversi isi menjadi JSON
- `.json()` juga mengembalikan Promise, jadi perlu di-`await` juga

### Alasan Fetch lebih baik ğŸ¯
- Tidak perlu menulis XHR yang panjang
- Kode lebih clean dan standard
- Mudah dipahami oleh developer lain

---

<a name="promise-all-untuk-optimasi"></a>
## ğŸ Promise.all untuk Optimasi

Jika data film, aktor, dan sutradara **tidak saling tergantung**, kita bisa ambil **sekaligus bersamaan** menggunakan `Promise.all()`. Ini lebih cepat!

### Kapan Gunakan Promise.all? â°
- Ketika kamu ingin mengambil banyak data yang **tidak tergantung satu sama lain**
- Ketika kamu ingin hasil **lebih cepat**
- Ketika urutan pengambilan **tidak penting**

### Method 1: Ambil Response Dulu ğŸ”„

```javascript
async function getAllDataPromiseAll() {
  // Ambil semua Response objects sekaligus (bersamaan!)
  const [moviesRes, actorsRes, directorsRes] = await Promise.all([
    fetch('./movies.json'),
    fetch('./actors.json'),
    fetch('./directors.json'),
  ]);

  // Setelah semua Response ready, konversi ke JSON
  const movies = await moviesRes.json();
  const actors = await actorsRes.json();
  const directors = await directorsRes.json();

  console.log(movies, actors, directors);
}
```

**Penjelasan:**
- `Promise.all()` menerima array of promises
- Destructuring `[moviesRes, actorsRes, directorsRes]` mengambil hasil setiap promise
- Semua fetch request **dijalankan bersamaan**, bukan berurutan
- Hasilnya lebih cepat! âš¡

### Method 2: Langsung Dapatkan Data (Paling Rapi!) âœ¨

```javascript
async function getAllDataPromiseAll2() {
  // Ambil sekaligus dan langsung konversi ke JSON
  const [movies, actors, directors] = await Promise.all([
    fetch('./movies.json').then((res) => res.json()),
    fetch('./actors.json').then((res) => res.json()),
    fetch('./directors.json').then((res) => res.json()),
  ]);

  console.log(movies, actors, directors);
}

// Panggil function
getAllDataPromiseAll2();
```

**Keuntungan:**
- âœ… Paling rapi dan short
- âœ… Langsung mendapat data yang sudah di-parse
- âœ… Baris kode lebih sedikit
- âœ… Masih menggabungkan `.then()` dengan `async/await` yang modern

### Perbandingan Waktu â±ï¸

```
Method Berurutan:  Film (2s) + Aktor (3s) + Sutradara (1s) = 6 detik total
Method Bersamaan:  max(2s, 3s, 1s) = 3 detik total âš¡ (2x lebih cepat!)
```

---

<a name="contoh-kode-lengkap"></a>
## ğŸ“ Contoh Kode Lengkap

Berikut adalah file `script.js` yang sudah lengkap dengan semua method:

### HTML (`index.html`) ğŸ—ï¸
```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Async/Await Multiple Promises</title>
  </head>
  <body>
    <h1>Async/Await Multiple Promises</h1>
    <script src="./script.js"></script>
  </body>
</html>
```

### JavaScript (`script.js`) ğŸš€

```javascript
// ==========================================
// Function Dasar: getData dengan XHR
// ==========================================
function getData(endpoint) {
  return new Promise((resolve, reject) => {
    const xhr = new XMLHttpRequest();
    xhr.open('GET', endpoint);

    xhr.onreadystatechange = function () {
      if (this.readyState === 4) {
        if (this.status === 200) {
          resolve(JSON.parse(this.responseText));
        } else {
          reject('Error: Something went wrong');
        }
      }
    };

    setTimeout(() => {
      xhr.send();
    }, Math.floor(Math.random() * 3000) + 1000);
  });
}

// ==========================================
// Method 1: Using .then() (Cara Lama)
// ==========================================
// getData('./movies.json')
//   .then((movies) => {
//     console.log(movies);
//     return getData('./actors.json');
//   })
//   .then((actors) => {
//     console.log(actors);
//     return getData('./directors.json');
//   })
//   .then((directors) => {
//     console.log(directors);
//   })
//   .catch((error) => console.log(error));

// ==========================================
// Method 2: Basic Async/Await (Berurutan)
// ==========================================
async function getAllData() {
  const movies = await getData('./movies.json');
  const actors = await getData('./actors.json');
  const directors = await getData('./directors.json');
  console.log(movies, actors, directors);
}

// ==========================================
// Method 3: Async/Await dengan Fetch API
// ==========================================
async function getAllDataWithFetch() {
  const moviesRes = await fetch('./movies.json');
  const movies = await moviesRes.json();

  const actorsRes = await fetch('./actors.json');
  const actors = await actorsRes.json();

  const directorsRes = await fetch('./directors.json');
  const directors = await directorsRes.json();

  console.log(movies, actors, directors);
}

// ==========================================
// Method 4: Promise.all (Ambil Sekaligus)
// ==========================================
async function getAllDataPromiseAll() {
  const [moviesRes, actorsRes, directorsRes] = await Promise.all([
    fetch('./movies.json'),
    fetch('./actors.json'),
    fetch('./directors.json'),
  ]);

  const movies = await moviesRes.json();
  const actors = await actorsRes.json();
  const directors = await directorsRes.json();

  console.log(movies, actors, directors);
}

// ==========================================
// Method 5: Promise.all + .then() (Paling Rapi!)
// ==========================================
async function getAllDataPromiseAll2() {
  const [movies, actors, directors] = await Promise.all([
    fetch('./movies.json').then((res) => res.json()),
    fetch('./actors.json').then((res) => res.json()),
    fetch('./directors.json').then((res) => res.json()),
  ]);

  console.log(movies, actors, directors);
}

// Pilih method mana yang ingin dijalankan:
// getAllData();
// getAllDataWithFetch();
// getAllDataPromiseAll();
getAllDataPromiseAll2();  // â­ Rekomendasi: Paling rapi dan cepat!
```

---

<a name="kesimpulan"></a>
## âœ¨ Kesimpulan & Tips

### Ringkasan Pembelajaran ğŸ“

| Cara | Kelebihan | Kekurangan |
|------|-----------|-----------|
| **.then()** | Sudah dipelajari banyak orang | Callback hell, bertingkat |
| **Async/Await (Berurutan)** | Rapi, mudah dibaca | Lebih lambat (menunggu satu-satu) |
| **Promise.all + Async/Await** | â­ Paling rapi + cepat | Sedikit lebih kompleks |

### Rekomendasi untuk Pemula ğŸ‘
1. **Mulai pelajari** `.then()` untuk memahami Promise
2. **Tingkat lanjut ke** `async/await` berurutan
3. **Optimalkan dengan** `Promise.all()` saat butuh kecepatan
4. **Gunakan Method 5** (`Promise.all2`) saat di production - paling clean dan efficient!

### Hal Penting yang Perlu Diingat ğŸš€
- âœ… `async` function **selalu return Promise**
- âœ… `await` hanya bisa digunakan **di dalam async function**
- âœ… `Promise.all()` menjalankan promises **sekaligus, bukan berurutan**
- âœ… Pilih method yang paling sesuai dengan kebutuhan
- âœ… Jangan takut mencoba berbagai cara - tidak ada yang "salah"!

### Selanjutnya? ğŸ”®
Dengan skill Async/Await ini, kamu bisa membuat aplikasi yang:
- Mengambil data dari multiple API sources
- Menampilkan loading state yang proper
- Membuat user experience yang smooth
- Build real-world applications! ğŸŒŸ

---

**Happy Coding!** ğŸ‰ Jangan ragu untuk bereksperimen dan mencoba berbagai cara. Setiap developer punya gaya sendiri, dan itu okay!
