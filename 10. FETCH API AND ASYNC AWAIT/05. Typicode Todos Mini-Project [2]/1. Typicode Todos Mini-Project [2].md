# ğŸ“š Dokumentasi Todo App - PUT & DELETE Request

## ğŸ“‘ Daftar Isi
- [Pengenalan](#pengenalan)
- [Persiapan Awal](#persiapan-awal)
- [Toggle Completed Todo](#toggle-completed-todo)
  - [Menambahkan Event Listener](#menambahkan-event-listener)
  - [Event Delegation](#event-delegation)
  - [Menambahkan Class 'todo'](#menambahkan-class-todo)
  - [Menggunakan Contains](#menggunakan-contains)
- [Update Todo (PUT Request)](#update-todo-put-request)
  - [Membuat Fungsi updateTodo](#membuat-fungsi-updatetodo)
  - [Mendapatkan ID dari Dataset](#mendapatkan-id-dari-dataset)
  - [Mendapatkan Status Completed](#mendapatkan-status-completed)
  - [Mengirim PUT Request](#mengirim-put-request)
- [Delete Todo (DELETE Request)](#delete-todo-delete-request)
  - [Menambahkan Double Click Event](#menambahkan-double-click-event)
  - [Membuat Fungsi deleteTodo](#membuat-fungsi-deletetodo)
  - [Mengirim DELETE Request](#mengirim-delete-request)
  - [Menghapus dari DOM](#menghapus-dari-dom)
- [Kode Lengkap](#kode-lengkap)
- [Catatan Penting](#catatan-penting)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Dokumentasi ini melanjutkan tutorial Todo App sebelumnya. Sekarang kita akan belajar:
- âœ… **Toggle status completed** dengan mengklik todo
- ğŸ”„ **Update todo** menggunakan **PUT request**
- ğŸ—‘ï¸ **Delete todo** menggunakan **DELETE request**

> ğŸ’¡ **Catatan**: Ini adalah proyek pembelajaran, bukan proyek production-ready. Fokusnya adalah memahami cara kerja HTTP methods!

---

<a name="persiapan-awal"></a>
## ğŸ› ï¸ Persiapan Awal

Sebelumnya kita sudah berhasil:
- Menampilkan daftar todo dari API
- Menambahkan todo baru dengan **POST request**

Sekarang kita akan menambahkan fitur **toggle completed** dan **delete**.

**Limit Todo**: Kita set limit menjadi **10 todo** saja untuk mempermudah testing.

```javascript
const apiUrl = 'https://jsonplaceholder.typicode.com/todos';

fetch(apiUrl + '?_limit=10') // â¬…ï¸ Limit 10 todos
```

---

<a name="toggle-completed-todo"></a>
## ğŸ¯ Toggle Completed Todo

<a name="menambahkan-event-listener"></a>
### ğŸ“Œ Menambahkan Event Listener

Kita ingin:
- Klik pada todo â†’ toggle class `done` (warna gelap)
- Sekaligus update ke server (completed: true/false)

```javascript
document.querySelector('#todo-list').addEventListener('click', toggleCompleted);
```

**â“ Kenapa event listener di `#todo-list`?**  
Karena kita menggunakan **Event Delegation** (dijelaskan di bawah)!

---

<a name="event-delegation"></a>
### ğŸª Event Delegation

**Event Delegation** = Menambahkan event listener pada **parent element**, bukan pada setiap child element.

**âŒ Tanpa Event Delegation:**
```javascript
// Harus loop setiap todo dan tambahkan event listener
todos.forEach(todo => {
  todo.addEventListener('click', toggleCompleted); // Tidak efisien!
});
```

**âœ… Dengan Event Delegation:**
```javascript
// Hanya 1 event listener di parent
document.querySelector('#todo-list').addEventListener('click', toggleCompleted);
```

**ğŸ‰ Keuntungan:**
- Lebih efisien
- Otomatis bekerja untuk todo yang baru ditambahkan
- Hanya 1 event listener, bukan puluhan!

---

<a name="menambahkan-class-todo"></a>
### ğŸ·ï¸ Menambahkan Class 'todo'

**âš ï¸ Masalah:** Kalau klik di area kosong `#todo-list`, semua todo berubah!

**ğŸ’¡ Solusi:** Tambahkan class `todo` pada setiap todo item.

**Modifikasi fungsi `addTodoToDOM`:**

```javascript
const addTodoToDOM = (todo) => {
  const div = document.createElement('div');
  div.classList.add('todo'); // â¬…ï¸ TAMBAHKAN INI!
  div.textContent = todo.title;
  div.setAttribute('data-id', todo.id);

  if (todo.completed) {
    div.classList.add('done');
  }

  document.querySelector('#todo-list').append(div);
};
```

**Hasil di HTML:**
```html
<div class="todo" data-id="1">Delectus aut autem</div>
<div class="todo done" data-id="2">Quis ut nam</div>
```

âœ¨ Sekarang setiap todo punya class `todo`!

---

<a name="menggunakan-contains"></a>
### ğŸ” Menggunakan Contains

Sekarang kita cek: apakah yang diklik memiliki class `todo`?

```javascript
const toggleCompleted = (e) => {
  if (e.target.classList.contains('todo')) { // â¬…ï¸ CEK CLASS
    e.target.classList.toggle('done'); // Toggle class 'done'
  }
};
```

**ğŸ§ª Cara Kerja `contains()`:**
- `e.target` = element yang diklik
- `.classList.contains('todo')` = return `true` atau `false`
- Kalau `true` â†’ toggle class `done`
- Kalau `false` (klik area kosong) â†’ tidak terjadi apa-apa

---

<a name="update-todo-put-request"></a>
## ğŸ”„ Update Todo (PUT Request)

<a name="membuat-fungsi-updatetodo"></a>
### ğŸ“ Membuat Fungsi updateTodo

Kita pisahkan logika update ke fungsi tersendiri:

```javascript
const updateTodo = (id, completed) => {
  // Fungsi ini akan mengirim PUT request ke server
};
```

**Parameter:**
- `id` = ID todo yang mau diupdate
- `completed` = status baru (true/false)

---

<a name="mendapatkan-id-dari-dataset"></a>
### ğŸ†” Mendapatkan ID dari Dataset

**ğŸ’¡ Ingat!** Kita sudah set `data-id` di setiap todo:

```javascript
div.setAttribute('data-id', todo.id);
```

**Cara akses dataset:**

```javascript
const id = e.target.dataset.id; // â¬…ï¸ Dapat ID todo!
```

**ğŸ§ª Testing:**
```javascript
console.log(e.target.dataset.id);
// Klik todo ID 23 â†’ Output: "23"
// Klik todo ID 201 â†’ Output: "201"
```

---

<a name="mendapatkan-status-completed"></a>
### âœ”ï¸ Mendapatkan Status Completed

Kita cek apakah todo memiliki class `done`:

```javascript
const completed = e.target.classList.contains('done');
```

**ğŸ§ª Cara Kerja:**
- Kalau ada class `done` â†’ `completed = true`
- Kalau tidak ada class `done` â†’ `completed = false`

**Update fungsi `toggleCompleted`:**

```javascript
const toggleCompleted = (e) => {
  if (e.target.classList.contains('todo')) {
    e.target.classList.toggle('done'); // Toggle visual
    
    const id = e.target.dataset.id;
    const completed = e.target.classList.contains('done');
    
    updateTodo(id, completed); // â¬…ï¸ Update ke server
  }
};
```

---

<a name="mengirim-put-request"></a>
### ğŸ“¡ Mengirim PUT Request

**ğŸ¯ PUT Request** = HTTP method untuk **update data** yang sudah ada.

```javascript
const updateTodo = (id, completed) => {
  fetch(`${apiUrl}/${id}`, { // â¬…ï¸ URL dengan ID
    method: 'PUT', // â¬…ï¸ Method PUT
    body: JSON.stringify({ completed }), // â¬…ï¸ Data yang mau diupdate
    headers: {
      'Content-Type': 'application/json', // â¬…ï¸ Header
    },
  });
};
```

**ğŸ“‹ Penjelasan Detail:**

1. **URL dengan ID:**
   ```javascript
   `${apiUrl}/${id}` 
   // Contoh: https://jsonplaceholder.typicode.com/todos/1
   ```

2. **Method PUT:**
   ```javascript
   method: 'PUT' // â¬…ï¸ Untuk update data
   ```

3. **Body (Data):**
   ```javascript
   body: JSON.stringify({ completed })
   // Kirim: { "completed": true } atau { "completed": false }
   ```
   
   **ğŸ’¡ Shorthand Property:**  
   Karena nama variabel sama dengan nama property, cukup tulis `{ completed }` saja!

4. **Headers:**
   ```javascript
   headers: {
     'Content-Type': 'application/json'
   }
   ```
   Memberitahu server bahwa kita kirim data JSON.

**ğŸ“¤ Response dari Server:**

```javascript
{
  "id": 1,
  "completed": true
}
```

Server hanya mengembalikan field yang diupdate saja!

---

<a name="delete-todo-delete-request"></a>
## ğŸ—‘ï¸ Delete Todo (DELETE Request)

<a name="menambahkan-double-click-event"></a>
### ğŸ–±ï¸ Menambahkan Double Click Event

Kita gunakan **double click** untuk delete (agar tidak bentrok dengan toggle):

```javascript
document.querySelector('#todo-list').addEventListener('dblclick', deleteTodo);
```

**ğŸ¯ Event:**
- **Single click** â†’ Toggle completed
- **Double click** â†’ Delete todo

---

<a name="membuat-fungsi-deletetodo"></a>
### ğŸ“ Membuat Fungsi deleteTodo

```javascript
const deleteTodo = (e) => {
  if (e.target.classList.contains('todo')) {
    const id = e.target.dataset.id;
    
    // Delete request akan ditulis di sini
  }
};
```

**ğŸ’¡ Pattern yang sama:**
- Cek apakah yang diklik punya class `todo`
- Ambil ID dari dataset

---

<a name="mengirim-delete-request"></a>
### ğŸ“¡ Mengirim DELETE Request

**ğŸ¯ DELETE Request** = HTTP method untuk **hapus data**.

```javascript
const deleteTodo = (e) => {
  if (e.target.classList.contains('todo')) {
    const id = e.target.dataset.id;

    fetch(`${apiUrl}/${id}`, { // â¬…ï¸ URL dengan ID
      method: 'DELETE', // â¬…ï¸ Method DELETE
    })
      .then((res) => res.json())
      .then(() => e.target.remove()); // â¬…ï¸ Hapus dari DOM
  }
};
```

**ğŸ“‹ Penjelasan:**

1. **URL dengan ID:**
   ```javascript
   `${apiUrl}/${id}`
   // Contoh: https://jsonplaceholder.typicode.com/todos/1
   ```

2. **Method DELETE:**
   ```javascript
   method: 'DELETE' // â¬…ï¸ Untuk hapus data
   ```

3. **âŒ Tidak ada Body:**  
   DELETE request tidak perlu kirim data di body!

4. **Response dari Server:**
   ```javascript
   {} // Empty object
   ```
   Server hanya return object kosong.

---

<a name="menghapus-dari-dom"></a>
### ğŸ§¹ Menghapus dari DOM

Setelah berhasil delete dari server, hapus juga dari tampilan:

```javascript
.then(() => e.target.remove()); // â¬…ï¸ Hapus element dari DOM
```

**ğŸ‰ Result:**
- Double click todo â†’ hilang dari tampilan
- Request DELETE terkirim ke server

**ğŸ” Cek di Network Tab:**
```
Method: DELETE
Status: 200 OK
Response: {}
```

---

<a name="kode-lengkap"></a>
## ğŸ“¦ Kode Lengkap

### **index.html**

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <title>Typicode Todos</title>
  </head>
  <body>
    <div class="container">
      <header>
        <h1>Typicode Todos</h1>
      </header>
      <main>
        <form id="todo-form">
          <input type="text" id="title" placeholder="Add Todo..." />
          <button type="submit">Add</button>
        </form>

        <div id="todo-list"></div>
      </main>
    </div>

    <script src="./index.js"></script>
  </body>
</html>
```

### **style.css**

```css
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

*,
*:before,
*:after {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

body {
  font-family: 'Poppins';
  line-height: 1.6;
  padding: 0 40px;
}

header {
  margin-bottom: 20px;
}

button {
  padding: 10px;
  background: salmon;
  color: white;
  border-radius: 5px;
  width: 100px;
  border: none;
}

input[type='text'] {
  padding: 5px;
  border-radius: 5px;
  width: 300px;
  height: 35px;
  border: 1px #ccc solid;
  margin-right: 5px;
}

#todo-list {
  display: flex;
  flex-wrap: wrap;
  margin-top: 20px;
}

#todo-list > div {
  border: 1px #666 solid;
  padding: 10px;
  margin: 5px;
  cursor: pointer;
}

.done {
  background: #ccc; /* â¬…ï¸ Warna gelap untuk completed */
}
```

### **index.js**

```javascript
const apiUrl = 'https://jsonplaceholder.typicode.com/todos';

// ğŸ“¥ GET todos dari API
const getTodos = () => {
  fetch(apiUrl + '?_limit=10')
    .then((res) => res.json())
    .then((data) => {
      data.forEach((todo) => addTodoToDOM(todo));
    });
};

// ğŸ¨ Tambahkan todo ke DOM
const addTodoToDOM = (todo) => {
  const div = document.createElement('div');
  div.classList.add('todo'); // â¬…ï¸ Class 'todo' untuk event delegation
  div.textContent = todo.title;
  div.setAttribute('data-id', todo.id); // â¬…ï¸ Simpan ID di dataset

  if (todo.completed) {
    div.classList.add('done');
  }

  document.querySelector('#todo-list').append(div);
};

// â• CREATE todo baru (POST)
const createTodo = (e) => {
  e.preventDefault();

  const newTodo = {
    title: e.target.firstElementChild.value,
    completed: false,
  };

  fetch(apiUrl, {
    method: 'POST',
    body: JSON.stringify(newTodo),
    headers: {
      'Content-Type': 'application/json',
    },
  })
    .then((res) => res.json())
    .then((data) => addTodoToDOM(data));
};

// ğŸ”„ UPDATE todo (PUT)
const updateTodo = (id, completed) => {
  fetch(`${apiUrl}/${id}`, {
    method: 'PUT',
    body: JSON.stringify({ completed }),
    headers: {
      'Content-Type': 'application/json',
    },
  });
  // â¬…ï¸ Tidak perlu .then() karena sudah toggle di DOM
};

// âœ… Toggle completed status
const toggleCompleted = (e) => {
  if (e.target.classList.contains('todo')) {
    e.target.classList.toggle('done'); // Toggle visual
    
    // Update ke server
    const id = e.target.dataset.id;
    const completed = e.target.classList.contains('done');
    updateTodo(id, completed);
  }
};

// ğŸ—‘ï¸ DELETE todo
const deleteTodo = (e) => {
  if (e.target.classList.contains('todo')) {
    const id = e.target.dataset.id;

    fetch(`${apiUrl}/${id}`, {
      method: 'DELETE',
    })
      .then((res) => res.json())
      .then(() => e.target.remove()); // Hapus dari DOM
  }
};

// ğŸš€ Initialize app
const init = () => {
  document.addEventListener('DOMContentLoaded', getTodos);
  document.querySelector('#todo-form').addEventListener('submit', createTodo);
  document.querySelector('#todo-list').addEventListener('click', toggleCompleted);
  document.querySelector('#todo-list').addEventListener('dblclick', deleteTodo);
};

init();
```

---

<a name="catatan-penting"></a>
## âš ï¸ Catatan Penting

### ğŸ¯ 4 HTTP Methods yang Sudah Dipelajari:

| Method | Fungsi | Body | URL |
|--------|--------|------|-----|
| **GET** | Ambil data | âŒ Tidak | `/todos` |
| **POST** | Buat data baru | âœ… Ya | `/todos` |
| **PUT** | Update data | âœ… Ya | `/todos/:id` |
| **DELETE** | Hapus data | âŒ Tidak | `/todos/:id` |

### ğŸ¤” Kenapa ID Tidak Increment?

```javascript
// Todo baru selalu ID 201
// Karena API ini fake (tidak ada database real)
```

Kalau reload page â†’ todo yang baru ditambahkan hilang.  
**ğŸ’¡ Ini normal!** JSONPlaceholder tidak menyimpan data permanent.

### ğŸª Event Delegation vs Direct Event

**âŒ Tanpa Event Delegation:**
```javascript
// Setiap todo perlu event listener sendiri
document.querySelectorAll('.todo').forEach(todo => {
  todo.addEventListener('click', toggleCompleted);
});
```

**âœ… Dengan Event Delegation:**
```javascript
// Hanya 1 event listener di parent
document.querySelector('#todo-list').addEventListener('click', toggleCompleted);
```

### ğŸ–±ï¸ Single Click vs Double Click

- **Single Click** â†’ Toggle completed (PUT request)
- **Double Click** â†’ Delete todo (DELETE request)

**âš ï¸ Masalah:** Double click juga trigger single click!

**ğŸ’¡ Alternatif yang lebih baik:**  
Tambahkan tombol **X** untuk delete, jadi tidak bentrok.

### ğŸ“š Proyek Mini untuk Belajar

> ğŸ“ Ini bukan proyek production-ready!  
> Tujuannya: **belajar cara kerja HTTP methods**

**Untuk production, pertimbangkan:**
- Error handling yang lebih baik
- Loading indicators
- Konfirmasi sebelum delete
- UI/UX yang lebih user-friendly

---

## ğŸ‰ Selamat!

Kamu sudah belajar:
- âœ… Event Delegation
- âœ… Dataset untuk menyimpan data
- âœ… PUT Request untuk update
- âœ… DELETE Request untuk hapus
- âœ… Toggle class dengan JavaScript

**ğŸš€ Next Steps:**  
Video berikutnya akan membahas **error handling dengan Fetch API** dan cara kerja `.catch()`!

---

**ğŸ“ Dibuat untuk pembelajaran pribadi**  
**ğŸ’ª Keep learning, keep coding!**
