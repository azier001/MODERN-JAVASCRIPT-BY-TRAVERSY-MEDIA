# ğŸš€ Dokumentasi Error Handling dengan Async/Await JavaScript

> **Catatan Pribadi**: Dokumentasi ini dibuat untuk memahami cara menangani error saat menggunakan async/await dalam JavaScript. Cocok untuk pemula yang ingin belajar step-by-step!

---

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Persiapan Awal](#persiapan-awal)
- [Metode 1: Try-Catch](#metode-1-try-catch)
  - [Langkah 1: Setup HTML](#langkah-1-setup-html)
  - [Langkah 2: Membuat Fungsi Async](#langkah-2-membuat-fungsi-async)
  - [Langkah 3: Menambahkan Try-Catch](#langkah-3-menambahkan-try-catch)
  - [Langkah 4: Melakukan Fetch Request](#langkah-4-melakukan-fetch-request)
  - [Langkah 5: Menangani Response](#langkah-5-menangani-response)
  - [Langkah 6: Menangani Status Error](#langkah-6-menangani-status-error)
- [Metode 2: Dot Catch](#metode-2-dot-catch)
  - [Langkah 7: Membuat Fungsi Tanpa Try-Catch](#langkah-7-membuat-fungsi-tanpa-try-catch)
  - [Langkah 8: Menggunakan Catch di Luar Fungsi](#langkah-8-menggunakan-catch-di-luar-fungsi)
- [Perbandingan Kedua Metode](#perbandingan-kedua-metode)
- [Tips dan Catatan](#tips-dan-catatan)
- [Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Ketika bekerja dengan **async/await** di JavaScript, kita perlu menangani error yang mungkin terjadi selama proses asynchronous. Ada **2 cara utama** untuk menangani error:

1. âœ… **Try-Catch** - Menangani error di dalam fungsi
2. âœ… **Dot Catch (.catch())** - Menangani error di luar fungsi

Dokumentasi ini akan membahas kedua metode secara detail dengan contoh praktis!

---

<a name="persiapan-awal"></a>
## ğŸ› ï¸ Persiapan Awal

### File yang Dibutuhkan:
- `index.html` - File HTML utama
- `script.js` - File JavaScript untuk kode kita

### API yang Digunakan:
- âœ… `https://jsonplaceholder.typicode.com` - API gratis untuk testing
- âš ï¸ `https://httpstat.us` - API untuk simulasi status code (kadang tidak stabil)

> **Alternatif untuk httpstat.us**: Jika `httpstat.us` tidak stabil, gunakan:
> - `https://httpbin.org/status/500` untuk error 500
> - `https://httpbin.org/status/404` untuk error 404

---

<a name="metode-1-try-catch"></a>
## ğŸ”¥ Metode 1: Try-Catch

<a name="langkah-1-setup-html"></a>
### ğŸ“ Langkah 1: Setup HTML

Pertama, buat file `index.html` dengan struktur dasar:

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Async & Await Error Handling</title>
  </head>
  <body>
    <h1>Async & Await Error Handling</h1>

    <div id="output"></div>

    <script src="./script.js"></script>
  </body>
</html>
```

**Penjelasan:**
- ğŸ“„ Struktur HTML sederhana
- ğŸ”— Terhubung ke file `script.js`
- ğŸ“¦ Div `output` untuk menampilkan hasil (opsional)

---

<a name="langkah-2-membuat-fungsi-async"></a>
### ğŸ“ Langkah 2: Membuat Fungsi Async

Buat file `script.js` dan mulai dengan fungsi async sederhana:

```javascript
const getUsers = async () => {
  // Kode akan ditambahkan di sini
};
```

**Penjelasan:**
- ğŸ¯ `async` = membuat fungsi menjadi asynchronous
- âš¡ Arrow function untuk penulisan yang lebih ringkas

---

<a name="langkah-3-menambahkan-try-catch"></a>
### ğŸ“ Langkah 3: Menambahkan Try-Catch

Tambahkan struktur try-catch ke dalam fungsi:

```javascript
const getUsers = async () => {
  try {
    // Kode request akan di sini
  } catch (error) {
    console.log(error);
  }
};
```

**Penjelasan:**
- âœ… `try` = blok kode yang akan dicoba
- âŒ `catch` = blok kode yang akan dijalankan jika ada error
- ğŸ” `error` = parameter yang menampung informasi error

---

<a name="langkah-4-melakukan-fetch-request"></a>
### ğŸ“ Langkah 4: Melakukan Fetch Request

Tambahkan kode untuk fetch data dari API:

```javascript
const getUsers = async () => {
  try {
    const response = await fetch('https://jsonplaceholder.typicode.com/users');
    
    const data = await response.json();
    
    console.log(data);
  } catch (error) {
    console.log(error);
  }
};

getUsers();
```

**Penjelasan:**
- ğŸŒ `fetch()` = mengambil data dari API
- â³ `await` = menunggu sampai promise selesai
- ğŸ“¦ `response.json()` = mengubah response menjadi format JSON
- ğŸ“ `getUsers()` = memanggil fungsi

**Hasil yang Diharapkan:**
- âœ… Console akan menampilkan array berisi 10 user

---

<a name="langkah-5-menangani-response"></a>
### ğŸ“ Langkah 5: Menangani Response

Coba test error dengan menghapus variabel `response`:

```javascript
const getUsers = async () => {
  try {
    await fetch('https://jsonplaceholder.typicode.com/users');
    
    // response tidak didefinisikan!
    const data = await response.json();
    
    console.log(data);
  } catch (error) {
    console.log(error); // ReferenceError: response is not defined
  }
};

getUsers();
```

**Penjelasan:**
- âŒ Error terjadi karena `response` tidak didefinisikan
- âœ… Tapi error **tertangkap** oleh catch block
- ğŸ”’ Aplikasi tidak crash

---

<a name="langkah-6-menangani-status-error"></a>
### ğŸ“ Langkah 6: Menangani Status Error (404, 500, dll)

**PENTING:** âš ï¸ Fetch API **TIDAK** otomatis throw error untuk status 404 atau 500!

Kita harus cek manual dan throw error sendiri:

```javascript
const getUsers = async () => {
  try {
    // Gunakan URL yang mengembalikan status 500
    const response = await fetch('https://httpbin.org/status/500');
    
    // Cek apakah response OK (status 200-299)
    if (!response.ok) {
      throw new Error('Request Failed');
    }
    
    const data = await response.text();
    
    console.log(data);
  } catch (error) {
    console.log(error); // Error: Request Failed
  }
};

getUsers();
```

**Penjelasan:**
- ğŸ” `response.ok` = property yang bernilai `true` jika status 200-299
- âš ï¸ `!response.ok` = jika status bukan 200-299 (misal 404, 500)
- ğŸš¨ `throw new Error()` = membuat error secara manual
- ğŸ“ `response.text()` = untuk response berbentuk text (bukan JSON)

**Alur Kerja:**
1. â¡ï¸ Request ke server
2. â¡ï¸ Dapat response dengan status 500
3. â¡ï¸ Cek `response.ok` â†’ `false`
4. â¡ï¸ Throw error "Request Failed"
5. â¡ï¸ Catch block menangkap error
6. â¡ï¸ Console log error

---

<a name="metode-2-dot-catch"></a>
## ğŸ¨ Metode 2: Dot Catch

<a name="langkah-7-membuat-fungsi-tanpa-try-catch"></a>
### ğŸ“ Langkah 7: Membuat Fungsi Tanpa Try-Catch

Buat fungsi baru **tanpa** menggunakan try-catch:

```javascript
const getPosts = async () => {
  const response = await fetch('https://jsonplaceholder.typicode.com/posts');

  if (!response.ok) {
    throw new Error('Request Failed');
  }

  const data = await response.json();

  console.log(data);
};
```

**Penjelasan:**
- âŒ Tidak ada try-catch di dalam fungsi
- ğŸš¨ Jika ada error, akan menjadi "uncaught error"
- âš ï¸ Aplikasi bisa crash!

---

<a name="langkah-8-menggunakan-catch-di-luar-fungsi"></a>
### ğŸ“ Langkah 8: Menggunakan Catch di Luar Fungsi

Tangani error dengan `.catch()` saat memanggil fungsi:

```javascript
const getPosts = async () => {
  const response = await fetch('https://httpbin.org/status/500');

  if (!response.ok) {
    throw new Error('Request Failed');
  }

  const data = await response.text();

  console.log(data);
};

// Panggil dengan .catch()
getPosts().catch((error) => console.log(error));
```

**Penjelasan:**
- âœ… Error ditangkap oleh `.catch()` di luar fungsi
- ğŸ¯ Fungsi async mengembalikan Promise
- ğŸ”— Promise bisa di-chain dengan `.catch()`

**Alur Kerja:**
1. â¡ï¸ `getPosts()` dipanggil
2. â¡ï¸ Request gagal dengan status 500
3. â¡ï¸ `throw new Error()` melempar error
4. â¡ï¸ `.catch()` menangkap error
5. â¡ï¸ Console log error

---

<a name="perbandingan-kedua-metode"></a>
## âš–ï¸ Perbandingan Kedua Metode

### ğŸ¥‡ Metode 1: Try-Catch (DIREKOMENDASIKAN)

**Kelebihan:**
- âœ… Error handling ter-encapsulasi di dalam fungsi
- âœ… Kode lebih terorganisir
- âœ… Lebih mudah dibaca dan di-maintain
- âœ… Konsisten dengan pattern async/await

**Kekurangan:**
- âš ï¸ Sedikit lebih banyak kode (butuh try-catch block)

**Contoh Lengkap:**
```javascript
const getUsers = async () => {
  try {
    const response = await fetch('https://jsonplaceholder.typicode.com/users');

    if (!response.ok) {
      throw new Error('Request Failed');
    }

    const data = await response.json();
    console.log(data);
  } catch (error) {
    console.log(error);
  }
};

getUsers();
```

---

### ğŸ¥ˆ Metode 2: Dot Catch

**Kelebihan:**
- âœ… Kode di dalam fungsi lebih ringkas
- âœ… Bisa di-chain dengan promise lain

**Kekurangan:**
- âŒ Error handling di luar fungsi (tidak encapsulated)
- âŒ Mixing async/await dengan promise chain (.catch)
- âŒ Kurang konsisten
- âŒ Mudah lupa menambahkan .catch()

**Contoh Lengkap:**
```javascript
const getPosts = async () => {
  const response = await fetch('https://jsonplaceholder.typicode.com/posts');

  if (!response.ok) {
    throw new Error('Request Failed');
  }

  const data = await response.json();
  console.log(data);
};

getPosts().catch((error) => console.log(error));
```

---

<a name="tips-dan-catatan"></a>
## ğŸ’¡ Tips dan Catatan

### ğŸ¯ Best Practices:

1. **Selalu Gunakan Try-Catch untuk Async/Await**
   ```javascript
   // âœ… GOOD
   const fetchData = async () => {
     try {
       const response = await fetch(url);
       // ...
     } catch (error) {
       // handle error
     }
   };
   ```

2. **Selalu Cek response.ok untuk Fetch API**
   ```javascript
   // âœ… GOOD
   if (!response.ok) {
     throw new Error('Request Failed');
   }
   ```

3. **Gunakan response.json() atau response.text() sesuai tipe data**
   ```javascript
   // Untuk JSON
   const data = await response.json();
   
   // Untuk text/HTML
   const data = await response.text();
   ```

### âš ï¸ Hal yang Perlu Diingat:

- âŒ Fetch API **tidak** otomatis throw error untuk status 404/500
- âœ… Kita harus cek `response.ok` secara manual
- ğŸ”„ `response.json()` juga mengembalikan Promise, jadi butuh `await`
- ğŸ¯ Try-catch lebih direkomendasikan daripada .catch() untuk async/await

### ğŸ”§ Alternatif API untuk Testing:

Jika `httpstat.us` tidak stabil, gunakan:
```javascript
// Untuk status 500
'https://httpbin.org/status/500'

// Untuk status 404
'https://httpbin.org/status/404'

// Untuk status 200 (success)
'https://httpbin.org/status/200'
```

---

<a name="kesimpulan"></a>
## ğŸ“ Kesimpulan

### ğŸ“Œ Ringkasan:

1. Ada **2 cara** menangani error dengan async/await:
   - âœ… **Try-Catch** (di dalam fungsi) â†’ DIREKOMENDASIKAN
   - âš ï¸ **Dot Catch** (di luar fungsi)

2. **Fetch API** tidak otomatis throw error untuk status 404/500:
   - Harus cek `response.ok` manual
   - Throw error sendiri jika status tidak OK

3. **Try-Catch lebih baik** karena:
   - Error handling ter-encapsulasi
   - Lebih mudah di-maintain
   - Konsisten dengan pattern async/await

### ğŸš€ Next Steps:

Setelah memahami error handling, kamu bisa belajar:
- Multiple concurrent requests dengan `Promise.all()`
- Error handling yang lebih advanced
- Custom error classes
- Retry logic untuk failed requests

---

## ğŸ“š Kode Lengkap Final

```javascript
// METODE 1: Try-Catch (DIREKOMENDASIKAN)
const getUsers = async () => {
  try {
    const response = await fetch('https://jsonplaceholder.typicode.com/users');
    // const response = await fetch('https://httpbin.org/status/500');

    if (!response.ok) {
      throw new Error('Request Failed');
    }

    const data = await response.json();
    // const data = await response.text(); // Untuk response text

    console.log(data);
  } catch (error) {
    console.log(error);
  }
};

// METODE 2: Dot Catch
const getPosts = async () => {
  const response = await fetch('https://jsonplaceholder.typicode.com/posts');
  // const response = await fetch('https://httpbin.org/status/500');

  if (!response.ok) {
    throw new Error('Request Failed');
  }

  const data = await response.json();
  // const data = await response.text();

  console.log(data);
};

// Panggil fungsi
getUsers();
// getPosts().catch((error) => console.log(error));
```

---

**Happy Coding! ğŸ‰**

> Dokumentasi ini dibuat untuk pembelajaran pribadi. Jangan ragu untuk bereksperimen dan mencoba variasi kode yang berbeda!
