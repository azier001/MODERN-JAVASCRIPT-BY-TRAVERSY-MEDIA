# ğŸ›’ Shopping List App - Mencegah Duplikasi Item

## ğŸ“‘ Daftar Isi

- [Pendahuluan](#pendahuluan)
- [Apa yang Akan Kita Pelajari?](#apa-yang-akan-kita-pelajari)
- [Membuat Fungsi checkIfItemExists](#membuat-fungsi-checkifitemexists)
  - [Langkah 1: Struktur Dasar Fungsi](#langkah-1-struktur-dasar-fungsi)
  - [Langkah 2: Menggunakan Method includes()](#langkah-2-menggunakan-method-includes)
  - [Langkah 3: Menyederhanakan Kode](#langkah-3-menyederhanakan-kode)
- [Implementasi Pengecekan Duplikasi](#implementasi-pengecekan-duplikasi)
  - [Menambahkan Pengecekan di onAddItemSubmit](#menambahkan-pengecekan-di-onadditemsubmit)
  - [Mengapa Hanya di Mode Tambah?](#mengapa-hanya-di-mode-tambah)
- [Testing Aplikasi](#testing-aplikasi)
- [Kode Lengkap](#kode-lengkap)
- [Rangkuman](#rangkuman)

---

<a name="pendahuluan"></a>
## ğŸ¯ Pendahuluan

Selamat datang di dokumentasi terakhir dari Shopping List App! ğŸ‰

Di bagian ini, kita akan menambahkan fitur penting: **mencegah pengguna menambahkan item yang sudah ada** (duplikasi). Bayangkan kalau kita bisa menambahkan "Juice" berkali-kali, shopping list kita akan berantakan kan? Nah, kita akan atasi masalah itu!

---

<a name="apa-yang-akan-kita-pelajari"></a>
## ğŸ“š Apa yang Akan Kita Pelajari?

Dalam tutorial ini, kita akan belajar:

âœ… Membuat fungsi untuk mengecek apakah item sudah ada

âœ… Menggunakan method `.includes()` pada array

âœ… Menambahkan validasi duplikasi saat submit

âœ… Memastikan edit mode tetap berfungsi dengan baik

---

<a name="membuat-fungsi-checkifitemexists"></a>
## ğŸ” Membuat Fungsi checkIfItemExists

<a name="langkah-1-struktur-dasar-fungsi"></a>
### Langkah 1: Struktur Dasar Fungsi

Pertama, kita akan membuat fungsi baru bernama `checkIfItemExists()`. Fungsi ini akan menerima parameter `item` (nama item yang mau kita cek).

Letakkan fungsi ini di bawah fungsi `onClickItem()`:

```javascript
// âœ¨ FUNGSI BARU - Dicek di bawah onClickItem
function checkIfItemExists(item) {
  const itemsFromStorage = getItemsFromStorage();
  
  // Kode selanjutnya akan kita tambahkan di sini
}
```

**Penjelasan:**
- ğŸ“¦ `itemsFromStorage` = mengambil semua item yang sudah tersimpan di localStorage
- ğŸ¯ Kita perlu data ini untuk mengecek apakah item baru sudah ada atau belum

---

<a name="langkah-2-menggunakan-method-includes"></a>
### Langkah 2: Menggunakan Method includes()

Sekarang kita akan menggunakan method `.includes()`. Method ini sangat berguna untuk mengecek apakah sebuah nilai ada di dalam array!

```javascript
function checkIfItemExists(item) {
  const itemsFromStorage = getItemsFromStorage();
  
  // âœ¨ KODE BARU - Menggunakan includes untuk cek duplikasi
  if (itemsFromStorage.includes(item)) {
    return true;
  } else {
    return false;
  }
}
```

**Penjelasan:**
- ğŸ” `itemsFromStorage.includes(item)` = mengecek apakah `item` ada di dalam array `itemsFromStorage`
- âœ… Jika ada, return `true` (item sudah ada)
- âŒ Jika tidak ada, return `false` (item belum ada, boleh ditambahkan)

**Contoh:**
```javascript
const fruits = ['Apple', 'Banana', 'Orange'];
fruits.includes('Banana'); // true âœ…
fruits.includes('Mango');  // false âŒ
```

---

<a name="langkah-3-menyederhanakan-kode"></a>
### Langkah 3: Menyederhanakan Kode

Ternyata kode kita bisa disederhanakan! Karena `.includes()` sudah mengembalikan `true` atau `false`, kita tidak perlu menggunakan if-else lagi.

```javascript
// ğŸ¯ VERSI FINAL - Lebih ringkas!
function checkIfItemExists(item) {
  const itemsFromStorage = getItemsFromStorage();
  return itemsFromStorage.includes(item);
}
```

**Penjelasan:**
- ğŸš€ Fungsi ini sekarang hanya 2 baris!
- ğŸ’¡ `return itemsFromStorage.includes(item)` langsung mengembalikan hasil true/false
- âš¡ Lebih efisien dan mudah dibaca

---

<a name="implementasi-pengecekan-duplikasi"></a>
## ğŸ”§ Implementasi Pengecekan Duplikasi

<a name="menambahkan-pengecekan-di-onadditemsubmit"></a>
### Menambahkan Pengecekan di onAddItemSubmit

Sekarang kita akan menggunakan fungsi `checkIfItemExists()` di fungsi `onAddItemSubmit()`. Kita akan menambahkan pengecekan di bagian **else** (ketika TIDAK dalam edit mode).

Cari bagian kode ini di fungsi `onAddItemSubmit()`:

```javascript
function onAddItemSubmit(e) {
  e.preventDefault();

  const newItem = itemInput.value;

  // Validate Input
  if (newItem === '') {
    alert('Please add an item');
    return;
  }

  // Check for edit mode
  if (isEditMode) {
    const itemToEdit = itemList.querySelector('.edit-mode');

    removeItemFromStorage(itemToEdit.textContent);
    itemToEdit.classList.remove('edit-mode');
    itemToEdit.remove();
    isEditMode = false;
  } 
  // âœ¨ KODE BARU - Tambahkan else untuk cek duplikasi
  else {
    if (checkIfItemExists(newItem)) {
      alert('That item already exists!');
      return;
    }
  }

  // Create item DOM element
  addItemToDOM(newItem);

  // Add item to local storage
  addItemToStorage(newItem);

  checkUI();

  itemInput.value = '';
}
```

**Penjelasan:**
- ğŸš¨ `else` = hanya cek duplikasi kalau TIDAK dalam edit mode
- ğŸ” `checkIfItemExists(newItem)` = panggil fungsi untuk cek apakah item sudah ada
- âš ï¸ Jika sudah ada, tampilkan alert "That item already exists!"
- ğŸ›‘ `return` = hentikan eksekusi, jadi item tidak ditambahkan

---

<a name="mengapa-hanya-di-mode-tambah"></a>
### Mengapa Hanya di Mode Tambah?

**Pertanyaan Penting:** Kenapa kita hanya cek duplikasi di mode tambah (bukan di edit mode)?

**Jawaban:**

ğŸ¤” Bayangkan skenario ini:
1. Kita punya item "Eggnog" di list
2. Kita klik "Eggnog" untuk edit
3. Kita tidak mengubah apa-apa, langsung klik "Update Item"
4. **Masalah:** Kalau kita cek duplikasi, sistem akan bilang "Eggnog already exists!" padahal kita cuma mau update item yang sama

âœ… **Solusi:** Dengan menggunakan `else`, pengecekan duplikasi hanya terjadi saat **menambah item baru**, bukan saat **mengedit item yang sudah ada**.

---

<a name="testing-aplikasi"></a>
## ğŸ§ª Testing Aplikasi

Mari kita test semua fitur untuk memastikan semuanya bekerja dengan baik!

### Test 1: Cek Duplikasi âŒ
1. Tambahkan item "Juice"
2. Coba tambahkan "Juice" lagi
3. **Hasil:** Muncul alert "That item already exists!" âœ…

### Test 2: Edit Item Tanpa Mengubah Nama âœï¸
1. Klik item "Eggnog"
2. Tidak mengubah apa-apa
3. Klik "Update Item"
4. **Hasil:** Item tetap "Eggnog" tanpa error âœ…

### Test 3: Hapus Semua Item ğŸ—‘ï¸
1. Klik "Clear All"
2. **Hasil:** 
   - Semua item hilang
   - Button "Clear All" menghilang
   - Filter menghilang âœ…

### Test 4: Input Kosong ğŸš«
1. Jangan ketik apa-apa di input
2. Klik "Add Item"
3. **Hasil:** Muncul alert "Please add an item" âœ…

### Test 5: Menambah dan Filter Item ğŸ”
1. Tambahkan beberapa item
2. **Hasil:** Button "Clear All" dan Filter muncul âœ…
3. Ketik di filter untuk mencari item
4. **Hasil:** Item yang tidak cocok disembunyikan âœ…

### Test 6: Reload Page ğŸ”„
1. Reload halaman (F5)
2. **Hasil:** Semua item masih ada (tersimpan di localStorage) âœ…

---

<a name="kode-lengkap"></a>
## ğŸ“ Kode Lengkap

Berikut adalah kode JavaScript lengkap dengan semua fitur:

```javascript
const itemForm = document.getElementById('item-form');
const itemInput = document.getElementById('item-input');
const itemList = document.getElementById('item-list');
const clearBtn = document.getElementById('clear');
const itemFilter = document.getElementById('filter');
const formBtn = itemForm.querySelector('button');
let isEditMode = false;

function displayItems() {
  const itemsFromStorage = getItemsFromStorage();
  itemsFromStorage.forEach((item) => addItemToDOM(item));
  checkUI();
}

function onAddItemSubmit(e) {
  e.preventDefault();

  const newItem = itemInput.value;

  // Validate Input
  if (newItem === '') {
    alert('Please add an item');
    return;
  }

  // Check for edit mode
  if (isEditMode) {
    const itemToEdit = itemList.querySelector('.edit-mode');

    removeItemFromStorage(itemToEdit.textContent);
    itemToEdit.classList.remove('edit-mode');
    itemToEdit.remove();
    isEditMode = false;
  } else {
    // â­ CEK DUPLIKASI - Hanya untuk mode tambah item baru
    if (checkIfItemExists(newItem)) {
      alert('That item already exists!');
      return;
    }
  }

  // Create item DOM element
  addItemToDOM(newItem);

  // Add item to local storage
  addItemToStorage(newItem);

  checkUI();

  itemInput.value = '';
}

function addItemToDOM(item) {
  // Create list item
  const li = document.createElement('li');
  li.appendChild(document.createTextNode(item));

  const button = createButton('remove-item btn-link text-red');
  li.appendChild(button);

  // Add li to the DOM
  itemList.appendChild(li);
}

function createButton(classes) {
  const button = document.createElement('button');
  button.className = classes;
  const icon = createIcon('fa-solid fa-xmark');
  button.appendChild(icon);
  return button;
}

function createIcon(classes) {
  const icon = document.createElement('i');
  icon.className = classes;
  return icon;
}

function addItemToStorage(item) {
  const itemsFromStorage = getItemsFromStorage();

  // Add new item to array
  itemsFromStorage.push(item);

  // Convert to JSON string and set to local storage
  localStorage.setItem('items', JSON.stringify(itemsFromStorage));
}

function getItemsFromStorage() {
  let itemsFromStorage;

  if (localStorage.getItem('items') === null) {
    itemsFromStorage = [];
  } else {
    itemsFromStorage = JSON.parse(localStorage.getItem('items'));
  }

  return itemsFromStorage;
}

function onClickItem(e) {
  if (e.target.parentElement.classList.contains('remove-item')) {
    removeItem(e.target.parentElement.parentElement);
  } else {
    setItemToEdit(e.target);
  }
}

// â­ FUNGSI BARU - Cek apakah item sudah ada
function checkIfItemExists(item) {
  const itemsFromStorage = getItemsFromStorage();
  return itemsFromStorage.includes(item);
}

function setItemToEdit(item) {
  isEditMode = true;

  itemList
    .querySelectorAll('li')
    .forEach((i) => i.classList.remove('edit-mode'));

  item.classList.add('edit-mode');
  formBtn.innerHTML = '<i class="fa-solid fa-pen"></i>   Update Item';
  formBtn.style.backgroundColor = '#228B22';
  itemInput.value = item.textContent;
}

function removeItem(item) {
  if (confirm('Are you sure?')) {
    // Remove item from DOM
    item.remove();

    // Remove item from storage
    removeItemFromStorage(item.textContent);

    checkUI();
  }
}

function removeItemFromStorage(item) {
  let itemsFromStorage = getItemsFromStorage();

  // Filter out item to be removed
  itemsFromStorage = itemsFromStorage.filter((i) => i !== item);

  // Re-set to localstorage
  localStorage.setItem('items', JSON.stringify(itemsFromStorage));
}

function clearItems() {
  while (itemList.firstChild) {
    itemList.removeChild(itemList.firstChild);
  }

  // Clear from localStorage
  localStorage.removeItem('items');

  checkUI();
}

function filterItems(e) {
  const items = itemList.querySelectorAll('li');
  const text = e.target.value.toLowerCase();

  items.forEach((item) => {
    const itemName = item.firstChild.textContent.toLowerCase();

    if (itemName.indexOf(text) != -1) {
      item.style.display = 'flex';
    } else {
      item.style.display = 'none';
    }
  });
}

function checkUI() {
  itemInput.value = '';

  const items = itemList.querySelectorAll('li');

  if (items.length === 0) {
    clearBtn.style.display = 'none';
    itemFilter.style.display = 'none';
  } else {
    clearBtn.style.display = 'block';
    itemFilter.style.display = 'block';
  }

  formBtn.innerHTML = '<i class="fa-solid fa-plus"></i> Add Item';
  formBtn.style.backgroundColor = '#333';

  isEditMode = false;
}

// Initialize app
function init() {
  // Event Listeners
  itemForm.addEventListener('submit', onAddItemSubmit);
  itemList.addEventListener('click', onClickItem);
  clearBtn.addEventListener('click', clearItems);
  itemFilter.addEventListener('input', filterItems);
  document.addEventListener('DOMContentLoaded', displayItems);

  checkUI();
}

init();
```

---

<a name="rangkuman"></a>
## ğŸ“ Rangkuman

Selamat! ğŸ‰ Kamu telah menyelesaikan Shopping List App dengan fitur lengkap!

### Yang Sudah Kita Pelajari:

1. **DOM Manipulation** ğŸ¨
   - Menambah dan menghapus elemen
   - Mengubah class dan style
   - Event handling

2. **JavaScript Basics** ğŸ’»
   - Functions
   - Conditionals (if-else)
   - Loops (forEach, while)
   - Array methods (includes, filter, push)

3. **Local Storage** ğŸ’¾
   - Menyimpan data
   - Mengambil data
   - Menghapus data
   - JSON stringify dan parse

4. **Validasi** âœ…
   - Input kosong
   - Duplikasi item
   - Konfirmasi hapus

### Fitur yang Berhasil Dibuat:

âœ… Menambah item baru

âœ… Mengedit item yang ada

âœ… Menghapus item (satu per satu atau semua)

âœ… Filter/pencarian item

âœ… Mencegah duplikasi item

âœ… Penyimpanan data persisten dengan localStorage

âœ… UI yang responsive (button dan filter muncul/hilang sesuai kondisi)

### Langkah Selanjutnya:

Pada video berikutnya, aplikasi ini akan di-deploy ke platform **Netlify** agar bisa diakses secara online! ğŸš€

---

> ğŸ’¡ **Tips:** Terus latihan dengan mencoba modifikasi aplikasi ini, misalnya menambahkan fitur kategori, prioritas, atau tanggal deadline untuk setiap item!

---

**Happy Coding! ğŸš€ğŸ‘¨â€ğŸ’»ğŸ‘©â€ğŸ’»**
