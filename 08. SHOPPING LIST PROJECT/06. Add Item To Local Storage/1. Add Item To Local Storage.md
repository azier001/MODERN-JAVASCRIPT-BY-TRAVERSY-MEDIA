# ğŸ›’ Dokumentasi: Implementasi Local Storage pada Shopping List App

## ğŸ“‘ Daftar Isi

- [Pengenalan](#pengenalan)
- [Apa itu Local Storage?](#apa-itu-local-storage)
- [Konsep Dasar](#konsep-dasar)
  - [Kenapa Perlu Local Storage?](#kenapa-perlu-local-storage)
  - [Cara Kerja Local Storage](#cara-kerja-local-storage)
- [Refactoring Kode](#refactoring-kode)
  - [Memisahkan Function Add Item](#memisahkan-function-add-item)
- [Implementasi Add to Local Storage](#implementasi-add-to-local-storage)
  - [Membuat Function addItemToStorage](#membuat-function-additemstorage)
  - [Penjelasan Step by Step](#penjelasan-step-by-step)
- [Testing Hasil](#testing-hasil)
- [Kode Lengkap](#kode-lengkap)
- [Langkah Selanjutnya](#langkah-selanjutnya)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Selamat datang di dokumentasi pembelajaran tentang **Local Storage**! ğŸ‰

Pada bagian ini, kita akan belajar bagaimana cara **menyimpan data** ke dalam browser menggunakan Local Storage. Saat ini, aplikasi Shopping List kita sudah bisa menambahkan item, tapi ketika halaman di-reload, semua data akan **hilang**. ğŸ˜¢

Kita akan memperbaiki masalah ini dengan mengimplementasikan 3 fitur utama:

1. âœ… **Menyimpan item** ke Local Storage
2. âŒ **Menghapus item** dari Local Storage
3. ğŸ“¥ **Memuat item** saat halaman dibuka

> **Catatan**: Pada dokumentasi ini, kita fokus pada **bagian pertama** yaitu menyimpan item ke Local Storage.

---

<a name="apa-itu-local-storage"></a>
## ğŸ“– Apa itu Local Storage?

**Local Storage** adalah fitur pada browser yang memungkinkan kita untuk **menyimpan data** secara permanen di komputer pengguna. Data yang disimpan akan tetap ada meskipun browser ditutup atau halaman di-reload. ğŸ”’

### âœ¨ Karakteristik Local Storage:

- ğŸ’¾ Data tersimpan di **browser** pengguna
- ğŸ”„ Data **tidak hilang** saat refresh/reload
- ğŸ”‘ Menggunakan sistem **key-value pairs** (pasangan kunci-nilai)
- ğŸ“ Hanya bisa menyimpan data dalam bentuk **string**

---

<a name="konsep-dasar"></a>
## ğŸ“š Konsep Dasar

<a name="kenapa-perlu-local-storage"></a>
### ğŸ¤” Kenapa Perlu Local Storage?

Bayangkan kamu membuat shopping list:
1. Kamu menambahkan: Susu, Roti, Telur âœï¸
2. Kamu refresh halaman ğŸ”„
3. **Semua data hilang!** ğŸ˜±

Dengan Local Storage, data akan **tersimpan** dan tetap ada saat kamu buka lagi! ğŸŠ

<a name="cara-kerja-local-storage"></a>
### âš™ï¸ Cara Kerja Local Storage

Local Storage bekerja dengan konsep **key-value pairs**:

```javascript
// Menyimpan data
localStorage.setItem('namaKey', 'nilaiData');

// Mengambil data
localStorage.getItem('namaKey');

// Menghapus data
localStorage.removeItem('namaKey');
```

**âš ï¸ Masalah**: Local Storage hanya bisa menyimpan **STRING**, tapi kita ingin menyimpan **ARRAY**!

**âœ… Solusi**: 
- Gunakan `JSON.stringify()` untuk **mengubah array menjadi string** saat menyimpan
- Gunakan `JSON.parse()` untuk **mengubah string kembali menjadi array** saat mengambil

```javascript
// Array yang ingin disimpan
const items = ['Susu', 'Roti', 'Telur'];

// Ubah array menjadi string, lalu simpan
localStorage.setItem('items', JSON.stringify(items));

// Ambil dari storage, lalu ubah kembali menjadi array
const savedItems = JSON.parse(localStorage.getItem('items'));
```

---

<a name="refactoring-kode"></a>
## ğŸ”§ Refactoring Kode

<a name="memisahkan-function-add-item"></a>
### ğŸ“¦ Memisahkan Function Add Item

Sebelum menambahkan fitur Local Storage, kita perlu **merapikan kode** terlebih dahulu. Kita akan memisahkan function `addItem` menjadi lebih spesifik.

#### ğŸ”´ Kode Lama:

```javascript
function addItem(e) {
  e.preventDefault();
  const newItem = itemInput.value;
  
  // Semua kode untuk menambahkan ke DOM ada di sini
  const li = document.createElement('li');
  li.appendChild(document.createTextNode(newItem));
  // ... dst
}
```

#### ğŸŸ¢ Kode Baru (Setelah Refactoring):

**1. Ubah nama function menjadi lebih deskriptif:**

```javascript
// âŒ LAMA: addItem
// âœ… BARU: onAddItemSubmit
function onAddItemSubmit(e) {  // ğŸ”¥ NAMA FUNCTION DIUBAH!
  e.preventDefault();
  const newItem = itemInput.value;

  // Validasi input
  if (newItem === '') {
    alert('Please add an item');
    return;
  }

  // Nanti akan memanggil 2 function:
  // 1. Tambah ke DOM
  // 2. Tambah ke Local Storage
}
```

**2. Buat function baru untuk menambahkan ke DOM:**

```javascript
// âœ¨ FUNCTION BARU!
function addItemToDOM(item) {  // ğŸ”¥ FUNCTION BARU UNTUK MENAMBAHKAN KE DOM
  // Create list item
  const li = document.createElement('li');
  li.appendChild(document.createTextNode(item));  // ğŸ”¥ Menggunakan parameter 'item'

  const button = createButton('remove-item btn-link text-red');
  li.appendChild(button);

  // Add li to the DOM
  itemList.appendChild(li);
}
```

**3. Update function `onAddItemSubmit` untuk memanggil function baru:**

```javascript
function onAddItemSubmit(e) {
  e.preventDefault();
  const newItem = itemInput.value;

  if (newItem === '') {
    alert('Please add an item');
    return;
  }

  // ğŸ“Œ PANGGIL FUNCTION BARU!
  addItemToDOM(newItem);  // ğŸ”¥ MENAMBAHKAN KE DOM

  checkUI();
  itemInput.value = '';
}
```

**4. Jangan lupa update Event Listener:**

```javascript
// âŒ LAMA: itemForm.addEventListener('submit', addItem);
// âœ… BARU:
itemForm.addEventListener('submit', onAddItemSubmit);  // ğŸ”¥ NAMA FUNCTION DIUBAH!
```

### ğŸ’¡ Kenapa Perlu Refactoring?

Dengan memisahkan kode, kita bisa:
- âœ… Kode lebih **rapi** dan **terorganisir**
- âœ… Mudah untuk **menambahkan fitur baru** (Local Storage)
- âœ… Setiap function punya **tugas yang jelas**

---

<a name="implementasi-add-to-local-storage"></a>
## ğŸ’¾ Implementasi Add to Local Storage

<a name="membuat-function-additemstorage"></a>
### ğŸ“ Membuat Function addItemToStorage

Sekarang kita akan membuat function untuk menyimpan item ke Local Storage!

```javascript
// âœ¨ FUNCTION BARU UNTUK LOCAL STORAGE!
function addItemToStorage(item) {  // ğŸ”¥ FUNCTION BARU!
  let itemsFromStorage;  // ğŸ”¥ Variabel untuk menampung array

  // 1ï¸âƒ£ CEK APAKAH SUDAH ADA DATA DI LOCAL STORAGE
  if (localStorage.getItem('items') === null) {  // ğŸ”¥ Cek data dengan key 'items'
    // Jika TIDAK ada, buat array kosong
    itemsFromStorage = [];  // ğŸ”¥ Array kosong
  } else {
    // Jika SUDAH ada, ambil dan parse menjadi array
    itemsFromStorage = JSON.parse(localStorage.getItem('items'));  // ğŸ”¥ Parse string â†’ array
  }

  // 2ï¸âƒ£ TAMBAHKAN ITEM BARU KE ARRAY
  itemsFromStorage.push(item);  // ğŸ”¥ Tambahkan item baru

  // 3ï¸âƒ£ UBAH ARRAY MENJADI STRING DAN SIMPAN KE LOCAL STORAGE
  localStorage.setItem('items', JSON.stringify(itemsFromStorage));  // ğŸ”¥ Stringify & simpan
}
```

<a name="penjelasan-step-by-step"></a>
### ğŸ” Penjelasan Step by Step

#### **STEP 1: Membuat Variabel untuk Menyimpan Array** ğŸ“¦

```javascript
let itemsFromStorage;
```

Variabel ini akan menampung **array items** yang ada di Local Storage.

---

#### **STEP 2: Cek Apakah Sudah Ada Data** ğŸ”

```javascript
if (localStorage.getItem('items') === null) {  // ğŸ”¥ Cek apakah data NULL
  itemsFromStorage = [];  // ğŸ”¥ Jika NULL â†’ array kosong
} else {
  itemsFromStorage = JSON.parse(localStorage.getItem('items'));  // ğŸ”¥ Jika ADA â†’ parse jadi array
}
```

**Penjelasan:**

- `localStorage.getItem('items')` â†’ Mengambil data dengan key `'items'` ğŸ”‘
- Jika hasilnya `null`, artinya **belum ada data** â†’ Buat array kosong `[]` ğŸ“¦
- Jika hasilnya **bukan null**, artinya **sudah ada data** â†’ Ambil dan parse dengan `JSON.parse()` ğŸ”„

**Contoh:**

```javascript
// âŒ Pertama kali (belum ada data)
localStorage.getItem('items'); // null
itemsFromStorage = []; // Array kosong ğŸ“¦

// âœ… Kedua kali (sudah ada data)
localStorage.getItem('items'); // '["Susu","Roti"]' (string) ğŸ“
itemsFromStorage = JSON.parse('["Susu","Roti"]'); // ["Susu","Roti"] (array) ğŸ”„
```

---

#### **STEP 3: Tambahkan Item Baru ke Array** â•

```javascript
itemsFromStorage.push(item);  // ğŸ”¥ Tambahkan item ke array
```

**Penjelasan:**

- Method `.push()` menambahkan item baru ke **akhir array** â•
- `item` adalah parameter yang dikirim dari function ğŸ“¥

**Contoh:**

```javascript
// â¬œ Array awal
itemsFromStorage = ['Susu', 'Roti'];

// â• Tambahkan 'Telur'
itemsFromStorage.push('Telur');  // ğŸ”¥ PUSH!

// âœ… Hasil: ['Susu', 'Roti', 'Telur']
```

---

#### **STEP 4: Simpan ke Local Storage** ğŸ’¾

```javascript
localStorage.setItem('items', JSON.stringify(itemsFromStorage));  // ğŸ”¥ SIMPAN!
```

**Penjelasan:**

- `JSON.stringify()` â†’ Ubah array menjadi string ğŸ“
- `localStorage.setItem()` â†’ Simpan dengan key `'items'` ğŸ’¾

**Contoh:**

```javascript
// ğŸ“¦ Array
itemsFromStorage = ['Susu', 'Roti', 'Telur'];

// ğŸ“ Stringified
JSON.stringify(itemsFromStorage);  // ğŸ”¥ Ubah jadi string
// Hasil: '["Susu","Roti","Telur"]'

// ğŸ’¾ Disimpan ke Local Storage dengan key 'items'
localStorage.setItem('items', '["Susu","Roti","Telur"]');  // ğŸ”¥ SIMPAN!
```

---

### ğŸ”— Menghubungkan dengan Function onAddItemSubmit

Sekarang kita perlu memanggil function `addItemToStorage` di dalam `onAddItemSubmit`:

```javascript
function onAddItemSubmit(e) {
  e.preventDefault();
  const newItem = itemInput.value;

  if (newItem === '') {
    alert('Please add an item');
    return;
  }

  // Create item DOM element
  addItemToDOM(newItem);  // âœ… Menambahkan ke DOM

  // Add item to local storage
  addItemToStorage(newItem);  // ğŸ”¥ BARIS BARU! Menambahkan ke Local Storage

  checkUI();
  itemInput.value = '';
}
```

**ğŸ’¡ Perhatikan:** Baris `addItemToStorage(newItem);` adalah **kode baru** yang ditambahkan!

### ğŸ“Š Alur Lengkap

```
User mengetik "Susu" â†’ Klik Submit
         â†“
onAddItemSubmit dipanggil âš¡
         â†“
addItemToDOM("Susu")  â†’ Item muncul di halaman ğŸ¨
         â†“
addItemToStorage("Susu")  â†’ Item disimpan ke Local Storage ğŸ’¾
    â†“
    â”œâ”€ Cek data lama di Local Storage ğŸ”
    â”œâ”€ Parse string jadi array (jika ada) ğŸ”„
    â”œâ”€ Tambahkan "Susu" ke array â•
    â””â”€ Stringify & simpan kembali ğŸ’¾
         â†“
checkUI() â†’ Update tampilan filter & tombol clear ğŸ”„
         â†“
Input dikosongkan âœ¨
```

---

<a name="testing-hasil"></a>
## ğŸ§ª Testing Hasil

### ğŸ“ Cara Testing:

1. **Buka aplikasi** di browser
2. **Ketik item** (misalnya: "Juice")
3. **Klik submit**
4. **Buka Developer Tools** (F12)
5. Pilih tab **Application**
6. Klik **Local Storage** â†’ Pilih domain website kamu
7. Lihat key `items` â†’ Akan ada value berisi array dalam bentuk string

### ğŸ‘ï¸ Apa yang Akan Terlihat:

**Setelah menambahkan "Juice":**

```
Key: items
Value: ["Juice"]
```

**Setelah menambahkan "Milk":**

```
Key: items
Value: ["Juice","Milk"]
```

### ğŸ¨ Tampilan di Developer Tools:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Application                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â–¼ Local Storage                        â”‚
â”‚    â–¼ http://localhost:5500             â”‚
â”‚      Key       â”‚  Value                 â”‚
â”‚      items     â”‚  ["Juice","Milk"]      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

> **ğŸ’¡ Catatan Penting**: Data terlihat seperti array, tapi sebenarnya itu adalah **string**! Itulah hasil dari `JSON.stringify()`. Ketika kita ambil kembali dengan `JSON.parse()`, baru akan berubah menjadi array lagi.

---

<a name="kode-lengkap"></a>
## ğŸ“„ Kode Lengkap

Berikut adalah kode lengkap `script.js` setelah implementasi Local Storage:

```javascript
const itemForm = document.getElementById('item-form');
const itemInput = document.getElementById('item-input');
const itemList = document.getElementById('item-list');
const clearBtn = document.getElementById('clear');
const itemFilter = document.getElementById('filter');

// ğŸ”¥ FUNCTION INI DIUBAH NAMANYA (dari addItem â†’ onAddItemSubmit)
function onAddItemSubmit(e) {
  e.preventDefault();

  const newItem = itemInput.value;

  // Validate Input
  if (newItem === '') {
    alert('Please add an item');
    return;
  }

  // Create item DOM element
  addItemToDOM(newItem);

  // ğŸ”¥ BARIS BARU! Add item to local storage
  addItemToStorage(newItem);

  checkUI();

  itemInput.value = '';
}

// ğŸ”¥ FUNCTION BARU! Memisahkan kode untuk menambahkan ke DOM
function addItemToDOM(item) {
  // Create list item
  const li = document.createElement('li');
  li.appendChild(document.createTextNode(item));

  const button = createButton('remove-item btn-link text-red');
  li.appendChild(button);

  // Add li to the DOM
  itemList.appendChild(li);
}

// ğŸ”¥ FUNCTION BARU! Untuk menyimpan ke Local Storage
function addItemToStorage(item) {
  let itemsFromStorage;

  if (localStorage.getItem('items') === null) {
    itemsFromStorage = [];
  } else {
    itemsFromStorage = JSON.parse(localStorage.getItem('items'));
  }

  // Add new item to array
  itemsFromStorage.push(item);

  // Convert to JSON string and set to local storage
  localStorage.setItem('items', JSON.stringify(itemsFromStorage));
}

function createButton(classes) {
  const button = document.createElement('button');
  button.className = classes;
  const icon = createIcon('fa-solid fa-xmark');
  button.appendChild(icon);
  return button;
}

function createIcon(classes) {
  const icon = document.createElement('i');
  icon.className = classes;
  return icon;
}

function removeItem(e) {
  if (e.target.parentElement.classList.contains('remove-item')) {
    if (confirm('Are you sure?')) {
      e.target.parentElement.parentElement.remove();

      checkUI();
    }
  }
}

function clearItems() {
  while (itemList.firstChild) {
    itemList.removeChild(itemList.firstChild);
  }

  checkUI();
}

function filterItems(e) {
  const items = itemList.querySelectorAll('li');
  const text = e.target.value.toLowerCase();

  items.forEach((item) => {
    const itemName = item.firstChild.textContent.toLowerCase();

    if (itemName.indexOf(text) != -1) {
      item.style.display = 'flex';
    } else {
      item.style.display = 'none';
    }
  });
}

function checkUI() {
  const items = itemList.querySelectorAll('li');

  if (items.length === 0) {
    clearBtn.style.display = 'none';
    itemFilter.style.display = 'none';
  } else {
    clearBtn.style.display = 'block';
    itemFilter.style.display = 'block';
  }
}

// Event Listeners
// ğŸ”¥ DIUBAH! dari addItem â†’ onAddItemSubmit
itemForm.addEventListener('submit', onAddItemSubmit);
itemList.addEventListener('click', removeItem);
clearBtn.addEventListener('click', clearItems);
itemFilter.addEventListener('input', filterItems);

checkUI();
```

### ğŸ¯ Perubahan Utama yang Dilakukan:

| No | Perubahan | Keterangan |
|----|-----------|------------|
| 1ï¸âƒ£ | `addItem` â†’ `onAddItemSubmit` | Nama function diubah agar lebih deskriptif ğŸ”¥ |
| 2ï¸âƒ£ | `addItemToDOM(item)` | Function BARU untuk menambahkan ke DOM ğŸ”¥ |
| 3ï¸âƒ£ | `addItemToStorage(item)` | Function BARU untuk menyimpan ke Local Storage ğŸ”¥ |
| 4ï¸âƒ£ | Event Listener | Diupdate menggunakan nama function yang baru ğŸ”¥ |

---

<a name="langkah-selanjutnya"></a>
## ğŸš€ Langkah Selanjutnya

Selamat! ğŸ‰ Kamu sudah berhasil mengimplementasikan fitur **menyimpan data ke Local Storage**!

### âœ… Apa yang Sudah Dikerjakan:

- âœ¨ Refactoring kode menjadi lebih rapi
- ğŸ’¾ Menyimpan item baru ke Local Storage
- ğŸ”„ Menggunakan `JSON.stringify()` dan `JSON.parse()`

### ğŸ“‹ Yang Masih Perlu Dikerjakan:

1. **ğŸ“¥ Memuat data dari Local Storage** saat halaman dibuka (agar item yang sudah disimpan muncul kembali)
2. **âŒ Menghapus item dari Local Storage** saat item dihapus dari list
3. **ğŸ—‘ï¸ Menghapus semua data** dari Local Storage saat tombol "Clear All" diklik

> **ğŸ’¡ Catatan**: Saat ini, jika kamu reload halaman, items akan **hilang dari tampilan** meskipun sudah tersimpan di Local Storage. Ini karena kita belum membuat function untuk **memuat data** saat halaman dibuka. Kita akan belajar itu di dokumentasi selanjutnya! ğŸ“

---

## ğŸ“ Kesimpulan

Dalam dokumentasi ini, kamu telah belajar:

1. ğŸ“– Apa itu Local Storage dan cara kerjanya
2. ğŸ”§ Cara melakukan refactoring kode
3. ğŸ’¾ Cara menyimpan data array ke Local Storage
4. ğŸ”„ Penggunaan `JSON.stringify()` dan `JSON.parse()`
5. ğŸ§ª Cara testing hasil di Developer Tools

**Selamat belajar dan semoga sukses! ğŸŒŸ**

---

*Dokumentasi ini dibuat untuk pembelajaran pribadi. Keep coding! ğŸ’»*
