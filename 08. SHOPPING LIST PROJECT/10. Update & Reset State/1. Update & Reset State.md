# ğŸ“ Dokumentasi Lengkap: Fitur Edit dan Update Item pada Todo App

> ğŸ’¡ **Catatan:** Dokumentasi ini dirancang untuk pemula. Kami akan membahas fitur edit item secara bertahap dan mudah dipahami.

---

## ğŸ“š Daftar Isi

- [Pengenalan](#pengenalan)
- [Apa itu Edit Mode?](#apa-itu-edit-mode)
- [Cara Kerja Edit Mode Secara Visual](#cara-kerja-edit-mode)
- [Implementasi Edit Mode di Kode](#implementasi-edit-mode)
- [Mengecek Kondisi Edit Mode](#mengecek-kondisi-edit-mode)
- [Menghapus Item Lama dan Menambah Item Baru](#menghapus-item-lama)
- [Reset UI (Mengembalikan Tampilan Normal)](#reset-ui)
- [Kesimpulan](#kesimpulan)

---

<a name="pengenalan"></a>
## ğŸ¯ Pengenalan

Pada bagian ini, kita akan melanjutkan pengembangan aplikasi Todo dengan menambahkan fitur **edit item** yang lengkap. Sebelumnya, kita sudah bisa mengubah tampilan ketika memilih item untuk diedit, tapi sekarang kita akan membuat fitur tersebut benar-benar berfungsi untuk mengubah data item yang sudah ada di local storage.

### ğŸ” Masalah yang Dihadapi

Saat ini ada **2 masalah utama**:

1. âŒ Ketika kita mengklik "Update Item", alih-alih mengubah item yang dipilih, aplikasi **menambahkan item baru** dengan nama yang sama
2. âŒ Tombol **masih berwarna hijau** setelah update, padahal seharusnya kembali ke warna awal (berwarna abu-abu)

---

<a name="apa-itu-edit-mode"></a>
## ğŸ“– Apa itu Edit Mode?

Edit mode adalah sebuah **status/kondisi** yang menunjukkan apakah kita sedang dalam proses mengedit item atau tidak.

### ğŸ¬ Cara Kerjanya:

```javascript
let isEditMode = false;  // â† Variabel yang melacak status edit
```

- Ketika **tidak ada item yang dipilih** â†’ `isEditMode = false` â­•
- Ketika **memilih item untuk diedit** â†’ `isEditMode = true` ğŸŸ¢

### âœ¨ Apa yang Terjadi dalam Edit Mode?

Saat kita **klik salah satu item**:

1. âœ… Item tersebut berubah menjadi warna **abu-abu muda**
2. âœ… Teks item tersebut **masuk ke input field**
3. âœ… Tombol berubah menjadi **"Update Item"** dengan warna **hijau**
4. âœ… Variabel `isEditMode` berubah menjadi **true**

---

<a name="cara-kerja-edit-mode"></a>
## ğŸ¬ Cara Kerja Edit Mode Secara Visual

Mari kita lihat apa yang terjadi dari perspektif user:

### Kondisi Normal (Sebelum Edit)
```
ğŸ“‹ Todo List
â”œâ”€ ğŸ›’ eggs
â”œâ”€ ğŸ¥¤ juice  
â””â”€ ğŸ bread

[Input: _______________]
[â• Add Item] â† tombol berwarna abu-abu (#333)
```

### Setelah Memilih Item untuk Edit
```
ğŸ“‹ Todo List
â”œâ”€ ğŸ›’ eggs â† DIPILIH (warna abu-abu muda)
â”œâ”€ ğŸ¥¤ juice  
â””â”€ ğŸ bread

[Input: eggs]
[âœï¸  Update Item] â† tombol berubah hijau (#228B22)
```

---

<a name="implementasi-edit-mode"></a>
## ğŸ’» Implementasi Edit Mode di Kode

Sekarang mari kita lihat bagian-bagian kode yang penting untuk mengimplementasikan edit mode.

### 1ï¸âƒ£ Deklarasi Variabel Edit Mode

```javascript
let isEditMode = false;  // ğŸ†• Variabel untuk melacak status edit
```

**Penjelasan:**
- Variabel ini **diinisialisasi dengan nilai `false`** (tidak dalam mode edit)
- Nilai ini akan **berubah menjadi `true`** ketika user klik item untuk edit

### 2ï¸âƒ£ Fungsi `setItemToEdit()` - Mengatur Item untuk Diedit

```javascript
function setItemToEdit(item) {
  isEditMode = true;  // ğŸ†• Ubah status menjadi "dalam edit mode"

  // ğŸ†• Hapus class edit-mode dari semua item (jika ada)
  itemList
    .querySelectorAll('li')
    .forEach((i) => i.classList.remove('edit-mode'));

  // ğŸ†• Tambahkan class edit-mode ke item yang dipilih
  item.classList.add('edit-mode');
  
  // ğŸ†• Ubah tombol menjadi "Update Item" dengan warna hijau
  formBtn.innerHTML = '<i class="fa-solid fa-pen"></i>   Update Item';
  formBtn.style.backgroundColor = '#228B22';
  
  // ğŸ†• Masukkan teks item ke input field
  itemInput.value = item.textContent;
}
```

**Penjelasan Langkah demi Langkah:**

| Langkah | Kode | Apa yang Terjadi |
|---------|------|-----------------|
| 1 | `isEditMode = true` | Status berubah menjadi "sedang edit" |
| 2 | `.querySelectorAll('li').forEach(...)` | Cari SEMUA item di list |
| 3 | `.classList.remove('edit-mode')` | Hapus highlight dari item lain |
| 4 | `item.classList.add('edit-mode')` | Highlight item yang dipilih |
| 5 | `formBtn.innerHTML = ...` | Ubah teks & ikon tombol |
| 6 | `formBtn.style.backgroundColor` | Ubah warna tombol menjadi hijau |
| 7 | `itemInput.value = item.textContent` | Tampilkan teks item di input |

---

<a name="mengecek-kondisi-edit-mode"></a>
## ğŸ” Mengecek Kondisi Edit Mode

Ini adalah **bagian paling penting**! Kita perlu mengecek apakah sedang dalam edit mode sebelum menambahkan item baru.

### ğŸ“ Lokasi: Fungsi `onAddItemSubmit()`

```javascript
function onAddItemSubmit(e) {
  e.preventDefault();

  const newItem = itemInput.value;

  // âœ… Validasi input (item tidak boleh kosong)
  if (newItem === '') {
    alert('Please add an item');
    return;
  }

  // ğŸ†•ğŸ”¥ CHECK FOR EDIT MODE - INI ADALAH BAGIAN BARU!
  if (isEditMode) {
    // Kode untuk mengedit akan kita bahas di bagian berikutnya...
  }

  // Sisa kode untuk menambah item baru...
  addItemToDOM(newItem);
  addItemToStorage(newItem);
  checkUI();
}
```

**Penjelasan:**
- Sebelum menambahkan item baru, kita **HARUS** mengecek: apakah sedang dalam edit mode?
- Jika `isEditMode === true`, kita tidak langsung menambahkan item baru
- Kita harus **hapus item lama terlebih dahulu**, baru kemudian tambahkan item baru

---

<a name="menghapus-item-lama"></a>
## ğŸ—‘ï¸ Menghapus Item Lama dan Menambah Item Baru

Inilah **logika utama** untuk fitur edit. Kita tidak benar-benar "mengedit" item di local storage (karena tidak bisa). Sebaliknya, kita **hapus yang lama, tambah yang baru**.

### ğŸ”„ Strategi: Remove Old, Add New

```javascript
if (isEditMode) {
  // ğŸ†• Langkah 1: Ambil item yang sedang diedit
  const itemToEdit = itemList.querySelector('.edit-mode');

  // ğŸ†• Langkah 2: Hapus dari local storage
  removeItemFromStorage(itemToEdit.textContent);
  
  // ğŸ†• Langkah 3: Hapus class edit-mode
  itemToEdit.classList.remove('edit-mode');
  
  // ğŸ†• Langkah 4: Hapus dari DOM (tampilan)
  itemToEdit.remove();
  
  // ğŸ†• Langkah 5: Reset status edit mode
  isEditMode = false;
}
```

### ğŸ“Š Penjelasan Setiap Langkah

#### ğŸ”´ Langkah 1: Ambil Item yang Sedang Diedit

```javascript
const itemToEdit = itemList.querySelector('.edit-mode');
```

**Apa yang dilakukan:**
- Mencari item dengan **class `edit-mode`** di dalam list
- Item ini adalah item yang user pilih untuk diedit
- Hasilnya disimpan dalam variabel `itemToEdit`

**Analogi:**
```
Bayangkan list seperti ini:
ğŸ“‹ eggs (tidak dipilih)
ğŸ“‹ juice â† .edit-mode (DIPILIH!)
ğŸ“‹ bread (tidak dipilih)

querySelector mencari yang punya class 'edit-mode'
Hasilnya: "juice"
```

#### ğŸ”´ Langkah 2: Hapus dari Local Storage

```javascript
removeItemFromStorage(itemToEdit.textContent);
```

**Apa yang dilakukan:**
- Mengambil **teks item** dari DOM dengan `.textContent`
- Mengirimkan teks tersebut ke fungsi `removeItemFromStorage()`
- Fungsi itu akan menghapus item dari local storage

**Contoh:**
```javascript
itemToEdit.textContent = "juice"
// Jadi kita memanggil:
removeItemFromStorage("juice");
// Local storage: ["eggs", "bread"] â† juice sudah hilang!
```

#### ğŸ”´ Langkah 3: Hapus Class edit-mode

```javascript
itemToEdit.classList.remove('edit-mode');
```

**Apa yang dilakukan:**
- Menghapus class `edit-mode` dari item
- Sehingga warna abu-abu muda hilang

#### ğŸ”´ Langkah 4: Hapus dari DOM

```javascript
itemToEdit.remove();
```

**Apa yang dilakukan:**
- Sepenuhnya menghapus elemen dari tampilan (DOM)
- Item tidak lagi terlihat di layar

#### ğŸ”´ Langkah 5: Reset Status Edit Mode

```javascript
isEditMode = false;
```

**Apa yang dilakukan:**
- Mengembalikan status ke kondisi normal
- Mempersiapkan untuk menambahkan item baru

---

<a name="reset-ui"></a>
## ğŸ¨ Reset UI (Mengembalikan Tampilan Normal)

Setelah update berhasil, tampilan UI perlu **dikembalikan ke normal**. Tombol harus berubah dari hijau kembali ke abu-abu, dan input harus dikosongkan.

### ğŸ“ Lokasi: Fungsi `checkUI()`

```javascript
function checkUI() {
  // ğŸ†• Kosongkan input field
  itemInput.value = '';

  const items = itemList.querySelectorAll('li');

  // Cek apakah ada item di list
  if (items.length === 0) {
    clearBtn.style.display = 'none';
    itemFilter.style.display = 'none';
  } else {
    clearBtn.style.display = 'block';
    itemFilter.style.display = 'block';
  }

  // ğŸ†•ğŸ”¥ RESET TOMBOL KE KONDISI AWAL
  // Ubah ikon dan teks tombol
  formBtn.innerHTML = '<i class="fa-solid fa-plus"></i> Add Item';
  
  // Ubah warna tombol kembali ke abu-abu (#333)
  formBtn.style.backgroundColor = '#333';

  // ğŸ†• Reset status edit mode ke false
  isEditMode = false;
}
```

### ğŸ¬ Apa yang Terjadi Saat `checkUI()` Dijalankan?

| Bagian | Sebelumnya | Sesudahnya |
|--------|-----------|-----------|
| **Input Field** | `eggs` | `` (kosong) |
| **Tombol Ikon** | âœï¸ (pen) | â• (plus) |
| **Tombol Teks** | Update Item | Add Item |
| **Tombol Warna** | ğŸŸ¢ Hijau (#228B22) | âš« Abu-abu (#333) |
| **Edit Mode Status** | true | false |

### ğŸ“ Kapan `checkUI()` Dijalankan?

Fungsi `checkUI()` dipanggil di berbagai tempat untuk memastikan UI selalu dalam kondisi yang benar:

```javascript
function onAddItemSubmit(e) {
  // ... kode edit dan tambah item ...
  
  checkUI();  // â† Dipanggil di sini!
}

function removeItem(item) {
  // ... hapus item ...
  
  checkUI();  // â† Juga dipanggil di sini!
}

function clearItems() {
  // ... kosongkan semua item ...
  
  checkUI();  // â† Dan di sini juga!
}
```

---

## ğŸ¯ Alur Kerja Lengkap: Dari A sampai Z

Mari kita ikuti apa yang terjadi dari awal sampai akhir ketika user mengedit item.

### Skenario: Mengedit "eggs" menjadi "egg"

```
AWAL:
ğŸ“‹ List: [eggs, juice, bread]
[Input: _______________]
[â• Add Item] - Abu-abu

â†“ USER KLIK "eggs"

SAAT DIKLIK:
ğŸ“‹ List: [eggsâ† abu-abu muda, juice, bread]
[Input: eggs] â† otomatis terisi
[âœï¸  Update Item] - Hijau
(isEditMode = true)

â†“ USER HAPUS "S" DAN KLIK "Update Item"

SAAT "Update Item" DIKLIK:
1. Input: "egg" (tanpa S)
2. Cek: isEditMode === true? YA!
3. Ambil item: "eggs" (dari .edit-mode)
4. Hapus dari storage: removeItemFromStorage("eggs")
5. Hapus dari DOM: itemToEdit.remove()
6. Set isEditMode = false
7. Tambahkan item baru: "egg"
8. Simpan ke storage: addItemToStorage("egg")
9. Jalankan checkUI()

HASIL AKHIR:
ğŸ“‹ List: [egg, juice, bread] â† berhasil diedit!
[Input: _______________] â† kosong
[â• Add Item] - Abu-abu â† kembali normal
(isEditMode = false)
```

---

<a name="kesimpulan"></a>
## ğŸ“Œ Kesimpulan

### âœ… Apa yang Sudah Kita Pelajari?

1. **Edit Mode** - Status untuk menunjukkan sedang mengedit atau tidak
2. **Mengecek Edit Mode** - Sebelum menambah item, cek apakah dalam edit mode
3. **Remove & Add** - Tidak bisa mengedit langsung, jadi hapus yang lama + tambah yang baru
4. **Reset UI** - Kembalikan tombol dan input ke kondisi normal setelah selesai

### ğŸ“ Konsep Penting untuk Diingat

- ğŸ’¾ **Local Storage** tidak bisa "edit" data langsung â†’ harus remove dulu, baru add
- ğŸ¨ **Vanilla JavaScript** memerlukan reset manual UI (tidak seperti framework yang otomatis)
- ğŸ” **querySelector** bisa menemukan elemen berdasarkan class atau ID
- âœï¸ **Edit Mode** adalah konsep penting dalam aplikasi CRUD (Create, Read, Update, Delete)

### ğŸš€ Langkah Selanjutnya

Di tutorial berikutnya, kita akan menambahkan fitur untuk **mencegah pengguna menambahkan item yang sama (duplicate entries)**. Jadi stay tuned! ğŸ‘€

---

## ğŸ“– Kode Lengkap Script.js

Berikut adalah kode lengkap yang sudah diupdate:

```javascript
const itemForm = document.getElementById('item-form');
const itemInput = document.getElementById('item-input');
const itemList = document.getElementById('item-list');
const clearBtn = document.getElementById('clear');
const itemFilter = document.getElementById('filter');
const formBtn = itemForm.querySelector('button');
let isEditMode = false;  // ğŸ†• Variabel untuk melacak status edit

function displayItems() {
  const itemsFromStorage = getItemsFromStorage();
  itemsFromStorage.forEach((item) => addItemToDOM(item));
  checkUI();
}

function onAddItemSubmit(e) {
  e.preventDefault();

  const newItem = itemInput.value;

  // Validate Input
  if (newItem === '') {
    alert('Please add an item');
    return;
  }

  // ğŸ†•ğŸ”¥ CHECK FOR EDIT MODE
  if (isEditMode) {
    const itemToEdit = itemList.querySelector('.edit-mode');

    removeItemFromStorage(itemToEdit.textContent);
    itemToEdit.classList.remove('edit-mode');
    itemToEdit.remove();
    isEditMode = false;
  }

  // Create item DOM element
  addItemToDOM(newItem);

  // Add item to local storage
  addItemToStorage(newItem);

  checkUI();
}

function addItemToDOM(item) {
  // Create list item
  const li = document.createElement('li');
  li.appendChild(document.createTextNode(item));

  const button = createButton('remove-item btn-link text-red');
  li.appendChild(button);

  // Add li to the DOM
  itemList.appendChild(li);
}

function createButton(classes) {
  const button = document.createElement('button');
  button.className = classes;
  const icon = createIcon('fa-solid fa-xmark');
  button.appendChild(icon);
  return button;
}

function createIcon(classes) {
  const icon = document.createElement('i');
  icon.className = classes;
  return icon;
}

function addItemToStorage(item) {
  const itemsFromStorage = getItemsFromStorage();

  // Add new item to array
  itemsFromStorage.push(item);

  // Convert to JSON string and set to local storage
  localStorage.setItem('items', JSON.stringify(itemsFromStorage));
}

function getItemsFromStorage() {
  let itemsFromStorage;

  if (localStorage.getItem('items') === null) {
    itemsFromStorage = [];
  } else {
    itemsFromStorage = JSON.parse(localStorage.getItem('items'));
  }

  return itemsFromStorage;
}

function onClickItem(e) {
  if (e.target.parentElement.classList.contains('remove-item')) {
    removeItem(e.target.parentElement.parentElement);
  } else {
    setItemToEdit(e.target);
  }
}

function setItemToEdit(item) {
  isEditMode = true;  // ğŸ†• Ubah status ke "dalam edit mode"

  // ğŸ†• Hapus class edit-mode dari semua item
  itemList
    .querySelectorAll('li')
    .forEach((i) => i.classList.remove('edit-mode'));

  // ğŸ†• Tambahkan class edit-mode ke item yang dipilih
  item.classList.add('edit-mode');
  
  // ğŸ†• Ubah tombol ke mode "Update"
  formBtn.innerHTML = '<i class="fa-solid fa-pen"></i>   Update Item';
  formBtn.style.backgroundColor = '#228B22';
  
  // ğŸ†• Masukkan teks item ke input
  itemInput.value = item.textContent;
}

function removeItem(item) {
  if (confirm('Are you sure?')) {
    // Remove item from DOM
    item.remove();

    // Remove item from storage
    removeItemFromStorage(item.textContent);

    checkUI();
  }
}

function removeItemFromStorage(item) {
  let itemsFromStorage = getItemsFromStorage();

  // Filter out item to be removed
  itemsFromStorage = itemsFromStorage.filter((i) => i !== item);

  // Re-set to localstorage
  localStorage.setItem('items', JSON.stringify(itemsFromStorage));
}

function clearItems() {
  while (itemList.firstChild) {
    itemList.removeChild(itemList.firstChild);
  }

  // Clear from localStorage
  localStorage.removeItem('items');

  checkUI();
}

function filterItems(e) {
  const items = itemList.querySelectorAll('li');
  const text = e.target.value.toLowerCase();

  items.forEach((item) => {
    const itemName = item.firstChild.textContent.toLowerCase();

    if (itemName.indexOf(text) != -1) {
      item.style.display = 'flex';
    } else {
      item.style.display = 'none';
    }
  });
}

function checkUI() {
  // ğŸ†• Kosongkan input field
  itemInput.value = '';

  const items = itemList.querySelectorAll('li');

  if (items.length === 0) {
    clearBtn.style.display = 'none';
    itemFilter.style.display = 'none';
  } else {
    clearBtn.style.display = 'block';
    itemFilter.style.display = 'block';
  }

  // ğŸ†• Reset tombol ke kondisi awal
  formBtn.innerHTML = '<i class="fa-solid fa-plus"></i> Add Item';
  formBtn.style.backgroundColor = '#333';

  // ğŸ†• Reset status edit mode
  isEditMode = false;
}

// Initialize app
function init() {
  // Event Listeners
  itemForm.addEventListener('submit', onAddItemSubmit);
  itemList.addEventListener('click', onClickItem);
  clearBtn.addEventListener('click', clearItems);
  itemFilter.addEventListener('input', filterItems);
  document.addEventListener('DOMContentLoaded', displayItems);

  checkUI();
}

init();
```

---

**Selamat belajar! ğŸ‰ Jangan takut untuk bereksperimen dengan kode ini dan lihat apa yang terjadi!**
